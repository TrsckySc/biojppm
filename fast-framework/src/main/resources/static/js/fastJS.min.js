/*!
 * Copyright (c) 2020-Now http://www.j2eefast.com All rights reserved.
 * No deletion without permission
 * @author ZhouHuan
 * @version 2.6.0
 */
if(typeof jQuery==="undefined"){throw new Error("fastJS JavaScript requires jQuery")}(function($,window,undefined){var opt={variable:{navtab:null,_tabIndex:-999,tindex:0,pushMenu:null,version:"2.6.0",debug:true,mode:"storage",loadTip:true,isWatermark:true,table_type:{bootstrapTable:0,bootstrapTreeTable:1},modal_status:{SUCCESS:"success",FAIL:"error",WARNING:"warning"},web_status:{SUCCESS:"00000",FAIL:500,WARNING:"50001"},skins:["skin-blue","skin-black","skin-red","skin-yellow","skin-purple","skin-green","skin-blue-light","skin-black-light","skin-red-light","skin-yellow-light","skin-purple-light","skin-green-light","skin-blue-dark"]},domReady:function(){var fnArr=[];function doReady(doc){doc.isReady=true;for(var ci;ci=fnArr.pop();ci()){}}return function(onready,win){win=win||window;var doc=win.document;onready&&fnArr.push(onready);if(doc.readyState==="complete"){doReady(doc)}else{doc.isReady&&doReady(doc);var agent=navigator.userAgent.toLowerCase();var ie=/(msie\s|trident.*rv:)([\w.]+)/.test(agent);var version;var v1=agent.match(/(?:msie\s([\w.]+))/);var v2=agent.match(/(?:trident.*rv:([\w.]+))/);if(v1&&v2&&v1[1]&&v2[1]){version=Math.max(v1[1]*1,v2[1]*1)}else{if(v1&&v1[1]){version=v1[1]*1}else{if(v2&&v2[1]){version=v2[1]*1}else{version=0}}}if(ie&&version!=11){(function(){if(doc.isReady){return}try{doc.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0);return}doReady(doc)})();win.attachEvent("onload",function(){doReady(doc)})}else{doc.addEventListener("DOMContentLoaded",function(){doc.removeEventListener("DOMContentLoaded",arguments.callee,false);doReady(doc)},false);win.addEventListener("load",function(){doReady(doc)},false)}}}}(),sidebarCollapse:function(){opt.variable.pushMenu.expandOnHover();if(!$("body").hasClass("sidebar-collapse")){$('[data-layout="sidebar-collapse"]').click()}$('[data-toggle="push-menu"]').click()},pushMenuInit:function(){$(".main-sidebar").unbind("mouseenter").unbind("mouseleave")},wclearInterval:function(){window.clearInterval(opt.variable.tindex)},getMessage:function(){$.getJSON("sys/user/info?_"+$.now(),function(r){})},toast:function(){if($.toast){return $.toast}try{if(parent.$.toast){return parent.$.toast}if(parent.parent.$.toast){return parent.parent.$.toast}if(top.$.toast){return top.$.toast}}catch(e){}return null}(),error:function(msg,callback){opt.modal.enable();if(opt.toast){var position={right:7,bottom:32};if(top.location==self.location){position={right:7,bottom:5}}opt.toast({heading:$.i18n.prop("警告"),text:msg,hideAfter:8000,position:position,showHideTransition:"slide",afterHidden:function(){if(typeof(callback)==="function"){callback("ok")}},icon:"error"})}else{opt.modal.alertError(msg)}},info:function(msg,callback){if(opt.toast){var position={right:7,bottom:32};if(top.location==self.location){position={right:7,bottom:5}}opt.toast({heading:$.i18n.prop("提示"),text:msg,hideAfter:4000,position:position,showHideTransition:"slide",afterHidden:function(){if(typeof(callback)==="function"){callback("ok")}},icon:"info"})}else{opt.modal.alertInfo(msg);if(typeof(callback)==="function"){callback("ok")}}},success:function(msg,callback){if(opt.toast){var position={right:7,bottom:32};if(top.location==self.location){position={right:7,bottom:5}}opt.toast({heading:$.i18n.prop("成功"),text:msg,hideAfter:4000,position:position,showHideTransition:"slide",afterHidden:function(){if(typeof(callback)==="function"){callback("ok")}},icon:"success"})}else{opt.selfLayer.msg(msg);if(typeof(callback)==="function"){callback("ok")}}},warning:function(text,callback){if(opt.toast){var position={right:7,bottom:32};if(top.location==self.location){position={right:7,bottom:5}}opt.toast({heading:$.i18n.prop("警告"),text:text,hideAfter:4000,position:position,showHideTransition:"slide",afterHidden:function(){if(typeof(callback)==="function"){callback("ok")}},icon:"warning"})}else{opt.modal.alertWarning(text)}},changeSkin:function(cls){$.each(opt.variable.skins,function(i){$("body").removeClass(opt.variable.skins[i])});$("body").addClass(cls);opt.storage.set("skin",cls);return false},setPageMode:function(src){if(top.location==self.location){var mode=opt.storage.get("mode",0);if(typeof mode!=="undefined"&&mode&&mode.length>0){$("html").removeClass(mode)}if(typeof src!=="undefined"&&src&&src.length>0){if(!$("html").hasClass(src)){$("html").addClass(src)}}}},getLeftMeunDataConfig:function(module,href){var dataId=$("#leftMenu li a[data-url='"+href+"'][data-module='"+module+"']").attr("data-id")||-1;var dataIcon=$("#leftMenu li a[data-url='"+href+"'][data-module='"+module+"'] i").attr("data-icon")||"";var title=$("#leftMenu li a[data-url='"+href+"'][data-module='"+module+"'] span").html()||"";var data={href:href,icon:dataIcon,title:$.i18n.prop(title),id:dataId,module:module};return data
    },getLeftFirstMenuConig:function(){var href=$("#leftMenu li a[data-url]:first-child").attr("data-url")||"main";var dataId=$("#leftMenu li a[data-url]:first-child").attr("data-id")||-1;var module=$("#leftMenu li a[data-url]:first-child").attr("data-module")||"core";var dataIcon=$("#leftMenu li a[data-url]:first-child i").attr("data-icon")||"";var title=$("#leftMenu li a[data-url]:first-child span").html();var data={href:href,icon:dataIcon,title:$.i18n.prop(title),id:dataId,module:module};return data},createMenuItem:function(dataUrl,menuName,icon){if(top.location!==self.location){var dataIndex=opt.common.randomString(16);var panelId,module;if(dataUrl==undefined||$.trim(dataUrl).length==0){return false}if(opt.common.isEmpty(parent.opt.variable.navtab)){parent.opt.createMenuItem(dataUrl,menuName,icon);return}var topWindow=$(window.parent.document);if($(".layui-tab-title li",topWindow).length>0){$(".layui-tab-title li",topWindow).each(function(){if($(this).hasClass("layui-this")){panelId=$(this).attr("lay-id");module=$(this).children("em").data("module")}})}if(opt.common.isEmpty(icon)){icon=""}var data={href:dataUrl,icon:icon,panel:panelId,title:menuName,module:module,id:dataIndex};parent.opt.navTabAdd(data);return}else{opt.selfLayer.open({type:2,maxmin:true,shadeClose:true,title:menuName,area:[($(window).width()-100)+"px",($(window).height()-100)+"px"],content:dataUrl})}},closeItem:function(dataId){if(top.location!=self.location){var topWindow=$(window.parent.document);if($(".layui-tab-title li",topWindow).length>0){if(opt.common.isNotEmpty(dataId)){$('.layui-tab-title li[lay-id="'+dataId+'"]',topWindow).children('i.layui-tab-close[data-id="'+data.id+'"]').trigger("click")}else{$(".layui-tab-title li",topWindow).each(function(){if($(this).hasClass("layui-this")){$(this).children('i.layui-tab-close[data-id="'+$(this).attr("lay-id")+'"]').trigger("click");return false}})}}else{try{if(parent.opt.table.options.type==opt.variable.table_type.bootstrapTable){parent.$.table.refresh()}else{if(parent.opt.table.options.type==opt.variable.table_type.bootstrapTreeTable){parent.$.treeTable.refresh()}}}catch(e){}parent.opt.selfLayer.closeAll()}}else{window.opener=null;window.open("","_self");window.close()}},animateNum:function(targetEle,options){options=options||{};var $this=document.getElementById(targetEle),time=options.time||$this.data("time")||2500,finalNum=options.num||$this.data("value"),regulator=options.regulator||100,step=finalNum/(time/regulator),count=0,initial=0;var timer=setInterval(function(){count=count+step;if(count>=finalNum){clearInterval(timer);count=finalNum}var t=Math.floor(count);if(t==initial){return}initial=t;$this.innerHTML=initial},30)},block:function(value,element){if(opt.common.isEmpty(value)){if(opt.common.isNotEmpty(element)){$(element).block()}else{$.blockUI()}}else{if(opt.common.isNotEmpty(element)){$(element).block({message:'<div class="loaderbox"><div class="loading-activity"></div> '+$.i18n.prop(value)+"</div>"})}else{$.blockUI({message:'<div class="loaderbox"><div class="loading-activity"></div> '+$.i18n.prop(value)+"</div>"})}}},unblock:function(element){if(opt.common.isNotEmpty(element)){$(element).unblock()}else{$.unblockUI()}},template:function(id,data,callback){var tpl=String($("#"+id).html()).replace(/(\/\/\<!\-\-)|(\/\/\-\->)/g,""),data=data||[];if(typeof callback=="function"){laytpl(tpl).render(data||[],function(render){callback(render)});return null}return laytpl(tpl).render(data||[])},layer:function(){try{if(top.layer){return top.layer}if(parent.parent.layer){return parent.parent.layer}if(parent.layer){return parent.layer}}catch(e){}if(window.layer){return layer}return null}(),getCookie:function(name){if(document.cookie.length>0){var c_start=document.cookie.indexOf(name+"=");if(c_start!=-1){c_start=c_start+name.length+1;var c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}return""},selfLayer:function(){if(window.layer){return layer}try{if(top.layer&&top.layer.window){return top.layer}if(parent.parent.layer&&parent.parent.layer.window){return parent.parent.layer}if(parent.layer&&parent.layer.window){return parent.layer}}catch(e){}return null}(),navDelTab:function(dataId){opt.variable.navtab.tabDelete(dataId)},navTabAdd:function(data){opt.variable.navtab.tabAdd(data)},navToTab:function(dataId){opt.variable.navtab.tabChange(dataId)},navDelTabNow:function(){if($(".layui-tab-title li").length>1){$(".layui-tab-title li").each(function(){if($(this).attr("lay-id")!=0){$(this).children('i.layui-tab-close[data-id="'+$(this).attr("lay-id")+'"]').trigger("click")}})}},storage:{set:function(key,value,tag){if(typeof tag!=="undefined"&&tag==0){window.localStorage.setItem(key,value)}else{window.localStorage.setItem(__USERNAME__+key,value)}},get:function(key,tag){if(typeof tag!=="undefined"&&tag==0){return window.localStorage.getItem(key)}else{return window.localStorage.getItem(__USERNAME__+key)}},remove:function(key,tag){if(typeof tag!=="undefined"&&tag==0){window.localStorage.removeItem(key)
        }else{window.localStorage.removeItem(__USERNAME__+key)}},clear:function(){window.localStorage.clear()}},table:{config:{},options:{},set:function(id){if(opt.common.getLength(opt.table.config)>1){var tableId=opt.common.isEmpty(id)?$(event.currentTarget).parents(".bootstrap-table").find(".table").attr("id"):id;if(opt.common.isNotEmpty(tableId)){opt.table.options=opt.table.get(tableId)}}},__dict__:{},get:function(id){return opt.table.config[id]},rememberSelecteds:{},rememberSelectedIds:{},},common:{isEmpty:function(obj){try{if(obj==null||obj==undefined){return true}if(this.isArray(obj)||this.isString(obj)){return obj.length===0}if(this.isNumber(obj)){return false}if(this.isFunction(obj)){return false}if(typeof obj==="boolean"){return false}for(var key in obj){if(obj.hasOwnProperty(key)){return false}}return true}catch(e){if(window.console){console.error(e)}return true}},addWaterMarker:function(str){var cpyName=str;if(str.length>26){cpyName=str.substring(0,26)}var can=document.createElement("canvas");var report=$(".wrapper")[0];report.appendChild(can);can.width=280;can.height=110;can.style.display="none";can.style.zIndex="999999";var cans=can.getContext("2d");cans.rotate(-25*Math.PI/180);cans.font="800 30px Microsoft JhengHei";cans.fillStyle="#000";cans.textAlign="center";cans.textBaseline="Middle";if(cans.measureText(cpyName).width>180){var size=180/cpyName.length;cans.font="800 "+size+"px "+" Microsoft JhengHei"}cans.fillText(cpyName,60,100);report.style.backgroundImage="url("+can.toDataURL("image/png")+")"},watermark:function(settings){var defaultSettings={watermark_txt:"text",watermark_x:20,watermark_y:20,watermark_rows:100,watermark_cols:20,watermark_x_space:10,watermark_y_space:10,watermark_color:"#aaa",watermark_alpha:0.3,watermark_fontsize:"15px",watermark_font:"微软雅黑",watermark_width:150,watermark_height:80,watermark_angle:15};if(arguments.length===1&&typeof arguments[0]==="object"){var src=arguments[0]||{};for(key in src){if(src[key]&&defaultSettings[key]&&src[key]===defaultSettings[key]){continue}else{if(src[key]){defaultSettings[key]=src[key]}}}}var oTemp=document.createDocumentFragment();var page_width=Math.max(document.body.scrollWidth,document.body.clientWidth);var cutWidth=page_width*0.015;page_width=page_width-cutWidth;var page_height=Math.max(document.body.scrollHeight-80,document.body.clientHeight-40);if(defaultSettings.watermark_cols==0||(parseInt(defaultSettings.watermark_x+defaultSettings.watermark_width*defaultSettings.watermark_cols+defaultSettings.watermark_x_space*(defaultSettings.watermark_cols-1))>page_width)){defaultSettings.watermark_cols=parseInt((page_width-defaultSettings.watermark_x+defaultSettings.watermark_x_space)/(defaultSettings.watermark_width+defaultSettings.watermark_x_space));defaultSettings.watermark_x_space=parseInt((page_width-defaultSettings.watermark_x-defaultSettings.watermark_width*defaultSettings.watermark_cols)/(defaultSettings.watermark_cols-1))}if(defaultSettings.watermark_rows==0||(parseInt(defaultSettings.watermark_y+defaultSettings.watermark_height*defaultSettings.watermark_rows+defaultSettings.watermark_y_space*(defaultSettings.watermark_rows-1))>page_height)){defaultSettings.watermark_rows=parseInt((defaultSettings.watermark_y_space+page_height-defaultSettings.watermark_y)/(defaultSettings.watermark_height+defaultSettings.watermark_y_space));defaultSettings.watermark_y_space=parseInt(((page_height-defaultSettings.watermark_y)-defaultSettings.watermark_height*defaultSettings.watermark_rows)/(defaultSettings.watermark_rows-1))}var x;var y;for(var i=0;i<defaultSettings.watermark_rows;i++){y=defaultSettings.watermark_y+(defaultSettings.watermark_y_space+defaultSettings.watermark_height)*i;for(var j=0;j<defaultSettings.watermark_cols;j++){x=defaultSettings.watermark_x+(defaultSettings.watermark_width+defaultSettings.watermark_x_space)*j;var mask_div=document.createElement("div");mask_div.id="mask_div"+i+j;mask_div.className="mask_div";mask_div.appendChild(document.createTextNode(defaultSettings.watermark_txt));mask_div.style.webkitTransform="rotate(-"+defaultSettings.watermark_angle+"deg)";mask_div.style.MozTransform="rotate(-"+defaultSettings.watermark_angle+"deg)";mask_div.style.msTransform="rotate(-"+defaultSettings.watermark_angle+"deg)";mask_div.style.OTransform="rotate(-"+defaultSettings.watermark_angle+"deg)";mask_div.style.transform="rotate(-"+defaultSettings.watermark_angle+"deg)";mask_div.style.visibility="";mask_div.style.position="fixed";mask_div.style.left=x+"px";mask_div.style.top=y+"px";mask_div.style.overflow="hidden";mask_div.style.zIndex="19920219";mask_div.style.pointerEvents="none";mask_div.style.opacity=defaultSettings.watermark_alpha;mask_div.style.fontSize=defaultSettings.watermark_fontsize;mask_div.style.fontFamily=defaultSettings.watermark_font;mask_div.style.color=defaultSettings.watermark_color;mask_div.style.textAlign="center";mask_div.style.width=defaultSettings.watermark_width+"px";mask_div.style.height=defaultSettings.watermark_height+"px";
            mask_div.style.display="block";if((i%2==0)&&(j%2==0)){oTemp.appendChild(mask_div)}if((i%2==1)&&(j%2==1)){oTemp.appendChild(mask_div)}}}document.body.appendChild(oTemp)},isPrimitive:function(value){return(typeof value==="string"||typeof value==="number"||typeof value==="symbol"||typeof value==="boolean")},isNotEmpty:function(value){return !opt.common.isEmpty(value)},nullToStr:function(value,_default){if(opt.common.isEmpty(value)){return(opt.common.isEmpty(_default))?"":_default}return value},visible:function(value){if(opt.common.isEmpty(value)||value==true){return true}return false},selectDictLabel:function(datas,value,tag){if(opt.common.isString(datas)){if(opt.table.__dict__==undefined){opt.table.__dict__={}}if(opt.table.__dict__[datas]==undefined||opt.table.__dict__[datas]=="undefined"){var data=window.localStorage.getItem("_dict_"+datas);if(opt.common.isEmpty(data)||data=="undefined"){var conifg={url:baseURL+"sys/dict/data/type/"+datas,type:"GET",dataType:"JSON",async:false,success:function(ref){if(ref.code==opt.variable.web_status.SUCCESS&&typeof ref.data=="object"){window.localStorage.setItem("_dict_"+datas,JSON.stringify(ref.data));datas=ref.data;opt.table.__dict__[datas]=ref.data}else{opt.error("获取字典错误！请检查字典字段:"+datas);return}}};opt.common.sendAjax(conifg)}else{var d=JSON.parse(data);opt.table.__dict__[datas]=d;datas=d}}else{datas=opt.table.__dict__[datas]}if(typeof datas!="object"){console.error("请检查字典设置字段是否正确.....",datas)}}var actions=[];$.each(datas,function(index,dict){if(dict.dictValue==(""+value)){var listClass=opt.common.equals("default",dict.listClass)||opt.common.isEmpty(dict.listClass)?"":"badge badge-"+dict.listClass;if(!opt.common.isEmpty(dict.cssClass)){listClass=opt.common.isEmpty(dict.cssClass)?"":dict.cssClass}if(!opt.common.isEmpty(dict.cssStyle)){listClass=dict.cssStyle}if(tag!=undefined&&tag==0){listClass=""}if(!opt.common.isEmpty(dict.cssStyle)){actions.push(opt.common.sprintf("<span style='%s'>%s</span>",listClass,$.i18n.prop(dict.dictLabel)))}else{actions.push(opt.common.sprintf("<span class='%s'>%s</span>",listClass,$.i18n.prop(dict.dictLabel)))}return false}if(opt.common.isEmpty(value)&&dict.isDefault==="Y"){var listClass=opt.common.equals("default",dict.listClass)||opt.common.isEmpty(dict.listClass)?"":"badge badge-"+dict.listClass;if(!opt.common.isEmpty(dict.cssClass)){listClass=opt.common.isEmpty(dict.cssClass)?"":dict.cssClass}if(!opt.common.isEmpty(dict.cssStyle)){listClass=dict.cssStyle}if(tag!=undefined&&tag==0){listClass=""}if(!opt.common.isEmpty(dict.cssStyle)){actions.push(opt.common.sprintf("<span style='%s'>%s</span>",listClass,$.i18n.prop(dict.dictLabel)))}else{actions.push(opt.common.sprintf("<span class='%s'>%s</span>",listClass,$.i18n.prop(dict.dictLabel)))}return false}});return actions.join("")},selectDictLabels:function(datas,valueStr){var actions=[];valueStr=valueStr+"";valueStr=valueStr||"";var values=valueStr.split(",");$.each(values,function(index,value){$.each(datas,function(index,dict){if(dict.dictValue==(""+value)){var listClass=opt.common.equals("default",dict.listClass)||opt.common.isEmpty(dict.listClass)?"":"badge badge-"+dict.listClass;if(!opt.common.isEmpty(dict.cssClass)){listClass=opt.common.isEmpty(dict.cssClass)?"":dict.cssClass}if(!opt.common.isEmpty(dict.cssStyle)){listClass=dict.cssStyle}if(!opt.common.isEmpty(dict.cssStyle)){actions.push(opt.common.sprintf("<span style='%s'>%s</span>",listClass,$.i18n.prop(dict.dictLabel)))}else{actions.push(opt.common.sprintf("<span class='%s'>%s</span>",listClass,$.i18n.prop(dict.dictLabel)))}return false}if(opt.common.isEmpty(value)&&dict.isDefault==="Y"){var listClass=opt.common.equals("default",dict.listClass)||opt.common.isEmpty(dict.listClass)?"":"badge badge-"+dict.listClass;if(!opt.common.isEmpty(dict.cssClass)){listClass=opt.common.isEmpty(dict.cssClass)?"":dict.cssClass}actions.push(opt.common.sprintf("<span class='%s'>%s</span>",listClass,$.i18n.prop(dict.dictLabel)));return false}})});return actions.join(",")},tooltip:function(value,length,align,target){var _length=opt.common.isEmpty(length)?20:length;var _align=opt.common.isEmpty(align)?false:align;var _text="";var _value=opt.common.nullToStr(value);var _target=opt.common.isEmpty(target)?"copy":target;if(_value.length>_length){if(_align){_text="..."+_value.substr(_value.length-_length,_length)}else{_text=_value.substr(0,_length)+"..."}_value=_value.replace(/\'/g,"&apos;");_value=_value.replace(/\"/g,"&quot;");var actions=[];actions.push(opt.common.sprintf('<input style="opacity: 0;position: absolute;z-index:-1" type="text" value="%s"/>',_value));actions.push(opt.common.sprintf('<a href="###" class="tooltip-show" data-toggle="tooltip" data-target="%s" title="%s">%s</a>',_target,_value,_text));return actions.join("")}else{_text=_value;var actions=[];actions.push(opt.common.sprintf('<input style="opacity: 0;position: absolute;z-index:-1" type="text" value="%s"/>',_value));actions.push(opt.common.sprintf('<span class="tooltip-show" data-target="%s" title="%s">%s</span>',_target,_value,_text));
            return actions.join("")}},trim:function(value){if(value==null){return""}if(typeof value==="string"){return value.toString().replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")}else{return value}},hideStr:function(value,len,tag){if(opt.common.isEmpty(value)){return"-"}else{if(tag==0){if(value.length>len){return value.substr(0,len)+"..."}else{return value}}else{return"..."+value.substr(value.length-len,len)}}},equals:function(str,that){return str==that},equalsIgnoreCase:function(str,that){return String(str).toUpperCase()===String(that).toUpperCase()},split:function(str,sep,maxLen){if(opt.common.isEmpty(str)){return null}var value=String(str).split(sep);return maxLen?value.slice(0,maxLen-1):value},sprintf:function(str){var args=arguments,flag=true,i=1;str=str.replace(/%s/g,function(){var arg=args[i++];if(typeof arg==="undefined"){flag=false;return""}return arg});return flag?str:""},random:function(min,max){return Math.floor((Math.random()*max)+min)},randomString:function(len){len=len||32;var $chars="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678";var maxPos=$chars.length;var pwd="";for(var i=0;i<len;i++){pwd+=$chars.charAt(Math.floor(Math.random()*maxPos))}return pwd},startWith:function(value,start){var reg=new RegExp("^"+start);return reg.test(value)},endWith:function(value,end){var reg=new RegExp(end+"$");return reg.test(value)},uniqueFn:function(array){var result=[];var hashObj={};for(var i=0;i<array.length;i++){if(!hashObj[array[i]]){hashObj[array[i]]=true;result.push(array[i])}}return result},join:function(array,separator){if(opt.common.isEmpty(array)){return null}return array.join(separator)},formToJSON:function(formId){var json={};$.each($("#"+formId).serializeArray(),function(i,field){if(json[field.name]){json[field.name]+=(","+field.value)}else{json[field.name]=field.value}});return json},getJsonValue:function(obj,k){var rn=obj;var props=k.split(".");for(var p in props){if(rn[props[p]]&&typeof rn[props[p]]!="undefined"){rn=rn[props[p]]}else{rn=""}}return rn},objToEmpty:function(obj){for(var key in obj){if(Array.prototype==obj[key].__proto__){obj[key]=[]}else{if(typeof obj[key]=="string"){obj[key]=""}else{if(typeof obj[key]=="number"){obj[key]=0}}}}return obj},getLength:function(obj){var count=0;for(var i in obj){if(obj.hasOwnProperty(i)){count++}}return count},copy:function(text){var oInput=document.createElement("textarea");oInput.value=text;$(oInput).css({opacity:"0"});$(oInput).attr({name:"__copy_secukey"});document.body.appendChild(oInput);oInput.select();document.execCommand("Copy");oInput.className="oInput";$("textarea[name='__copy_secukey']").remove()},getCheckboxValue:function(name){var txt="";$('input[name="'+name+'"]').each(function(){if($(this).is(":checked")){txt+=$(this).val()+","}});if(txt.length>0){txt=txt.substring(0,txt.length-1)}return txt},toNumber:function(val){var n=parseFloat(val);return isNaN(n)?val:n},remove:function(arr,item){if(arr.length){var index=arr.indexOf(item);if(index>-1){return arr.splice(index,1)}}},toArray:function(list,start){start=start||0;var i=list.length-start;var ret=new Array(i);while(i--){ret[i]=list[i+start]}return ret},extend:function(target,source,isKeepTarget){if(source){for(var k in source){if(!isKeepTarget||!target.hasOwnProperty(k)){target[k]=source[k]}}}return target},each:function(obj,iterator,context){if(obj==null){return}if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===false){return false}}}else{for(var key in obj){if(obj.hasOwnProperty(key)){if(iterator.call(context,obj[key],key,obj)===false){return false}}}}},toObject:function(arr){var that=this;var res={};for(var i=0;i<arr.length;i++){if(arr[i]){that.extend(res,arr[i])}}return res},moneyToChinese:function(money){var cnNums=new Array("零","壹","贰","叁","肆","伍","陆","柒","捌","玖");var cnIntRadice=new Array("","拾","佰","仟");var cnIntUnits=new Array("","万","亿","兆");var cnDecUnits=new Array("角","分","毫","厘");var cnInteger="整";var cnIntLast="元";var maxNum=1000000000000000;var IntegerNum;var DecimalNum;var ChineseStr="";var parts;var Symbol="";if(opt.common.isEmpty(money)){return"零"}money=parseFloat(money);if(money>=maxNum){throw new Error("超出最大金额!")}if(money==0){ChineseStr=cnNums[0]+cnIntLast+cnInteger;return ChineseStr}if(money<0){money=-money;Symbol="负 "}money=money.toString();if(money.indexOf(".")==-1){IntegerNum=money;DecimalNum=""}else{parts=money.split(".");IntegerNum=parts[0];DecimalNum=parts[1].substr(0,4)}if(parseInt(IntegerNum,10)>0){var zeroCount=0;var IntLen=IntegerNum.length;for(var i=0;i<IntLen;i++){var n=IntegerNum.substr(i,1);var p=IntLen-i-1;var q=p/4;var m=p%4;if(n=="0"){zeroCount++}else{if(zeroCount>0){ChineseStr+=cnNums[0]}zeroCount=0;ChineseStr+=cnNums[parseInt(n)]+cnIntRadice[m]}if(m==0&&zeroCount<4){ChineseStr+=cnIntUnits[q]}}ChineseStr+=cnIntLast}if(DecimalNum!=""){var decLen=DecimalNum.length;for(var i=0;i<decLen;i++){var n=DecimalNum.substr(i,1);if(n!="0"){ChineseStr+=cnNums[Number(n)]+cnDecUnits[i]}}}if(ChineseStr==""){ChineseStr+=cnNums[0]+cnIntLast+cnInteger
        }else{if(DecimalNum==""){ChineseStr+=cnInteger}}ChineseStr=Symbol+ChineseStr;return ChineseStr},compareVersion:function(version1,version2){var arr1=version1.split(".");var arr2=version2.split(".");var length1=arr1.length;var length2=arr2.length;var minlength=Math.min(length1,length2);var i=0;for(i;i<minlength;i++){var a=parseInt(arr1[i]);var b=parseInt(arr2[i]);if(a>b){return 1}else{if(a<b){return -1}}}if(length1>length2){for(var j=i;j<length1;j++){if(parseInt(arr1[j])!=0){return 1}}return 0}else{if(length1<length2){for(var j=i;j<length2;j++){if(parseInt(arr2[j])!=0){return -1}}return 0}}return 0},formatMoney:function(number,places,symbol,thousand,decimal){number=number||0;places=!isNaN(places=Math.abs(places))?places:2;symbol=symbol!==undefined?symbol:"$";thousand=thousand||",";decimal=decimal||".";var negative=number<0?"-":"",i=parseInt(number=Math.abs(+number||0).toFixed(places),10)+"",j=(j=i.length)>3?j%3:0;return symbol+negative+(j?i.substr(0,j)+thousand:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+thousand)+(places?decimal+Math.abs(number-i).toFixed(places).slice(2):"")},playSound:function(src){if(!(src.indexOf("http")==0)){src=baseURL+"static/audio/"+src+".wav"}if(!!window.ActiveXObject||"ActiveXObject" in window){var embed=document.noticePlay;if(embed){embed.remove()}embed=document.createElement("embed");embed.setAttribute("name","noticePlay");embed.setAttribute("src",src);embed.setAttribute("autostart",true);embed.setAttribute("loop",false);embed.setAttribute("hidden",true);document.body.appendChild(embed);embed=document.noticePlay;embed.volume=100}else{var audio=document.createElement("audio");audio.setAttribute("hidden",true);audio.setAttribute("src",src);document.body.appendChild(audio);audio.addEventListener("ended",function(){audio.parentNode.removeChild(audio)},false);audio.play()}},sendAjax:function(config){if(opt.common.equalsIgnoreCase(config.type,"POST")&&opt.common.isNotEmpty($('meta[name="csrf-token"]').attr("content"))){config=opt.common.extend(config,{headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")}})}if(opt.common.isEmpty(config.error)||typeof config.error!="function"){config=opt.common.extend(config,{error:function(xhr,textStatus){try{opt.error(JSON.parse(xhr.responseText).msg||xhr.responseText)}catch(e){console.error(xhr.responseText)}opt.modal.closeLoading();return}})}$.ajax(config)},selectDate:function(value,startId,endId){var date;switch(value){case"0":date=dateRangeUtil.getToDay();break;case"1":var oneDayTime=24*60*60*1000;var dateNow=new Date();var lastDay=new Date(dateNow.getTime()-1*oneDayTime);date=new Array();date.push(opt.common.formatDat(Date.parse(lastDay)));date.push(opt.common.formatDat(Date.parse(lastDay)));break;case"2":var date0=dateRangeUtil.getCurrentWeek();date=new Array();date.push(opt.common.formatDat(Date.parse(date0[0])));date.push(opt.common.formatDat(Date.parse(date0[1])));break;case"3":var date0=dateRangeUtil.getPreviousWeek();date=new Array();date.push(opt.common.formatDat(Date.parse(date0[0])));date.push(opt.common.formatDat(Date.parse(date0[1])));break;case"4":var date0=dateRangeUtil.getPreviousMonth();date=new Array();date.push(opt.common.formatDat(Date.parse(date0[0])));date.push(opt.common.formatDat(Date.parse(date0[1])));break;case"5":var oneDayTime=24*60*60*1000;var dateNow=new Date();date=new Array();var lastDay=new Date(dateNow.getTime()-30*oneDayTime);date.push(opt.common.formatDat(Date.parse(lastDay)));date.push(opt.common.formatDat(Date.parse(dateNow)));break;case"6":var oneDayTime=24*60*60*1000;var dateNow=new Date();date=new Array();var lastDay=new Date(dateNow.getTime()-60*oneDayTime);date.push(opt.common.formatDat(Date.parse(lastDay)));date.push(opt.common.formatDat(Date.parse(dateNow)));break;case"7":var oneDayTime=24*60*60*1000;var dateNow=new Date();date=new Array();var lastDay=new Date(dateNow.getTime()-90*oneDayTime);date.push(opt.common.formatDat(Date.parse(lastDay)));date.push(opt.common.formatDat(Date.parse(dateNow)));break;case"8":var date0=dateRangeUtil.getCurrentSeason();date=new Array();date.push(opt.common.formatDat(Date.parse(date0[0])));date.push(opt.common.formatDat(Date.parse(date0[1])));break;case"9":var date0=dateRangeUtil.getCurrentYear();date=new Array();date.push(opt.common.formatDat(Date.parse(date0[0])));date.push(opt.common.formatDat(Date.parse(date0[1])));break;case"10":var date0=dateRangeUtil.getPreviousYear();date=new Array();date.push(opt.common.formatDat(Date.parse(date0[0])));date.push(opt.common.formatDat(Date.parse(date0[1])));break;default:date=new Array();date.push("");date.push("");break}$("#"+startId).val(date[0]);$("#"+endId).val(date[1])},downLoadFile:function(files){if(opt.common.isString(files)){var id=opt.common.randomString(10);var judgeDiv=document.getElementById("dwDiv_"+id);if(judgeDiv!=null){document.body.removeChild(judgeDiv)}var divObj=document.createElement("div");divObj.style.display="none";divObj.id="dwDiv_"+id;var aObj=document.createElement("a");divObj.appendChild(aObj);
            document.body.appendChild(divObj);var e=document.createEvent("MouseEvents");e.initEvent("click",false,false);aObj.href=encodeURI(files);aObj.id="hrefFile_"+id;aObj.dispatchEvent(e);judgeDiv=document.getElementById("dwDiv_"+id);if(judgeDiv!=null){document.body.removeChild(judgeDiv)}}if(opt.common.isArray(files)){files.forEach(function(url){if(!!window.ActiveXObject||"ActiveXObject" in window){window.open(url,"_blank")}else{var a=document.createElement("a");var e=document.createEvent("MouseEvents");e.initEvent("click",false,false);a.href=url;a.download="";a.dispatchEvent(e)}})}},postDownLoadFile:function(datas,url){var form=document.createElement("form");form.style.display="none";form.action=url;form.method="post";document.body.appendChild(form);for(var key in datas){var input=document.createElement("input");input.type="hidden";input.name=datas[key].name;input.value=datas[key].value;form.appendChild(input)}form.submit();form.remove()},digit:function(e,t){var i="";e=String(e),t=t||2;for(var n=e.length;n<t;n++){i+="0"}return e<Math.pow(10,t)?i+(0|e):e},toDateString:function(data,t){var that=this,n=new Date(data||new Date),a=[that.digit(n.getFullYear(),4),that.digit(n.getMonth()+1),that.digit(n.getDate())],o=[that.digit(n.getHours()),that.digit(n.getMinutes()),that.digit(n.getSeconds())];return t=t||"yyyy-MM-dd HH:mm:ss",t.replace(/yyyy/g,a[0]).replace(/MM/g,a[1]).replace(/dd/g,a[2]).replace(/HH/g,o[0]).replace(/mm/g,o[1]).replace(/ss/g,o[2])},formatDat:function(date,format){var that=this;if(that.isEmpty(date)){return""}if(!date){return}if(!format){format="yyyy-MM-dd"}switch(typeof date){case"string":date=new Date(date.replace(/-/g,"/"));break;case"number":date=new Date(date);break}if(!date instanceof Date){return}var dict={"yyyy":date.getFullYear(),"M":date.getMonth()+1,"d":date.getDate(),"H":date.getHours(),"m":date.getMinutes(),"s":date.getSeconds(),"MM":(""+(date.getMonth()+101)).substr(1),"dd":(""+(date.getDate()+100)).substr(1),"HH":(""+(date.getHours()+100)).substr(1),"mm":(""+(date.getMinutes()+100)).substr(1),"ss":(""+(date.getSeconds()+100)).substr(1)};return format.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,function(){return dict[arguments[0]]})},escape:function(html){return String(html||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},escapeHtml:function(value){return value.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")},encodeUrl:function(a){return encodeURIComponent(a)},decodeUrl:function(a){return decodeURIComponent(a)},subString:function(str,len,hasDot){var newLength=0;var newStr="";var chineseRegex=/[^\x00-\xff]/g;var singleChar="";var strLength=str.replace(chineseRegex,"**").length;for(var i=0;i<strLength;i++){singleChar=str.charAt(i).toString();if(singleChar.match(chineseRegex)!=null){newLength+=2}else{newLength++}if(newLength>len){break}newStr+=singleChar}if(hasDot&&strLength>len){newStr+="..."}return newStr},bytesToSize:function(bytes){if(bytes===0){return"0 B"}var k=1024;sizes=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];i=Math.floor(Math.log(bytes)/Math.log(k));var num=bytes/Math.pow(k,i);return num.toPrecision(3)+" "+sizes[i]},fileFromPath:function(file){return file.replace(/.*(\/|\\)/,"")},getExt:function(file){return(-1!==file.indexOf("."))?file.replace(/.*[.]/,""):""},optimizationPath:function(path){var protocol=/^[a-z]+:\/\//.exec(path)[0],tmp=null,res=[];path=path.replace(protocol,"").split("?")[0].split("#")[0];path=path.replace(/\\/g,"/").split(/\//);path[path.length-1]="";while(path.length){if((tmp=path.shift())===".."){res.pop()}else{if(tmp!=="."){res.push(tmp)}}}return protocol+res.join("/")}},modal:{icon:function(type){var icon="";if(type==opt.variable.modal_status.WARNING){icon=0}else{if(type==opt.variable.modal_status.SUCCESS){icon=1}else{if(type==opt.variable.modal_status.FAIL){icon=2}else{icon=3}}}return icon},msg:function(content,type){if(type!=undefined){opt.selfLayer.msg(content,{icon:opt.modal.icon(type),time:1000,shift:5})}else{opt.selfLayer.msg(content)}},msgError:function(content){opt.modal.msg(content,opt.variable.modal_status.FAIL)},msgSuccess:function(content){opt.modal.msg(content,opt.variable.modal_status.SUCCESS)},msgWarning:function(content){opt.modal.msg(content,opt.variable.modal_status.WARNING)},alert:function(content,type,shadeClose){opt.selfLayer.alert(content,{icon:opt.modal.icon(type),title:$.i18n.prop("系统提示"),shadeClose:opt.common.isEmpty(shadeClose)?true:shadeClose,btn:['<i class="fa fa-check"></i> '+$.i18n.prop("确定")],btnclass:["btn btn-primary"],})},msgReload:function(msg,type){opt.selfLayer.msg(msg,{icon:opt.modal.icon(type),time:500},function(){opt.modal.reload()})},alertError:function(content){opt.modal.alert(content,opt.variable.modal_status.FAIL)},alertSuccess:function(content){opt.modal.alert(content,opt.variable.modal_status.SUCCESS)},alertInfo:function(content){opt.modal.alert(content,"")},success:function(msg,callback){opt.selfLayer.alert(msg,{icon:1,closeBtn:0,title:$.i18n.prop("系统提示"),anim:1,yes:function(index){if(typeof(callback)==="function"){callback("ok")
            }opt.selfLayer.close(index)}})},error:function(msg,callback){opt.error(msg,callback)},warning:function(msg,callback){opt.warning(msg,callback)},alertWarning:function(content){opt.modal.alert(content,opt.variable.modal_status.WARNING,true)},close:function(){var index=opt.selfLayer.getFrameIndex(window.name);if(opt.common.isNotEmpty(index)){opt.selfLayer.close(index)}else{opt.layer.closeAll()}},closeAll:function(){opt.selfLayer.closeAll();opt.layer.closeAll()},confirm:function(content,callback,shadeClose){opt.selfLayer.confirm(content,{icon:3,shadeClose:opt.common.isEmpty(shadeClose)?true:shadeClose,title:'<i class="fa fa-exclamation-circle"></i> '+$.i18n.prop("系统提示"),btn:['<i class="fa fa-check"></i> '+$.i18n.prop("确定"),'<i class="fa fa-close"></i> '+$.i18n.prop("取消")]},function(index){if(typeof(callback)==="function"){callback("ok")}opt.selfLayer.close(index)})},popupRight:function(title,url,isEdit,editFun,id){var width=150;var topp=50;if(top.location!==self.location){if($(top.window).outerWidth()<400){width=50}}else{topp=0;if($(window).outerWidth()<400){width=50}}opt.layer.open({type:2,scrollbar:false,anim:-1,closeBtn:0,move:false,title:title,shadeClose:true,outLeft:true,skin:"layui-anim layui-anim-rl",offset:[topp+"px",($(top.window?top.window:window).outerWidth()-($(window).outerWidth()-width))+"px"],area:[($(window).outerWidth()-width)+"px","100%"],success:function(layero,index){if(opt.common.isNotEmpty(isEdit)&&isEdit){var update=$('<div id="'+index+'" class="layui-right-update"><i class="fa fa-mail-reply-all"></i> '+$.i18n.text("修改")+"</div>").on("click",function(){opt.layer.close($(this).attr("id"));if(typeof editFun=="function"){window.setTimeout(function(){editFun(id)},200)}});if(!$(layero).find(".layui-right-update").html()){$(layero).find(".layui-layer-title").attr("style","font-size:13px;").before(update)}}else{var update=$('<div id="'+index+'" class="layui-right-update"><i class="fa fa fa-times-circle-o"></i> '+$.i18n.text("关闭")+"</div>").on("click",function(){opt.layer.close($(this).attr("id"))});if(!$(layero).find(".layui-right-update").html()){$(layero).find(".layui-layer-title").attr("style","font-size:13px;").before(update)}}},content:url})},open:function(title,url,width,height,callback,type){var full=false;if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){width="auto";height="auto";full=true}if(opt.common.isEmpty(title)){title=false}if(opt.common.isEmpty(url)){url="/404.html"}if(opt.common.isEmpty(width)){width=800}if(opt.common.isEmpty(height)){height=($(window).height()-50)}if(opt.common.isEmpty(type)){type=2}if(width!=="auto"||height!=="auto"){if(width>$(window).width()||height>$(window).height()){full=true}}var submit;if(!opt.common.isEmpty(callback)&&typeof callback=="function"){submit=function(index,layero){var iframeWin=layero.find("iframe")[0];if(typeof iframeWin.contentWindow.submitHandler=="function"){if(iframeWin.contentWindow.submitHandler(index,layero)){callback(index,layero,opt.selfLayer);return}}else{callback(index,layero,opt.selfLayer);return}}}else{submit=function(index,layero){var iframeWin=layero.find("iframe")[0];if(typeof iframeWin.contentWindow.submitHandler=="function"){iframeWin.contentWindow.submitHandler(index,layero);return}else{opt.selfLayer.close(index);return}}}opt.modal.loading($.i18n.prop("数据加载中，请稍后..."));var index=opt.selfLayer.open({type:type,area:[width+"px",height+"px"],fix:false,maxmin:true,title:title,content:url,btn:['<i class="fa fa-check"></i> '+$.i18n.prop("确定"),'<i class="fa fa-close"></i> '+$.i18n.prop("取消")],shadeClose:true,yes:submit,success:function(layero,index){var iframeWin=layero.find("iframe")[0];if(!opt.common.isEmpty(iframeWin.contentWindow.onLoadSuccess)){iframeWin.contentWindow.onLoadSuccess(index,layero,opt.selfLayer)}opt.modal.closeLoading()},cancel:function(index){return true},end:function(){opt.modal.closeLoading()}});if(full){opt.selfLayer.full(index)}},openOptions:function(options){var _btn=opt.common.isEmpty(options.btn)?[]:options.btn;var _url=opt.common.isEmpty(options.url)?"/404.html":options.url;var _title=opt.common.isEmpty(options.title)?$.i18n.prop("系统窗口"):$.i18n.prop(options.title);var _width=opt.common.isEmpty(options.width)?"800":options.width;var _height=opt.common.isEmpty(options.height)?($(window).height()-50):options.height;var _framData=opt.common.isEmpty(options.fromData)?{}:options.fromData;var _type=opt.common.isEmpty(options.type)?2:options.type;var _auto=opt.common.isEmpty(options.auto)?true:options.auto;var _closeBtn=opt.common.isEmpty(options.closeBtn)?1:options.closeBtn;var _maxmin=opt.common.isEmpty(options.maxmin)?true:options.maxmin;var full=false;if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){_width="auto";_height="auto";full=true}if(_auto){if(_width!=="auto"||_height!=="auto"){if(_width>$(window).width()||_height>$(window).height()){full=true}}}var index;if(options.clear){if(_btn.length==0){_btn=['<i class="fa fa-check"></i> '+$.i18n.prop("确定"),'<i class="fa fa-trash-o"></i> '+$.i18n.prop("清除"),'<i class="fa fa-close"></i> '+$.i18n.prop("取消")]
        }}else{if(_btn.length==0){_btn=['<i class="fa fa-check"></i> '+$.i18n.prop("确定"),'<i class="fa fa-close"></i> '+$.i18n.prop("取消")]}}var _sf;if(opt.common.isNotEmpty(options.main)&&options.main){_sf=opt.layer;_height=opt.common.isEmpty(options.height)?($(top.window).height()-220):options.height}else{_sf=opt.selfLayer}if(opt.common.isEmpty(options.yes)){options.yes=function(index,layero){var iframeWin=layero.find("iframe")[0];if(typeof iframeWin.contentWindow.submitHandler=="function"){if(iframeWin.contentWindow.submitHandler(index,layero,_sf)){if(typeof options.callBack=="function"){options.callBack(index,layero,_sf)}}return}else{if(typeof options.callBack=="function"){options.callBack(index,layero,_sf);return}}}}index=_sf.open({type:_type,maxmin:_maxmin,title:_title,closeBtn:_closeBtn,fix:false,area:[opt.common.endWith(_width,"%")?_width:(_width+"px"),opt.common.endWith(_height,"%")?_height:(_height+"px")],content:_url,fromData:_framData,shadeClose:opt.common.isEmpty(options.shadeClose)?true:options.shadeClose,skin:options.skin,btn:_btn,yes:options.yes,btn2:function(index,layero){if(options.clear){options.clear(index,layero,_sf)}else{if(!opt.common.isEmpty(options.cancel)){options.cancel(index,layero)}_sf.close(index)}},btn3:function(index,layero){if(!opt.common.isEmpty(options.cancel)){options.cancel(index,layero)}_sf.close(index)},success:function(layero,index){var iframeWin=layero.find("iframe")[0];if(typeof(iframeWin.contentWindow.onLoadSuccess)==="function"){iframeWin.contentWindow.onLoadSuccess(options.obj,layero,index,_sf)}},cancel:function(index,layero){if(!opt.common.isEmpty(options.cancel)){options.cancel(index,layero)}return true},end:function(){if(!opt.common.isEmpty(options.end)){options.end(index,opt.layer)}return true}});if(full){_sf.full(index)}},openMainWin:function(options){var _url=opt.common.isEmpty(options.url)?"/404.html":options.url;var _title=opt.common.isEmpty(options.title)?$.i18n.prop("系统窗口"):$.i18n.prop(options.title);var _width=opt.common.isEmpty(options.width)?$(top.window).width()-100:options.width;var _height=opt.common.isEmpty(options.height)?$(top.window).height()-100:options.height;var _closeBtn=opt.common.isEmpty(options.closeBtn)?1:options.closeBtn;var _framData=opt.common.isEmpty(options.fromData)?{}:options.fromData;var _maxmin=opt.common.isEmpty(options.maxmin)?true:options.maxmin;var full=false;if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){_width="auto";_height="auto";full=true}var index;if(_width!=="auto"||_height!=="auto"){if(_width>$(top.window).width()||_height>$(top.window).height()){full=true}}if(opt.common.isEmpty(options.but)){options.but=true}if(options.but){if(options.clear){_btn=['<i class="fa fa-check"></i> '+$.i18n.prop("确定"),'<i class="fa fa-trash-o"></i> '+$.i18n.prop("清除"),'<i class="fa fa-close"></i> '+$.i18n.prop("取消")]}else{_btn=['<i class="fa fa-check"></i> '+$.i18n.prop("确定"),'<i class="fa fa-close"></i> '+$.i18n.prop("取消")]}if(!opt.common.isEmpty(options.callBack)){options.yes=function(index,layero){var iframeWin=layero.find("iframe")[0];if(typeof iframeWin.contentWindow.submitHandler=="function"){if(iframeWin.contentWindow.submitHandler(index,layero)){window.setTimeout(function(){options.callBack(index,layero,opt.layer)},100)}}else{options.callBack(index,layero,opt.layer)}}}else{options.yes=function(index,layero){var iframeWin=layero.find("iframe")[0];if(typeof iframeWin.contentWindow.submitHandler=="function"){if(iframeWin.contentWindow.submitHandler(index,layero)){window.setTimeout(function(){opt.layer.close(index)},100)}}else{opt.layer.close(index)}}}index=opt.layer.open({type:2,maxmin:_maxmin,closeBtn:_closeBtn,shadeClose:opt.common.isEmpty(options.shadeClose)?true:options.shadeClose,title:options.title===false?false:_title,area:[_width+"px",_height+"px"],scrollbar:false,content:_url,fromData:_framData,success:function(layero,index){var iframeWin=layero.find("iframe")[0];if(typeof(iframeWin.contentWindow.onLoadSuccess)==="function"){if(opt.common.isEmpty(options.obj)){iframeWin.contentWindow.onLoadSuccess(index,layero,opt.layer)}else{iframeWin.contentWindow.onLoadSuccess(options.obj,index,layero,opt.layer)}}},btn:opt.common.isEmpty(options.btn)?_btn:options.btn,yes:options.yes,btn2:function(index,layero){if(options.clear){options.clear(index,layero,opt.layer)}else{opt.layer.close(index)}},btn3:function(index,layero){opt.layer.close(index)},cancel:function(index,layero){if(!opt.common.isEmpty(options.cancel)){options.cancel(index,layero)}return true},end:function(){if(!opt.common.isEmpty(options.end)){options.end(index,opt.layer)}return true}})}else{index=opt.layer.open({type:2,maxmin:_maxmin,closeBtn:_closeBtn,shadeClose:opt.common.isEmpty(options.shadeClose)?true:options.shadeClose,title:options.title===false?false:_title,area:[_width+"px",_height+"px"],content:_url,success:function(layero,index){opt.selfLayer=opt.layer;var iframeWin=layero.find("iframe")[0];if(typeof(iframeWin.contentWindow.onLoadSuccess)==="function"){if(opt.common.isEmpty(options.obj)){iframeWin.contentWindow.onLoadSuccess(index,layero,opt.layer)
            }else{iframeWin.contentWindow.onLoadSuccess(options.obj,index,layero,opt.layer)}}},cancel:function(index,layero){if(!opt.common.isEmpty(options.cancel)){options.cancel(index,layero)}return true},end:function(){if(!opt.common.isEmpty(options.end)){options.end(index,opt.layer)}return true}})}if(full){opt.layer.full(index)}},openFull:function(title,url,width,height){if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){width="auto";height="auto"}if(opt.common.isEmpty(title)){title=false}if(opt.common.isEmpty(url)){url="/404.html"}if(opt.common.isEmpty(width)){width=800}if(opt.common.isEmpty(height)){height=($(window).height()-50)}var index=opt.selfLayer.open({type:2,area:[width+"px",height+"px"],fix:false,maxmin:true,title:title,content:url,btn:['<i class="fa fa-check"></i> '+$.i18n.prop("确定"),'<i class="fa fa-close"></i> '+$.i18n.prop("取消")],shadeClose:true,yes:function(index,layero){var iframeWin=layero.find("iframe")[0];iframeWin.contentWindow.submitHandler(index,layero)},cancel:function(index){return true}});opt.selfLayer.full(index)},openView:function(name,url,width,height){var url=baseURL+"sys/component/fileViwe?fileName="+opt.common.encodeUrl(name)+"&fileUrl="+opt.common.encodeUrl(url);width=opt.common.isEmpty(width)?$(top.window).width()-200:width;height=opt.common.isEmpty(height)?$(top.window).height()-50:height;opt.layer?opt.layer.open({type:2,maxmin:false,shadeClose:true,title:false,area:[width+"px",height+"px"],content:url}):opt.modal.windowOpen(url)},windowOpen:function(url,title,width,height){width&&height||(width=window.screen.width-200,height=window.screen.height-150);var top=parseInt((window.screen.height-height)/2-20,10),left=parseInt((window.screen.width-width)/2,10);window.open(url,title,"location=no,menubar=no,toolbar=no,"+"dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,"+"scrollbars=yes,width="+width+",height="+height+",top="+top+",left="+left)},openTab:function(title,url,icon){opt.createMenuItem(url,title,icon)},parentTab:function(title,url){var dataId=window.frameElement.getAttribute("data-id");opt.createMenuItem(url,title);opt.closeItem(dataId)},closeTab:function(dataId){opt.closeItem(dataId)},disable:function(){var doc=window.top==window.parent?window.document:window.parent.document;try{$("a[class*=layui-layer-btn]",doc).addClass("layer-disabled");$('button[class="btn btn-sm btn-primary"]',doc).attr("disabled",true)}catch(e){}},enable:function(){var doc=window.top==window.parent?window.document:window.parent.document;try{$("a[class*=layui-layer-btn]",doc).removeClass("layer-disabled");$('button[class="btn btn-sm btn-primary"]',doc).attr("disabled",false)}catch(e){}},loading:function(message){if(opt.common.isEmpty(message)){$.blockUI()}else{$.blockUI({message:'<div class="loaderbox"><div class="loading-activity"></div> '+message+"</div>"})}},closeLoading:function(){setTimeout(function(){$.unblockUI()},50)},closeNowLoading:function(){if(top.location!=self.location){$(".content-wrapper",window.parent.document).unblock()}else{$.unblockUI()}},reload:function(){parent.location.reload()}},operate:{submit:function(url,type,dataType,data,callback,del){var config={url:url,type:type,dataType:dataType,data:data,beforeSend:function(){opt.modal.loading("正在处理中，请稍后...")},success:function(result){if(typeof callback=="function"){callback(result)}opt.operate.ajaxSuccess(result)}};opt.common.sendAjax(config)},delPost:function(url,data,callback){if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){opt.table.rememberSelecteds={};opt.table.rememberSelectedIds={}}opt.operate.submit(url,"post","json",data,callback)},post:function(url,data,callback){opt.operate.submit(url,"post","json",data,callback)},get:function(url,callback){opt.operate.submit(url,"get","json","",callback)},detail:function(id,title,width,height){opt.table.set();var _url=opt.operate.detailUrl(id);var _width=opt.common.isEmpty(width)?"800":width;var _height=opt.common.isEmpty(height)?($(window).height()-50):height;if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){_width="auto";_height="auto"}var options={title:opt.common.isEmpty(title)?$.i18n.text("{0}详细",opt.table.options.modalName):title,width:_width,height:_height,url:_url,btn:[$.i18n.text("关闭")],yes:function(index,layero){opt.layer.close(index)||opt.selfLayer.close(index)}};opt.modal.openOptions(options)},detailUrl:function(id){var url="/404.html";if(opt.common.isNotEmpty(id)){url=opt.table.options.detailUrl.replace("{id}",id)}else{var id=opt.common.isEmpty(opt.table.options.uniqueId)?$.table.selectFirstColumns():$.table.selectColumns(opt.table.options.uniqueId);if(id.length==0){opt.modal.alertWarning("请至少选择一条记录");return}url=opt.table.options.detailUrl.replace("{id}",id)}return url},del:function(id,tableId){if(opt.common.isNotEmpty(tableId)){opt.table.set(tableId)}else{opt.table.set()}if(opt.common.isEmpty(opt.table.options.delUrl)){opt.modal.msgError("delUrl 未传!");return}if(typeof bootTableCallback==="function"){var rows=$.table.selectAllColumnRows(tableId);
            rows=rows.length==0?[$.table.getRowByUniqueId(id)]:rows;if(!bootTableCallback(opt.table.options.id,"del",rows)){return}}opt.modal.confirm($.i18n.text("确定删除该条{0}信息吗?",opt.table.options.modalName),function(){if(opt.table.options.type==opt.variable.table_type.bootstrapTreeTable){var row=$("#"+opt.table.options.id).bootstrapTreeTable("getSelections")[0];var url;if(opt.common.isEmpty(row)){url=opt.table.options.delUrl}else{url=opt.table.options.delUrl.replace("{id}",row[opt.table.options.uniqueId])}opt.operate.get(url)}else{var url=opt.common.isEmpty(id)?opt.table.options.delUrl:opt.table.options.delUrl.replace("{id}",id);var data={"ids":id};opt.operate.submit(url,"POST","json",data,"",true)}})},exe:function(id){opt.table.set();opt.modal.confirm("确定处理该条"+opt.table.options.modalName+"信息吗？",function(){var url=opt.common.isEmpty(id)?opt.table.options.exeUrl:opt.table.options.exeUrl.replace("{id}",id);if(opt.table.options.type==opt.variable.table_type.bootstrapTreeTable){opt.operate.get(url)}else{var data={"ids":id};opt.operate.submit(url,"POST","json",data)}})},delAll:function(tableId,tip){if(opt.common.isEmpty(tableId)){opt.table.set()}else{opt.table.set(tableId)}if(opt.common.isEmpty(opt.table.options.delUrl)){opt.modal.msgError("delUrl 未传!");return}if(typeof bootTableCallback==="function"){var rows=$.table.selectAllColumnRows(tableId);if(!bootTableCallback(opt.table.options.id,"del",rows)){return}}var rows=opt.common.isEmpty(opt.table.options.uniqueId)?$.table.selectFirstColumns():$.table.selectColumns(opt.table.options.uniqueId);if(opt.common.isEmpty(rows)){opt.modal.error("请至少选择一条记录");return}opt.modal.confirm($.i18n.text("确认要{0}选中的{1}条数据吗?",'<span style="color:red;font-size: 18px;font-weight: 600">'+$.i18n.text("删除")+"</span>",'<span style="font-weight: 600;color: #000;font-size: 18px;">'+rows.length+"</span>")+(opt.common.isNotEmpty(tip)?tip:""),function(){var url=opt.table.options.delUrl;var data={"ids":rows.join()};opt.operate.submit(url,"POST","json",data,"",true)})},clean:function(){opt.table.set();opt.modal.confirm("确定清空所有"+opt.table.options.modalName+"吗？",function(){var url=opt.table.options.cleanUrl;opt.operate.submit(url,"post","json","")})},add:function(id){opt.table.set();opt.modal.open($.i18n.text("新增{0}",opt.table.options.modalName),opt.operate.addUrl(id))},exeDis:function(id,title){opt.table.set();opt.modal.open($.i18n.text("处理[{0}]",title),opt.operate.exeUrl(id))},addTab:function(id){opt.table.set();opt.modal.openTab($.i18n.text("新增{0}",opt.table.options.modalName),opt.operate.addUrl(id))},addFull:function(id){opt.table.set();var url=opt.common.isEmpty(id)?opt.table.options.addUrl:opt.table.options.addUrl.replace("{id}",id);opt.modal.openFull($.i18n.text("新增{0}",opt.table.options.modalName),url)},addUrl:function(id){opt.table.set();var url=opt.common.isEmpty(id)?opt.table.options.addUrl.replace("{id}",""):opt.table.options.addUrl.replace("{id}",id);return url},exeUrl:function(id){opt.table.set();var url=opt.common.isEmpty(id)?opt.table.options.exeUrl.replace("{id}",""):opt.table.options.exeUrl.replace("{id}",id);return url},edit:function(id,tableId){opt.table.set(tableId);if(opt.common.isEmpty(opt.table.options.editUrl)){opt.modal.msgError("editUrl 未传!");return}if(typeof bootTableCallback==="function"){var rows;if(opt.common.isEmpty(id)){rows=$.table.selectAllColumnRows(tableId);rows=rows.length==0?[$.table.getRowByUniqueId(id)]:rows}else{rows=[$.table.getRowByUniqueId(id)]}if(!bootTableCallback(opt.table.options.id,"edit",rows)){return}}if(opt.common.isEmpty(id)&&opt.table.options.type==opt.variable.table_type.bootstrapTreeTable){var row=$("#"+opt.table.options.id).bootstrapTreeTable("getSelections")[0];if(opt.common.isEmpty(row)){opt.modal.error("请至少选择一条记录");return}var url=opt.table.options.editUrl.replace("{id}",row[opt.table.options.uniqueId]);opt.modal.open($.i18n.text("修改{0}",opt.table.options.modalName),url)}else{opt.modal.open($.i18n.text("修改{0}",opt.table.options.modalName),opt.operate.editUrl(id))}},view:function(id,edit,fun){var _self=this;opt.table.set();if(opt.common.isEmpty(opt.table.options.viewUrl)){opt.modal.msgError("viewUrl 未传!");return}if(opt.common.isEmpty(id)){opt.modal.error("id必须传!");return}if(opt.common.isEmpty(edit)){edit=false}else{edit=true}var url=opt.table.options.viewUrl.replace("{id}",id);opt.modal.popupRight($.i18n.text("{0}信息详情",opt.table.options.modalName),url,edit,fun,id)},editTab:function(id,prefix,tableId){opt.table.set();if(opt.common.isEmpty(opt.table.options.editUrl)){opt.modal.msgError("editUrl 未传!");return}if(typeof bootTableCallback==="function"){var rows;if(opt.common.isEmpty(id)){rows=$.table.selectAllColumnRows(tableId);rows=rows.length==0?[$.table.getRowByUniqueId(id)]:rows}else{rows=[$.table.getRowByUniqueId(id)]}if(!bootTableCallback(opt.table.options.id,"editTab",rows)){return}}if(opt.common.isEmpty(id)&&opt.table.options.type==opt.variable.table_type.bootstrapTreeTable){var row=$("#"+opt.table.options.id).bootstrapTreeTable("getSelections")[0];if(opt.common.isEmpty(row)){opt.modal.error("请至少选择一条记录");
            return}var url=opt.table.options.editUrl.replace("{id}",row[opt.table.options.uniqueId]);opt.modal.openTab((opt.common.isEmpty(prefix)?$.i18n.text("修改{0}",opt.table.options.modalName):(prefix+opt.table.options.modalName)),opt.operate.editUrl(id))}else{opt.modal.openTab((opt.common.isEmpty(prefix)?$.i18n.text("修改{0}",opt.table.options.modalName):(prefix+opt.table.options.modalName)),opt.operate.editUrl(id))}},editFull:function(id){opt.table.set();var url="/404.html";if(opt.common.isNotEmpty(id)){url=opt.table.options.editUrl.replace("{id}",id)}else{var row=opt.common.isEmpty(opt.table.options.uniqueId)?$.table.selectFirstColumns():$.table.selectColumns(opt.table.options.uniqueId);url=opt.table.options.editUrl.replace("{id}",row)}opt.modal.openFull($.i18n.text("修改{0}",opt.table.options.modalName),url)},editUrl:function(id){opt.table.set();var url="/404.html";if(opt.common.isNotEmpty(id)){url=opt.table.options.editUrl.replace("{id}",id)}else{var id=opt.common.isEmpty(opt.table.options.uniqueId)?$.table.selectFirstColumns():$.table.selectColumns(opt.table.options.uniqueId);if(id.length==0){opt.modal.error("请至少选择一条记录");return}url=opt.table.options.editUrl.replace("{id}",id)}return url},save:function(url,data,callback){var config={url:url,type:"post",dataType:"json",data:data,beforeSend:function(){opt.modal.disable();opt.modal.loading($.i18n.prop("数据加载中，请稍后..."))},success:function(result){if(typeof callback=="function"){opt.modal.closeLoading();callback(result)}else{opt.operate.successCallback(result)}}};opt.common.sendAjax(config)},saveModal:function(url,data,callback){var config={url:url,type:"post",dataType:"json",data:data,beforeSend:function(){opt.modal.loading($.i18n.prop("数据加载中，请稍后..."))},success:function(result){opt.modal.closeLoading();if(typeof callback=="function"){callback(result);return}if(result.code==opt.variable.web_status.SUCCESS){opt.modal.success($.i18n.prop("操作成功!"))}else{if(result.code==opt.variable.web_status.WARNING){opt.modal.warning(result.msg)}else{opt.modal.error(result.msg)}}}};opt.common.sendAjax(config)},saveTab:function(url,data,callback){var config={url:url,type:"POST",dataType:"JSON",data:data,beforeSend:function(){opt.modal.loading($.i18n.prop("数据加载中，请稍后..."))},success:function(result){if(typeof callback=="function"){opt.modal.closeLoading();callback(result)}else{opt.operate.successTabCallback(result)}}};opt.common.sendAjax(config)},ajaxSuccess:function(result){if(result.code==opt.variable.web_status.SUCCESS&&opt.table.options.type==opt.variable.table_type.bootstrapTable){opt.success($.i18n.prop("操作成功!"));if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){opt.table.rememberSelecteds={};opt.table.rememberSelectedIds={}}$.table.refresh()}else{if(result.code==opt.variable.web_status.SUCCESS&&opt.table.options.type==opt.variable.table_type.bootstrapTreeTable){opt.success($.i18n.prop("操作成功!"));$.treeTable.refresh()}else{if(result.code==opt.variable.web_status.SUCCESS){opt.success($.i18n.prop("操作成功!"))}else{if(result.code==opt.variable.web_status.WARNING){opt.modal.warning(result.msg)}else{opt.modal.error(result.msg)}}}}opt.modal.closeLoading()},saveSuccess:function(result){if(result.code==opt.variable.web_status.SUCCESS){opt.modal.msgReload("保存成功,正在刷新数据请稍后……",opt.variable.modal_status.SUCCESS)}else{if(result.code==opt.variable.web_status.WARNING){opt.modal.alertWarning(result.msg)}else{opt.modal.alertError(result.msg)}}opt.modal.closeLoading()},successCallback:function(result){opt.modal.closeLoading();if(result.code==opt.variable.web_status.SUCCESS){var parent=window.parent;if(parent.opt.table.options.type==opt.variable.table_type.bootstrapTable){if(parent.opt.common.isNotEmpty(parent.opt.table.options.rememberSelected)&&parent.opt.table.options.rememberSelected){parent.opt.table.rememberSelecteds={};parent.opt.table.rememberSelectedIds={}}parent.$.table.refresh();parent.opt.success("操作成功",parent.opt.modal.closeAll())}else{if(parent.opt.table.options.type==opt.variable.table_type.bootstrapTreeTable){parent.$.treeTable.refresh();parent.opt.success("操作成功",parent.opt.modal.closeAll())}else{if(window.opt.table.options.type==opt.variable.table_type.bootstrapTable){window.$.table.refresh();window.opt.success("操作成功",parent.opt.modal.closeAll())}else{opt.modal.msgReload("保存成功,正在刷新数据请稍后……",opt.variable.modal_status.SUCCESS)}}}}else{if(result.code==opt.variable.web_status.WARNING){opt.modal.warning(result.msg)}else{opt.modal.error(result.msg)}}opt.modal.enable()},successTabCallback:function(result){opt.modal.closeLoading();if(top.location!=self.location){if(result.code==opt.variable.web_status.SUCCESS){var topWindow=$(window.parent.document);var currentId=$(".layui-tab-title",topWindow).find(".layui-this").children("em").attr("panel-id");if(opt.common.isNotEmpty(currentId)){var $contentWindow=$('iframe[data-id="'+currentId+'"]',topWindow)[0].contentWindow;$contentWindow.opt.success($.i18n.prop("操作成功!"));if($contentWindow.opt.table.options.type==opt.variable.table_type.bootstrapTable){if($contentWindow.opt.common.isNotEmpty($contentWindow.opt.table.options.rememberSelected)&&$contentWindow.opt.table.options.rememberSelected){$contentWindow.opt.table.rememberSelecteds={};
            $contentWindow.opt.table.rememberSelectedIds={}}$contentWindow.$.table.refresh()}else{if($contentWindow.opt.table.options.type==opt.variable.table_type.bootstrapTreeTable){$contentWindow.$.treeTable.refresh()}}}else{parent.opt.success($.i18n.prop("操作成功!"))}opt.modal.closeTab()}else{if(result.code==opt.variable.web_status.WARNING){opt.modal.warning(result.msg)}else{opt.modal.error(result.msg)}}}else{opt.modal.closeTab()}},successTab:function(){if(top.location!=self.location){var topWindow=$(window.parent.document);var currentId=$(".layui-tab-title",topWindow).find(".layui-this").children("em").attr("panel-id");if(opt.common.isNotEmpty(currentId)){var $contentWindow=$('iframe[data-id="'+currentId+'"]',topWindow)[0].contentWindow;$contentWindow.opt.modal.msg($.i18n.prop("操作成功!"));if($contentWindow.opt.table.options.type==opt.variable.table_type.bootstrapTable){if($contentWindow.opt.common.isNotEmpty($contentWindow.opt.table.options.rememberSelected)&&$contentWindow.opt.table.options.rememberSelected){$contentWindow.opt.table.rememberSelecteds={};$contentWindow.opt.table.rememberSelectedIds={}}$contentWindow.$.table.refresh()}else{if($contentWindow.opt.table.options.type==opt.variable.table_type.bootstrapTreeTable){$contentWindow.$.treeTable.refresh()}}}opt.modal.closeTab()}else{opt.modal.closeTab()}}},validate:{unique:function(o){var obj=$.parseJSON(o);if(obj.code===opt.variable.web_status.SUCCESS){return true}return"<i class='fa fa-times-circle'></i>  "+obj.msg},form:function(formId){var currentId;if(opt.common.isEmpty(formId)){if(opt.common.isEmpty(opt.table.options.formId)){currentId=$("form").attr("id")}else{currentId=opt.table.options.formId}}else{currentId=formId}return $("#"+currentId).validate().form()},reset:function(formId){var currentId;if(opt.common.isEmpty(formId)){if(opt.common.isEmpty(opt.table.options.formId)){currentId=$("form").attr("id")}else{currentId=opt.table.options.formId}}else{currentId=formId}return $("#"+currentId).validate().resetForm()},fromData:function(formId){var currentId;if(opt.common.isEmpty(formId)){if(opt.common.isEmpty(opt.table.options.formId)){currentId=$("form").attr("id")}else{currentId=opt.table.options.formId}}else{currentId=formId}return $("#"+currentId).serialize()}},form:{reset:function(tableId,formId,notName){var notNames=opt.common.isEmpty(notName)?[]:notName.split(",");opt.table.set(tableId);var currentId;if(opt.common.isEmpty(formId)){if(opt.common.isEmpty(opt.table.options.formId)){currentId=$("form").attr("id")}else{currentId=opt.table.options.formId}}else{currentId=formId}var inpt=$("#"+currentId).find("input, select");$.each(inpt,function(){if(this.tagName=="SELECT"){if(opt.common.isEmpty(notName)){if(opt.table.options.__fromData__&&opt.table.options.__fromData__[this.name]!=undefined){$(this).val(opt.table.options.__fromData__[this.name]).trigger("change")}else{$(this).val(null).trigger("change")}}else{var temp=false;for(var i=0;i<notNames.length;i++){if($(this).attr("name")==notNames[i]){temp=true}}if(!temp){$(this).val(null).trigger("change")}}}else{if(this.tagName=="INPUT"){if(!(this.type=="hidden"&&opt.common.isNotEmpty($(this).data("refresh"))&&!$(this).data("refresh"))){if(opt.table.options.__fromData__&&opt.table.options.__fromData__[this.name]!=undefined){this.value=opt.table.options.__fromData__[this.name]}else{this.value=""}}}}});$("#"+currentId+" select").each(function(i){if(!opt.common.isEmpty($(this).attr("data-select2-id"))){if(opt.common.isEmpty(notName)){if(opt.table.options.__fromData__&&opt.table.options.__fromData__[this.name]!=undefined){$(this).val(opt.table.options.__fromData__[this.name]).trigger("change")}else{$(this).val(null).trigger("change")}}else{var temp=false;for(var i=0;i<notNames.length;i++){if($(this).attr("name")==notNames[i]){temp=true}}if(!temp){$(this).val(null).trigger("change")}}}});if(opt.table.options.type==opt.variable.table_type.bootstrapTable){if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){opt.table.rememberSelecteds={};opt.table.rememberSelectedIds={}}if(opt.common.isEmpty(tableId)){$("#"+opt.table.options.id).bootstrapTable("refresh")}else{$("#"+tableId).bootstrapTable("refresh")}}else{if(opt.table.options.type==opt.variable.table_type.bootstrapTreeTable){if(opt.common.isEmpty(tableId)){$("#"+opt.table.options.id).bootstrapTreeTable("refresh",{"__refre":true})}else{$("#"+tableId).bootstrapTreeTable("refresh",{"__refre":true})}}}},submit:function(){if(typeof submitHandler=="function"){opt.modal.disable();submitHandler();opt.modal.enable()}else{opt.modal.error($.i18n.prop("页面必须存在[submitHandler]方法"))}},selectCheckeds:function(name){var checkeds="";$('input:checkbox[name="'+name+'"]:checked').each(function(i){if(0==i){checkeds=$(this).val()}else{checkeds+=(","+$(this).val())}});return checkeds},selectSelects:function(name){var selects="";$("#"+name+" option:selected").each(function(i){if(0==i){selects=$(this).val()}else{selects+=(","+$(this).val())}});return selects.split(",")
        },getInputValue:function(name){return $('input[name="'+name+'"]').val()},dataUp:function(options){var defaults={id:"form-user-saveUpdate",del:[],conversion:[]};var options=$.extend(defaults,options);var data=$("#"+options.id).serializeArray();for(var i=0;i<data.length;i++){if(opt.common.isEmpty(options.del)){break}for(var k=0;k<options.del.length;k++){if(data[i].name==options.del[k]){data.splice(i,1);if(i==0){i=0}else{i--}}}}for(var i=0;i<data.length;i++){if(opt.common.isEmpty(options.conversion)){break}for(var k=0;k<options.conversion.length;k++){if(data[i].name==options.conversion[k].name){if(options.conversion[k].value=="arr"){data[i].value=data[i].value.split(",")}if(options.conversion[k].value=="num"){data[i].value=Number(data[i].value)}}}}return data}},};opt.common.each(["String","Function","Array","Number","RegExp","Object","Date"],function(v){opt.common["is"+v]=function(obj){return Object.prototype.toString.apply(obj)=="[object "+v+"]"}});$(function(){if(!(self.frameElement&&self.frameElement.tagName=="IFRAME")&&opt.variable.isWatermark){opt.common.watermark({"watermark_txt":"J2eeFAST 开源版本 v"+window.__VERSION__})}$('[data-toggle="tooltip"]').each(function(){$(this).tooltip()});setTimeout(function(){$('[data-index="_new"]').each(function(){$(this).addClass("jump5")})},2000);if($.fn.select2!==undefined){$.fn.select2.defaults.set("theme","bootstrap");$("select.form-control:not(.noselect2)").each(function(){if(typeof($(this).attr("multiple"))=="undefined"){$(this).select2({allowClear:false,placeholder:$.i18n.text("请点击选择")})}else{$(this).select2({allowClear:true,placeholder:""})}})}if($.fn.iCheck!==undefined){$(".check-box:not(.noicheck),.radio-box:not(.noicheck)").each(function(){$(this).iCheck({checkboxClass:(typeof($(this).data("style"))=="undefined")?"icheckbox-blue":("icheckbox_"+($(this).data("style")||"square-blue")),radioClass:(typeof($(this).data("style"))=="undefined")?"iradio-blue":("iradio_"+($(this).data("style")||"square-blue"))})})}$('[data-toggle="popover"]').each(function(){$(this).popover()});if($(".select-time").length>0){var startDate=laydate.render({elem:"#startTime",max:$("#endTime").val(),theme:"default",type:$("#startTime").attr("data-type")||"date",trigger:"click",done:function(value,date){if(value!==""){endDate.config.min.year=date.year;endDate.config.min.month=date.month-1;endDate.config.min.date=date.date}else{endDate.config.min.year="";endDate.config.min.month="";endDate.config.min.date=""}$("#endTime").trigger("click")}});var endDate=laydate.render({elem:"#endTime",min:$("#startTime").val(),theme:"default",type:$("#endTime").attr("data-type")||"date",trigger:"click",done:function(value,date){if(value!==""){startDate.config.max.year=date.year;startDate.config.max.month=date.month-1;startDate.config.max.date=date.date}else{startDate.config.max.year="2099";startDate.config.max.month="12";startDate.config.max.date="31"}}})}if($(".time-input").length>0){$(".time-input").each(function(index,item){var time=$(item);var type=time.attr("data-type")||"date";var format=time.attr("data-format")||"yyyy-MM-dd";var buttons=time.attr("data-btn")||"clear|now|confirm",newBtnArr=[];var callback=time.attr("data-callback")||{};if(buttons){if(buttons.indexOf("|")>0){var btnArr=buttons.split("|"),btnLen=btnArr.length;for(var j=0;j<btnLen;j++){if("clear"===btnArr[j]||"now"===btnArr[j]||"confirm"===btnArr[j]){newBtnArr.push(btnArr[j])}}}else{if("clear"===buttons||"now"===buttons||"confirm"===buttons){newBtnArr.push(buttons)}}}else{newBtnArr=["clear","now","confirm"]}laydate.render({elem:item,trigger:"click",type:type,format:format,btns:newBtnArr,done:function(value,data){time.val(value);if(typeof window[callback]!="undefined"&&window[callback] instanceof Function){window[callback](value,data)}else{try{if(opt.common.isString(callback)){console.log(callback);eval(callback)||new Function(callback)}}catch(e){console.error(e)}}}})})}var expandFlag;$("#expandAllBtn").click(function(){var dataExpand=opt.common.isEmpty(opt.table.options.expandAll)?true:opt.table.options.expandAll;expandFlag=opt.common.isEmpty(expandFlag)?dataExpand:expandFlag;if(!expandFlag){$.bttTable.bootstrapTreeTable("expandAll")}else{$.bttTable.bootstrapTreeTable("collapseAll")}expandFlag=expandFlag?false:true});if($("#keyword").length>0){$("#keyword").bind("focus",function focusKey(e){if($("#keyword").hasClass("empty")){$("#keyword").removeClass("empty")}}).bind("blur",function blurKey(e){if($("#keyword").val()===""){$("#keyword").addClass("empty")}$.tree.searchNode(e)}).bind("input propertychange",$.tree.searchNode)}$("body",document).on("keyup",this,function(e){if(e.which===27){opt.modal.closeAll()}});if($.fn.toTop!==undefined){if($.fn.layout!==undefined&&$(".ui-layout-center")){var _opt={win:$(".ui-layout-center"),doc:$(".ui-layout-center")};$("#scroll-up").toTop(_opt)}else{$("#scroll-up").toTop()}}$('a[data-toggle="formMore"]').each(function(){$(this).off("click").on("click",function(){var html=[];var formMore=$(this).parents("form").find(".select-list-more");
    var show=formMore.css("display");if(show=="block"){formMore.toggle("normal");html.push('<i class="fa fa-angle-double-down"></i>&nbsp;',$.i18n.prop("更多"))}else{formMore.fadeIn(500).css("display","block");html.push('<i class="fa fa-angle-double-up"></i>&nbsp;',$.i18n.prop("隐藏"))}$(this).empty().append(html.join(""))})})});window.opt=opt})(window.jQuery,window);(function(a){a.fn.toTop=function(c){var d=this;var f=(c&&c.hasOwnProperty("win"))?c.win:a(window);var e=(c&&c.hasOwnProperty("doc"))?c.doc:a("html, body");var b=a.extend({autohide:true,offset:50,speed:500,position:true,right:15,bottom:5},c);d.css({"cursor":"pointer"});if(b.autohide){d.css("display","none")}if(b.position){d.css({"position":"fixed","right":b.right,"bottom":b.bottom,})}d.click(function(){e.animate({scrollTop:0},b.speed)});f.scroll(function(){var g=f.scrollTop();if(b.autohide){if(g>b.offset){d.fadeIn(b.speed)}else{d.fadeOut(b.speed)}}})}}(jQuery));+function(){var d=opt.getCookie("_lang");$.i18n.properties({path:baseURL+"i18n/",name:"i18n",language:d,tag:__I18NTAG__,cache:true,mode:"map"});var e=opt.storage.get("dict",0);if(e==undefined||e!=__DICTTAG__){for(var c=0;c<window.localStorage.length;c++){var b=window.localStorage.key(c);if(opt.common.startWith(b,"_dict_")){window.localStorage.removeItem(b)}}window.localStorage.setItem("dict",__DICTTAG__)}var a=opt.storage.get("skin");if(a&&($.inArray(a,opt.variable.skins)>=0)){opt.changeSkin(a)}if(window.layer!==undefined){layer.config({extend:"moon/style.css",skin:"layer-ext-moon"})}}();!function(){var b={open:"{{",close:"}}"};var a={exp:function(f){return new RegExp(f,"g")},query:function(h,f,j){var g=["#([\\s\\S])+?","([^{#}])*?"][h||0];return d((f||"")+b.open+g+b.close+(j||""))},escape:function(f){return String(f||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},error:function(h,f){var g="Laytpl Error：";typeof console==="object"&&console.error(g+h+"\n"+(f||""));return g+h}};var d=a.exp,e=function(f){this.tpl=f};e.pt=e.prototype;window.errors=0;e.pt.parse=function(g,j){var h=this,f=g;var l=d("^"+b.open+"#",""),m=d(b.close+"$","");g=g.replace(/\s+|\r|\t|\n/g," ").replace(d(b.open+"#"),b.open+"# ").replace(d(b.close+"}"),"} "+b.close).replace(/\\/g,"\\\\").replace(d(b.open+"!(.+?)!"+b.close),function(n){n=n.replace(d("^"+b.open+"!"),"").replace(d("!"+b.close),"").replace(d(b.open+"|"+b.close),function(o){return o.replace(/(.)/g,"\\$1")});return n}).replace(/(?="|')/g,"\\").replace(a.query(),function(n){n=n.replace(l,"").replace(m,"");return'";'+n.replace(/\\/g,"")+';view+="'}).replace(a.query(1),function(n){var o='"+(';if(n.replace(/\s/g,"")===b.open+b.close){return""}n=n.replace(d(b.open+"|"+b.close),"");if(/^=/.test(n)){n=n.replace(/^=/,"");o='"+_escape_('}return o+n.replace(/\\/g,"")+')+"'});g='"use strict";var view = "'+g+'";return view;';try{h.cache=g=new Function("d, _escape_",g);return g(j,a.escape)}catch(k){delete h.cache;return a.error(k,f)}};e.pt.render=function(h,j){var g=this,f;if(!h){return a.error("no data")}f=g.cache?g.cache(h,a.escape):g.parse(g.tpl,h);if(!j){return f}j(f)};var c=function(f){if(typeof f!=="string"){return a.error("Template not found")}return new e(f)};c.config=function(f){f=f||{};for(var g in f){b[g]=f[g]}};c.v="1.2.0";"function"==typeof define?define(function(){return c}):"undefined"!=typeof exports?module.exports=c:window.laytpl=c}();+function(d){var b="lte.boxwidget";var f={animationSpeed:500,collapseTrigger:'[data-widget="collapse"]',removeTrigger:'[data-widget="remove"]',collapseIcon:"fa-minus",expandIcon:"fa-plus",removeIcon:"fa-times"};var a={data:".box",collapsed:".collapsed-box",header:".box-header",body:".box-body",footer:".box-footer",tools:".box-tools"};var h={collapsed:"collapsed-box"};var j={collapsing:"collapsing.boxwidget",collapsed:"collapsed.boxwidget",expanding:"expanding.boxwidget",expanded:"expanded.boxwidget",removing:"removing.boxwidget",removed:"removed.boxwidget"};var e=function(l,k){this.element=l;this.options=k;this._setUpListeners()};e.prototype.toggle=function(){var k=!d(this.element).is(a.collapsed);if(k){this.collapse()}else{this.expand()}};e.prototype.expand=function(){var m=d.Event(j.expanded);var n=d.Event(j.expanding);var l=this.options.collapseIcon;var k=this.options.expandIcon;d(this.element).removeClass(h.collapsed);d(this.element).children(a.header+", "+a.body+", "+a.footer).children(a.tools).find("."+k).removeClass(k).addClass(l);d(this.element).children(a.body+", "+a.footer).slideDown(this.options.animationSpeed,function(){d(this.element).trigger(m)}.bind(this)).trigger(n)};e.prototype.collapse=function(){var l=d.Event(j.collapsed);var n=d.Event(j.collapsing);var m=this.options.collapseIcon;var k=this.options.expandIcon;d(this.element).children(a.header+", "+a.body+", "+a.footer).children(a.tools).find("."+m).removeClass(m).addClass(k);d(this.element).children(a.body+", "+a.footer).slideUp(this.options.animationSpeed,function(){d(this.element).addClass(h.collapsed);
    d(this.element).trigger(l)}.bind(this)).trigger(n)};e.prototype.remove=function(){var k=d.Event(j.removed);var l=d.Event(j.removing);d(this.element).slideUp(this.options.animationSpeed,function(){d(this.element).trigger(k);d(this.element).remove()}.bind(this)).trigger(l)};e.prototype._setUpListeners=function(){var k=this;d(this.element).on("click",this.options.collapseTrigger,function(l){if(l){l.preventDefault()}k.toggle(d(this));return false});d(this.element).on("click",this.options.removeTrigger,function(l){if(l){l.preventDefault()}k.remove(d(this));return false})};function g(k){return this.each(function(){var n=d(this);var m=n.data(b);if(!m){var l=d.extend({},f,n.data(),typeof k=="object"&&k);n.data(b,(m=new e(n,l)))}if(typeof k=="string"){if(typeof m[k]=="undefined"){throw new Error("No method named "+k)}m[k]()}})}var c=d.fn.boxWidget;d.fn.boxWidget=g;d.fn.boxWidget.Constructor=e;d.fn.boxWidget.noConflict=function(){d.fn.boxWidget=c;return this};d(window).on("load",function(){d(a.data).each(function(){g.call(d(this))})})}(jQuery);(function(a,b){b.fn.serializeJson=function(){var c={};var d=this.serializeArray();b(d).each(function(){if(c[this.name]){if(b.isArray(c[this.name])){c[this.name].push(this.value)}else{c[this.name]=[c[this.name],this.value]}}else{c[this.name]=this.value}});return c}})(window,jQuery);$(function(){(function(b){var a=b.ajax;b.ajax=function(c){var e={beforeSend:function(f){},error:function(f,h,g){},success:function(f,g){},complete:function(f,g){}};if(c.beforeSend){e.beforeSend=c.beforeSend}if(c.error){e.error=c.error}if(c.success){e.success=c.success}if(c.complete){e.complete=c.complete}var d=b.extend(c,{xhrFields:{withCredentials:true},error:function(f,h,g){e.error(f,h,g)},success:function(f,g){e.success(f,g)},beforeSend:function(f){e.beforeSend(f)},complete:function(f,g){e.complete(f,g)}});if(c.xhrFields){d.xhrFields=c.xhrFields}return a(d)}})(jQuery)});var dateRangeUtil=(function(){this.getCurrentDate=function(){return new Date()};this.getToDay=function(){var a=new Array();var b=opt.common.formatDat(Date.parse(new Date()));a.push(b);a.push(b);return a};this.getCurrentWeek=function(){var c=new Array();var b=this.getCurrentDate();var d=b.getDay();var h=b.getDate();var e=1000*60*60*24;var g=d!=0?d-1:6;var a=new Date(b.getTime()-(g*e));var f=new Date(a.getTime()+(6*e));c.push(a);c.push(f);return c};this.getCurrentMonth=function(){var b=new Array();var a=this.getCurrentDate();var f=a.getMonth();var d=a.getFullYear();var c=new Date(d,f,1);if(f==11){d++;f=0}else{f++}var e=1000*60*60*24;var g=new Date(d,f,1);var h=new Date(g.getTime()-e);b.push(c);b.push(h);return b};this.getQuarterSeasonStartMonth=function(f){var c=0;var b=0;var a=3;var e=6;var d=9;if(f<3){return b}if(f<6){return a}if(f<9){return e}return d};this.getMonthDays=function(b,f){var e=new Date(b,f,1);var a=e.getMonth();var g=e.getFullYear();if(a==11){g++;a=0}else{a++}var c=1000*60*60*24;var d=new Date(g,a,1);return new Date(d.getTime()-c).getDate()};this.getCurrentSeason=function(){var b=new Array();var a=this.getCurrentDate();var g=a.getMonth();var d=a.getFullYear();var h=this.getQuarterSeasonStartMonth(g);var c=h+2;var f=new Date(d,h,1);var e=new Date(d,c,this.getMonthDays(d,c));b.push(f);b.push(e);return b};this.getCurrentYear=function(){var b=new Array();var a=this.getCurrentDate();var c=a.getFullYear();var e=new Date(c,0,1);var d=new Date(c,11,31);b.push(e);b.push(d);return b};this.getPriorMonthFirstDay=function(a,b){if(b==0){b=11;a--;return new Date(a,b,1)}b--;return new Date(a,b,1)};this.getPreviousMonth=function(){var c=new Array();var b=this.getCurrentDate();var f=b.getMonth();var e=b.getFullYear();var a=this.getPriorMonthFirstDay(e,f);var d=new Date(a.getFullYear(),a.getMonth(),this.getMonthDays(a.getFullYear(),a.getMonth()));c.push(a);c.push(d);return c};this.getPreviousWeek=function(){var f=new Array();var b=this.getCurrentDate();var a=b.getDay();var e=b.getDate();var j=1000*60*60*24;var h=a!=0?a-1:6;var c=new Date(b.getTime()-(j*h));var g=new Date(c.getTime()-j);var d=new Date(g.getTime()-(j*6));f.push(d);f.push(g);return f};this.getPriorSeasonFirstDay=function(e,g){var c=0;var b=0;var a=3;var f=6;var d=9;switch(g){case b:e--;g=d;break;case a:g=b;break;case f:g=a;break;case d:g=f;break}return new Date(e,g,1)};this.getPreviousSeason=function(){var b=new Array();var a=this.getCurrentDate();var e=a.getMonth();var d=a.getFullYear();var f=this.getPriorSeasonFirstDay(d,e);var c=new Date(f.getFullYear(),f.getMonth()+2,this.getMonthDays(f.getFullYear(),f.getMonth()+2));b.push(f);b.push(c);return b};this.getPreviousYear=function(){var d=new Array();var c=this.getCurrentDate();var e=c.getFullYear();e--;var a=new Date(e,0,1);var b=new Date(e,11,1);d.push(a);d.push(b);return d};this.getBetweenAllDay=function(n,c){var h=[];var a=[];var q=new Date(n);var p=new Date(c);var r=q.getTime()-24*60*60*1000;var l=p.getTime()-24*60*60*1000;for(var g=r;g<=l;){g=g+24*60*60*1000;h.push(parseInt(g))}for(var f in h){var e=new Date(h[f]);var m=e.getFullYear(e);
    var b=(e.getMonth()+1)>=10?(e.getMonth()+1):("0"+(e.getMonth()+1));var o=e.getDate()>=10?e.getDate():("0"+e.getDate());var k=m+"-"+b+"-"+o;a.push(k)}return a};return this})();