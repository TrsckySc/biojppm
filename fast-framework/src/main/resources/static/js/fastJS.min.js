/*!
 * Copyright (c) 2020-Now http://www.j2eefast.com All rights reserved.
 * No deletion without permission
 * @author ZhouHuan
 * @date 2020-12-04
 */
;if(typeof jQuery==="undefined"){throw new Error("fastJS JavaScript requires jQuery")}(function(c,b,d){var a={variable:{navtab:null,_tabIndex:-999,tindex:0,pushMenu:null,version:"1.0.14",debug:true,mode:"storage",loadTip:true,table_type:{bootstrapTable:0,bootstrapTreeTable:1},modal_status:{SUCCESS:"success",FAIL:"error",WARNING:"warning"},web_status:{SUCCESS:"00000",FAIL:500,WARNING:"50001"},skins:["skin-blue","skin-black","skin-red","skin-yellow","skin-purple","skin-green","skin-blue-light","skin-black-light","skin-red-light","skin-yellow-light","skin-purple-light","skin-green-light"]},domReady:function(){var e=[];function f(h){h.isReady=true;for(var g;g=e.pop();g()){}}return function(h,l){l=l||b;var k=l.document;h&&e.push(h);if(k.readyState==="complete"){f(k)}else{k.isReady&&f(k);var j=navigator.userAgent.toLowerCase();var n=/(msie\s|trident.*rv:)([\w.]+)/.test(j);var g;var o=j.match(/(?:msie\s([\w.]+))/);var m=j.match(/(?:trident.*rv:([\w.]+))/);if(o&&m&&o[1]&&m[1]){g=Math.max(o[1]*1,m[1]*1)}else{if(o&&o[1]){g=o[1]*1}else{if(m&&m[1]){g=m[1]*1}else{g=0}}}if(n&&g!=11){(function(){if(k.isReady){return}try{k.documentElement.doScroll("left")}catch(p){setTimeout(arguments.callee,0);return}f(k)})();l.attachEvent("onload",function(){f(k)})}else{k.addEventListener("DOMContentLoaded",function(){k.removeEventListener("DOMContentLoaded",arguments.callee,false);f(k)},false);l.addEventListener("load",function(){f(k)},false)}}}}(),sidebarCollapse:function(){a.variable.pushMenu.expandOnHover();if(!c("body").hasClass("sidebar-collapse")){c('[data-layout="sidebar-collapse"]').click()}c('[data-toggle="push-menu"]').click()},pushMenuInit:function(){c(".main-sidebar").unbind("mouseenter").unbind("mouseleave")},wclearInterval:function(){b.clearInterval(a.variable.tindex)},getMessage:function(){c.getJSON("sys/user/info?_"+c.now(),function(e){})},toast:function(){if(c.toast){return c.toast}try{if(parent.$.toast){return parent.$.toast}if(parent.parent.$.toast){return parent.parent.$.toast}if(top.$.toast){return top.$.toast}}catch(f){}return null}(),error:function(e,f){a.modal.enable();if(a.toast){a.toast({heading:c.i18n.prop("\u8B66\u544A"),text:e,hideAfter:4000,position:{right:7,bottom:32},showHideTransition:"slide",afterHidden:function(){if(typeof(f)==="function"){f("ok")}},icon:"error"})}else{a.modal.alertError(e)}},info:function(e,f){if(a.toast){a.toast({heading:c.i18n.prop("\u63D0\u793A"),text:e,hideAfter:4000,position:{right:7,bottom:32},showHideTransition:"slide",afterHidden:function(){if(typeof(f)==="function"){f("ok")}},icon:"info"})}else{a.modal.alertInfo(e);if(typeof(f)==="function"){f("ok")}}},success:function(e,f){if(a.toast){a.toast({heading:c.i18n.prop("\u6210\u529F"),text:e,hideAfter:4000,position:{right:7,bottom:32},showHideTransition:"slide",afterHidden:function(){if(typeof(f)==="function"){f("ok")}},icon:"success"})}else{layui.use("layer",function(){var g=layui.layer;g.msg(e)});if(typeof(f)==="function"){f("ok")}}},warning:function(e,f){if(a.toast){a.toast({heading:c.i18n.prop("\u8B66\u544A"),text:e,hideAfter:4000,position:{right:7,bottom:32},showHideTransition:"slide",afterHidden:function(){if(typeof(f)==="function"){f("ok")}},icon:"warning"})}else{a.modal.alertWarning(e)}},changeSkin:function(e){c.each(a.variable.skins,function(f){c("body").removeClass(a.variable.skins[f])});c("body").addClass(e);a.storage.set("skin",e);return false},getLeftMeunDataConfig:function(h,g){var f=c("#leftMenu li a[data-url='"+g+"'][data-module='"+h+"']").attr("data-id")||-1;var e=c("#leftMenu li a[data-url='"+g+"'][data-module='"+h+"'] i").attr("data-icon")||"";var k=c("#leftMenu li a[data-url='"+g+"'][data-module='"+h+"'] span").html()||"";var j={href:g,icon:e,title:c.i18n.prop(k),id:f,module:h};return j},getLeftFirstMenuConig:function(){var g=c("#leftMenu li a[data-url]:first-child").attr("data-url")||"main";var f=c("#leftMenu li a[data-url]:first-child").attr("data-id")||-1;var h=c("#leftMenu li a[data-url]:first-child").attr("data-module")||"core";var e=c("#leftMenu li a[data-url]:first-child i").attr("data-icon")||"";var k=c("#leftMenu li a[data-url]:first-child span").html();var j={href:g,icon:e,title:c.i18n.prop(k),id:f,module:h};return j},createMenuItem:function(l,f){if(top.location!==self.location){var j=a.common.randomString(16);var h,g;if(l==d||c.trim(l).length==0){return false}if(a.common.isEmpty(parent.opt.variable.navtab)){parent.opt.createMenuItem(l,f);return}var e=c(b.parent.document);if(c(".layui-tab-title li",e).length>0){c(".layui-tab-title li",e).each(function(){if(c(this).hasClass("layui-this")){h=c(this).attr("lay-id");g=c(this).children("em").data("module")}})}var k={href:l,icon:"fa fa-plus-square",panel:h,title:f,module:g,id:j};parent.opt.navTabAdd(k);return}else{a.selfLayer.open({type:2,maxmin:true,shadeClose:true,title:f,area:[(c(b).width()-100)+"px",(c(b).height()-100)+"px"],content:l})}},closeItem:function(g){if(top.location!=self.location){var f=c(b.parent.document);if(c(".layui-tab-title li",f).length>0){if(a.common.isNotEmpty(g)){c('.layui-tab-title li[lay-id="'+g+'"]',f).children('i.layui-tab-close[data-id="'+data.id+'"]').trigger("click")}else{c(".layui-tab-title li",f).each(function(){if(c(this).hasClass("layui-this")){c(this).children('i.layui-tab-close[data-id="'+c(this).attr("lay-id")+'"]').trigger("click")}})}}else{try{if(parent.opt.table.options.type==a.variable.table_type.bootstrapTable){parent.$.table.refresh()}else{if(parent.opt.table.options.type==a.variable.table_type.bootstrapTreeTable){parent.$.treeTable.refresh()}}}catch(h){}parent.opt.selfLayer.closeAll()}}else{b.opener=null;b.open("","_self");b.close()}},block:function(f,e){if(a.common.isEmpty(f)){if(a.common.isNotEmpty(e)){c(e).block()}else{c.blockUI()}}else{if(a.common.isNotEmpty(e)){c(e).block({message:'<div class="loaderbox"><div class="loading-activity"></div> '+c.i18n.prop(f)+"</div>"})}else{c.blockUI({message:'<div class="loaderbox"><div class="loading-activity"></div> '+c.i18n.prop(f)+"</div>"})}}},unblock:function(e){if(a.common.isNotEmpty(e)){c(e).unblock()}else{c.unblockUI()}},template:function(h,f,g){var e=String(c("#"+h).html()).replace(/(\/\/\<!\-\-)|(\/\/\-\->)/g,""),f=f||[];if(typeof g=="function"){laytpl(e).render(f||[],function(j){g(j)});return null}return laytpl(e).render(f||[])},layer:function(){try{if(top.layer){return top.layer}if(parent.parent.layer){return parent.parent.layer}if(parent.layer){return parent.layer}}catch(f){}if(b.layer){return layer}return null}(),getCookie:function(f){if(document.cookie.length>0){var g=document.cookie.indexOf(f+"=");if(g!=-1){g=g+f.length+1;var e=document.cookie.indexOf(";",g);if(e==-1){e=document.cookie.length}return unescape(document.cookie.substring(g,e))}}return""},selfLayer:function(){if(b.layer){return layer}try{if(top.layer&&top.layer.window){return top.layer}if(parent.parent.layer&&parent.parent.layer.window){return parent.parent.layer}if(parent.layer&&parent.layer.window){return parent.layer}}catch(f){}return null}(),navDelTab:function(e){layui.element.tabDelete("main-tab",e).init()},navTabAdd:function(e){a.variable.navtab.tabAdd(e)},navToTab:function(e){layui.element.tabChange("main-tab",e)},navDelTabNow:function(){if(c(".layui-tab-title li").length>1){c(".layui-tab-title li").each(function(){if(c(this).attr("lay-id")!=0){a.navDelTab(c(this).attr("lay-id"))}})}},storage:{set:function(e,f){b.localStorage.setItem(_username+e,f)},get:function(e){return b.localStorage.getItem(_username+e)},remove:function(e){b.localStorage.removeItem(_username+e)},clear:function(){b.localStorage.clear()}},table:{config:{},options:{},set:function(f){if(a.common.getLength(a.table.config)>1){var e=a.common.isEmpty(f)?c(event.currentTarget).parents(".bootstrap-table").find(".table").attr("id"):f;if(a.common.isNotEmpty(e)){a.table.options=a.table.get(e)}}},get:function(e){return a.table.config[e]},rememberSelecteds:{},rememberSelectedIds:{}},common:{isEmpty:function(h){try{if(h==null||h==d){return true}if(this.isArray(h)||this.isString(h)){return h.length===0}if(this.isNumber(h)){return false}if(this.isFunction(h)){return false}if(typeof h==="boolean"){return false}for(var f in h){if(h.hasOwnProperty(f)){return false}}return true}catch(g){if(b.console){console.error(g)}return true}},isPrimitive:function(e){return(typeof e==="string"||typeof e==="number"||typeof e==="symbol"||typeof e==="boolean")},isNotEmpty:function(e){return !a.common.isEmpty(e)},nullToStr:function(f,e){if(a.common.isEmpty(f)){return(a.common.isEmpty(e))?"":e}return f},visible:function(e){if(a.common.isEmpty(e)||e==true){return true}return false},trim:function(e){if(e==null){return""}if(typeof e==="string"){return e.toString().replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")}else{return""}},hideStr:function(g,f,e){if(a.common.isEmpty(g)){return"-"}else{if(e==0){if(g.length>f){return g.substr(0,f)+"..."}else{return g}}else{return"..."+g.substr(g.length-f,f)}}},equals:function(f,e){return f==e},equalsIgnoreCase:function(f,e){return String(f).toUpperCase()===String(e).toUpperCase()},split:function(h,f,e){if(a.common.isEmpty(h)){return null}var g=String(h).split(f);return e?g.slice(0,e-1):g},sprintf:function(h){var f=arguments,e=true,g=1;h=h.replace(/%s/g,function(){var j=f[g++];if(typeof j==="undefined"){e=false;return""}return j});return e?h:""},random:function(f,e){return Math.floor((Math.random()*e)+f)},randomString:function(f){f=f||32;var g="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678";var e=g.length;var h="";for(i=0;i<f;i++){h+=g.charAt(Math.floor(Math.random()*e))}return h},startWith:function(f,g){var e=new RegExp("^"+g);return e.test(f)},endWith:function(g,e){var f=new RegExp(e+"$");return f.test(g)},uniqueFn:function(h){var e=[];var g={};for(var f=0;f<h.length;f++){if(!g[h[f]]){g[h[f]]=true;e.push(h[f])}}return e},join:function(f,e){if(a.common.isEmpty(f)){return null}return f.join(e)},formToJSON:function(f){var e={};c.each(c("#"+f).serializeArray(),function(g,h){if(e[h.name]){e[h.name]+=(","+h.value)}else{e[h.name]=h.value}});return e},getJsonValue:function(g,e){var h;for(var f in g){if(f==e){h=g[f];break}}return h},objToEmpty:function(f){for(var e in f){if(Array.prototype==f[e].__proto__){f[e]=[]}else{if(typeof f[e]=="string"){f[e]=""}else{if(typeof f[e]=="number"){f[e]=0}}}}return f},getLength:function(g){var f=0;for(var e in g){if(g.hasOwnProperty(e)){f++}}return f},copy:function(f){var e=document.createElement("input");e.value=f;c(e).css({opacity:"0"});c(e).attr({name:"__copy_secukey"});document.body.appendChild(e);e.select();document.execCommand("Copy");e.className="oInput";c("input[name='__copy_secukey']").remove()},getCheckboxValue:function(f){var e="";c('input[name="'+f+'"]').each(function(){if(c(this).is(":checked")){e+=c(this).val()+","}});if(e.length>0){e=e.substring(0,e.length-1)}return e},toNumber:function(e){var f=parseFloat(e);return isNaN(f)?e:f},remove:function(e,g){if(e.length){var f=e.indexOf(g);if(f>-1){return e.splice(f,1)}}},toArray:function(g,h){h=h||0;var f=g.length-h;var e=new Array(f);while(f--){e[f]=g[f+h]}return e},extend:function(h,g,f){if(g){for(var e in g){if(!f||!h.hasOwnProperty(e)){h[e]=g[e]}}}return h},each:function(k,j,h){if(k==null){return}if(k.length===+k.length){for(var g=0,e=k.length;g<e;g++){if(j.call(h,k[g],g,k)===false){return false}}}else{for(var f in k){if(k.hasOwnProperty(f)){if(j.call(h,k[f],f,k)===false){return false}}}}},toObject:function(e){var h=this;var g={};for(var f=0;f<e.length;f++){if(e[f]){h.extend(g,e[f])}}return g},formatMoney:function(l,h,m,n,e){l=l||0;h=!isNaN(h=Math.abs(h))?h:2;m=m!==d?m:"$";n=n||",";e=e||".";var g=l<0?"-":"",k=parseInt(l=Math.abs(+l||0).toFixed(h),10)+"",f=(f=k.length)>3?f%3:0;return m+g+(f?k.substr(0,f)+n:"")+k.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+n)+(h?e+Math.abs(l-k).toFixed(h).slice(2):"")},playSound:function(f){if(!(f.indexOf("http")==0)){f=baseURL+"static/audio/"+f+".wav"}if(!!b.ActiveXObject||"ActiveXObject" in b){var g=document.noticePlay;if(g){g.remove()}g=document.createElement("embed");g.setAttribute("name","noticePlay");g.setAttribute("src",f);g.setAttribute("autostart",true);g.setAttribute("loop",false);g.setAttribute("hidden",true);document.body.appendChild(g);g=document.noticePlay;g.volume=100}else{var e=document.createElement("audio");e.setAttribute("hidden",true);e.setAttribute("src",f);document.body.appendChild(e);e.addEventListener("ended",function(){e.parentNode.removeChild(e)},false);e.play()}},sendAjax:function(e){if(a.common.equalsIgnoreCase(e.type,"POST")&&a.common.isNotEmpty(c('meta[name="csrf-token"]').attr("content"))){e=a.common.extend(e,{headers:{"X-CSRF-Token":c('meta[name="csrf-token"]').attr("content")}})}c.ajax(e)},downLoadFile:function(e){var g=document.getElementById("dwDiv");if(g!=null){document.body.removeChild(g)}var f=document.createElement("div");f.id="dwDiv";var h=document.createElement("a");h.href=encodeURI(e);h.id="hrefFile";f.appendChild(h);document.body.appendChild(f);document.getElementById("hrefFile").click();g=document.getElementById("dwDiv");if(g!=null){document.body.removeChild(g)}},digit:function(h,g){var f="";h=String(h),g=g||2;for(var j=h.length;j<g;j++){f+="0"}return h<Math.pow(10,g)?f+(0|h):h},toDateString:function(h,f){var g=this,k=new Date(h||new Date),e=[g.digit(k.getFullYear(),4),g.digit(k.getMonth()+1),g.digit(k.getDate())],j=[g.digit(k.getHours()),g.digit(k.getMinutes()),g.digit(k.getSeconds())];return f=f||"yyyy-MM-dd HH:mm:ss",f.replace(/yyyy/g,e[0]).replace(/MM/g,e[1]).replace(/dd/g,e[2]).replace(/HH/g,j[0]).replace(/mm/g,j[1]).replace(/ss/g,j[2])},formatDat:function(e,g){var f=this;if(f.isEmpty(e)){return""}if(!e){return}if(!g){g="yyyy-MM-dd"}switch(typeof e){case"string":e=new Date(e.replace(/-/,"/"));break;case"number":e=new Date(e);break}if(!e instanceof Date){return}var h={yyyy:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),MM:(""+(e.getMonth()+101)).substr(1),dd:(""+(e.getDate()+100)).substr(1),HH:(""+(e.getHours()+100)).substr(1),mm:(""+(e.getMinutes()+100)).substr(1),ss:(""+(e.getSeconds()+100)).substr(1)};return g.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,function(){return h[arguments[0]]})},escape:function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},encodeUrl:function(e){return encodeURIComponent(e)},decodeUrl:function(e){return decodeURIComponent(e)},subString:function(m,h,k){var f=0;var l="";var n=/[^\x00-\xff]/g;var j="";var e=m.replace(n,"**").length;for(var g=0;g<e;g++){j=m.charAt(g).toString();if(j.match(n)!=null){f+=2}else{f++}if(f>h){break}l+=j}if(k&&e>h){l+="..."}return l},bytesToSize:function(e){if(e===0){return"0 B"}var f=1024;sizes=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];i=Math.floor(Math.log(e)/Math.log(f));var g=e/Math.pow(f,i);return g.toPrecision(3)+" "+sizes[i]},fileFromPath:function(e){return e.replace(/.*(\/|\\)/,"")},getExt:function(e){return(-1!==e.indexOf("."))?e.replace(/.*[.]/,""):""}},modal:{icon:function(f){var e="";if(f==a.variable.modal_status.WARNING){e=0}else{if(f==a.variable.modal_status.SUCCESS){e=1}else{if(f==a.variable.modal_status.FAIL){e=2}else{e=3}}}return e},msg:function(f,e){if(e!=d){layui.use("layer",function(){var g=layui.layer;g.msg(f,{icon:a.modal.icon(e),time:1000,shift:5})})}else{layui.use("layer",function(){var g=layui.layer;g.msg(f)})}},msgError:function(e){a.modal.msg(e,a.variable.modal_status.FAIL)},msgSuccess:function(e){a.modal.msg(e,a.variable.modal_status.SUCCESS)},msgWarning:function(e){a.modal.msg(e,a.variable.modal_status.WARNING)},alert:function(f,e,g){a.selfLayer.alert(f,{icon:a.modal.icon(e),title:c.i18n.prop("\u7CFB\u7EDF\u63D0\u793A"),shadeClose:a.common.isEmpty(g)?true:g,btn:['<i class="fa fa-check"></i> '+c.i18n.prop("\u786E\u5B9A")],btnclass:["btn btn-primary"]})},msgReload:function(f,e){a.selfLayer.msg(f,{icon:a.modal.icon(e),time:500,shade:[0.1,"#8F8F8F"]},function(){a.modal.reload()})},alertError:function(e){a.modal.alert(e,a.variable.modal_status.FAIL)},alertSuccess:function(e){a.modal.alert(e,a.variable.modal_status.SUCCESS)},alertInfo:function(e){a.modal.alert(e,"")},success:function(e,f){a.selfLayer.alert(e,{icon:1,closeBtn:0,title:c.i18n.prop("\u7CFB\u7EDF\u63D0\u793A"),anim:1,yes:function(g){if(typeof(f)==="function"){f("ok")}a.selfLayer.close(g)}})},error:function(e,f){a.error(e,f)},warning:function(e,f){a.warning(e,f)},alertWarning:function(e){a.modal.alert(e,a.variable.modal_status.WARNING,true)},close:function(){var e=a.selfLayer.getFrameIndex(b.name);if(a.common.isNotEmpty(e)){a.selfLayer.close(e)}else{a.layer.closeAll()}},closeAll:function(){a.selfLayer.closeAll();a.layer.closeAll()},confirm:function(e,g,f){a.selfLayer.confirm(e,{icon:3,shadeClose:a.common.isEmpty(f)?true:f,title:'<i class="fa fa-exclamation-circle"></i> '+c.i18n.prop("\u7CFB\u7EDF\u63D0\u793A"),btn:['<i class="fa fa-check"></i> '+c.i18n.prop("\u786E\u5B9A"),'<i class="fa fa-close"></i> '+c.i18n.prop("\u53D6\u6D88")]},function(h){if(typeof(g)==="function"){g("ok")}a.selfLayer.close(h)})},popupRight:function(k,f,j,h,l){var g=150;var e=50;if(top.location!==self.location){if(c(top.window).outerWidth()<400){g=50}}else{e=0;if(c(b).outerWidth()<400){g=50}}a.layer.open({type:2,shade:false,scrollbar:false,anim:-1,closeBtn:0,shade:0.3,move:false,title:k,shadeClose:true,outLeft:true,skin:"layui-anim layui-anim-rl",offset:[e+"px",(c(top.window?top.window:b).outerWidth()-(c(b).outerWidth()-g))+"px"],area:[(c(b).outerWidth()-g)+"px","100%"],success:function(m,n){if(a.common.isNotEmpty(j)&&j){var o=c('<div id="'+n+'" class="layui-right-update"><i class="fa fa-mail-reply-all"></i> \u4FEE\u6539</div>').on("click",function(){a.layer.close(c(this).attr("id"));if(typeof h=="function"){b.setTimeout(function(){h(l)},200)}});if(!c(m).find(".layui-right-update").html()){c(m).find(".layui-layer-title").attr("style","font-size:13px;").before(o)}}},content:f})},open:function(l,e,f,n,m,k){if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){f="auto";n="auto"}if(a.common.isEmpty(l)){l=false}if(a.common.isEmpty(e)){e="/404.html"}if(a.common.isEmpty(f)){f=800}if(a.common.isEmpty(n)){n=(c(b).height()-50)}if(a.common.isEmpty(k)){k=2}var h=false;if(f!=="auto"||n!=="auto"){if(f>c(b).width()||n>c(b).height()){h=true}}var j;if(!a.common.isEmpty(m)&&typeof m=="function"){j=function(p,o){var q=o.find("iframe")[0];if(typeof q.contentWindow.submitHandler=="function"){if(q.contentWindow.submitHandler(p,o)){m(p,o,a.selfLayer);return}}else{m(p,o,a.selfLayer);return}}}else{j=function(p,o){var q=o.find("iframe")[0];if(typeof q.contentWindow.submitHandler=="function"){q.contentWindow.submitHandler(p,o);return}else{a.selfLayer.close(p);return}}}a.modal.loading(c.i18n.prop("\u6570\u636E\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u540E..."));var g=a.selfLayer.open({type:k,area:[f+"px",n+"px"],fix:false,maxmin:true,shade:0.3,title:c.i18n.prop(l),content:e,btn:['<i class="fa fa-check"></i> '+c.i18n.prop("\u786E\u5B9A"),'<i class="fa fa-close"></i> '+c.i18n.prop("\u53D6\u6D88")],shadeClose:true,yes:j,success:function(o,p){var q=o.find("iframe")[0];if(!a.common.isEmpty(q.contentWindow.onLoadSuccess)){q.contentWindow.onLoadSuccess(p,o,a.selfLayer)}a.modal.closeLoading()},cancel:function(o){return true},end:function(){a.modal.closeLoading()}});if(h){a.selfLayer.full(g)}},openOptions:function(n){var h=a.common.isEmpty(n.btn)?[]:n.btn;var f=a.common.isEmpty(n.url)?"/404.html":n.url;var m=a.common.isEmpty(n.title)?c.i18n.prop("\u7CFB\u7EDF\u7A97\u53E3"):c.i18n.prop(n.title);var g=a.common.isEmpty(n.width)?"800":n.width;var j=a.common.isEmpty(n.height)?(c(b).height()-50):n.height;var l=a.common.isEmpty(n.fromData)?{}:n.fromData;var k=a.common.isEmpty(n.type)?2:n.type;if(n.clear){if(h.length==0){h=['<i class="fa fa-check"></i> '+c.i18n.prop("\u786E\u5B9A"),'<i class="fa fa-trash-o"></i> '+c.i18n.prop("\u6E05\u9664"),'<i class="fa fa-close"></i> '+c.i18n.prop("\u53D6\u6D88")]}}else{if(h.length==0){h=['<i class="fa fa-check"></i> '+c.i18n.prop("\u786E\u5B9A"),'<i class="fa fa-close"></i> '+c.i18n.prop("\u53D6\u6D88")]}}var e;if(a.common.isNotEmpty(n.main)&&n.main){e=a.layer;j=a.common.isEmpty(n.height)?(c(top.window).height()-220):n.height}else{e=a.selfLayer}if(a.common.isEmpty(n.yes)){n.yes=function(p,o){var q=o.find("iframe")[0];if(typeof q.contentWindow.submitHandler=="function"){if(q.contentWindow.submitHandler(p,o,e)){if(typeof n.callBack=="function"){n.callBack(p,o,e)}}return}else{if(typeof n.callBack=="function"){n.callBack(p,o,e);return}}}}e.open({type:k,maxmin:true,shade:0.3,title:m,fix:false,area:[g+"px",j+"px"],content:f,fromData:l,shadeClose:a.common.isEmpty(n.shadeClose)?true:n.shadeClose,skin:n.skin,btn:h,yes:n.yes,btn2:function(p,o){if(n.clear){n.clear(p,o,e)}else{if(!a.common.isEmpty(n.cancel)){n.cancel(p,o)}e.close(p)}},btn3:function(p,o){if(!a.common.isEmpty(n.cancel)){n.cancel(p,o)}e.close(p)},success:function(o,p){var q=o.find("iframe")[0];if(typeof(q.contentWindow.onLoadSuccess)==="function"){q.contentWindow.onLoadSuccess(n.obj,o,p,e)}},cancel:function(p,o){if(!a.common.isEmpty(n.cancel)){n.cancel(p,o)}return true}})},openMainWin:function(g){var k=a.common.isEmpty(g.url)?"/404.html":g.url;var j=a.common.isEmpty(g.title)?c.i18n.prop("\u7CFB\u7EDF\u7A97\u53E3"):c.i18n.prop(g.title);var e=a.common.isEmpty(g.width)?c(top.window).width()-100:g.width;var h=a.common.isEmpty(g.height)?c(top.window).height()-100:g.height;var f=a.common.isEmpty(g.fromData)?{}:g.fromData;if(a.common.isEmpty(g.but)){g.but=true}if(g.but){if(g.clear){_btn=['<i class="fa fa-check"></i> '+c.i18n.prop("\u786E\u5B9A"),'<i class="fa fa-trash-o"></i> '+c.i18n.prop("\u6E05\u9664"),'<i class="fa fa-close"></i> '+c.i18n.prop("\u53D6\u6D88")]}else{_btn=['<i class="fa fa-check"></i> '+c.i18n.prop("\u786E\u5B9A"),'<i class="fa fa-close"></i> '+c.i18n.prop("\u53D6\u6D88")]}if(!a.common.isEmpty(g.callBack)){g.yes=function(m,l){var n=l.find("iframe")[0];if(typeof n.contentWindow.submitHandler=="function"){if(n.contentWindow.submitHandler(m,l)){g.callBack(m,l,a.layer)}}else{g.callBack(m,l,a.layer)}}}else{g.yes=function(m,l){a.layer.close(m)}}a.layer.open({type:2,maxmin:true,shadeClose:true,title:j,area:[e+"px",h+"px"],scrollbar:false,content:k,fromData:f,success:function(l,m){var n=l.find("iframe")[0];if(typeof(n.contentWindow.onLoadSuccess)==="function"){n.contentWindow.onLoadSuccess(m,l,a.layer)}},btn:a.common.isEmpty(g.btn)?_btn:g.btn,yes:g.yes,btn2:function(m,l){if(g.clear){g.clear(m,l,a.layer)}else{a.layer.close(m)}},btn3:function(m,l){a.layer.close(m)},cancel:function(m,l){if(!a.common.isEmpty(g.cancel)){g.cancel(m,l)}return true}})}else{a.layer.open({type:2,maxmin:true,shadeClose:true,title:j,area:[e+"px",h+"px"],content:k,success:function(l,m){a.selfLayer=a.layer;var n=l.find("iframe")[0];if(typeof(n.contentWindow.onLoadSuccess)==="function"){n.contentWindow.onLoadSuccess(m,l,a.layer)}}})}},openFull:function(j,g,h,e){if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){h="auto";e="auto"}if(a.common.isEmpty(j)){j=false}if(a.common.isEmpty(g)){g="/404.html"}if(a.common.isEmpty(h)){h=800}if(a.common.isEmpty(e)){e=(c(b).height()-50)}var f=a.selfLayer.open({type:2,area:[h+"px",e+"px"],fix:false,maxmin:true,shade:0.3,title:j,content:g,btn:['<i class="fa fa-check"></i> '+c.i18n.prop("\u786E\u5B9A"),'<i class="fa fa-close"></i> '+c.i18n.prop("\u53D6\u6D88")],shadeClose:true,yes:function(l,k){var m=k.find("iframe")[0];m.contentWindow.submitHandler(l,k)},cancel:function(k){return true}});a.selfLayer.full(f)},openView:function(g,f,h,e){var f=baseURL+"sys/component/fileViwe?fileName="+a.common.encodeUrl(g)+"&fileUrl="+a.common.encodeUrl(f);h=a.common.isEmpty(h)?c(top.window).width()-200:h;e=a.common.isEmpty(e)?c(top.window).height()-50:e;a.layer?a.layer.open({type:2,maxmin:false,shadeClose:true,title:false,area:[h+"px",e+"px"],content:f}):a.modal.windowOpen(f)},windowOpen:function(f,k,g,e){g&&e||(g=b.screen.width-200,e=b.screen.height-150);var j=parseInt((b.screen.height-e)/2-20,10),h=parseInt((b.screen.width-g)/2,10);b.open(f,k,"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes,width="+g+",height="+e+",top="+j+",left="+h)},openTab:function(f,e){a.createMenuItem(e,f)},parentTab:function(g,f){var e=b.frameElement.getAttribute("data-id");a.createMenuItem(f,g);a.closeItem(e)},closeTab:function(e){a.closeItem(e)},disable:function(){var g=b.top==b.parent?b.document:b.parent.document;try{c("a[class*=layui-layer-btn]",g).addClass("layer-disabled");c('button[class="btn btn-sm btn-primary"]',g).attr("disabled",true)}catch(f){}},enable:function(){var g=b.top==b.parent?b.document:b.parent.document;try{c("a[class*=layui-layer-btn]",g).removeClass("layer-disabled");c('button[class="btn btn-sm btn-primary"]',g).attr("disabled",false)}catch(f){}},loading:function(e){if(a.common.isEmpty(e)){c.blockUI()}else{c.blockUI({message:'<div class="loaderbox"><div class="loading-activity"></div> '+e+"</div>"})}},closeLoading:function(){setTimeout(function(){c.unblockUI()},50)},closeNowLoading:function(){if(top.location!=self.location){c(".content-wrapper",b.parent.document).unblock()}else{c.unblockUI()}},reload:function(){parent.location.reload()}},operate:{submit:function(h,j,f,k,l,e){var g={url:h,type:j,dataType:f,data:k,beforeSend:function(){a.modal.loading("\u6B63\u5728\u5904\u7406\u4E2D\uFF0C\u8BF7\u7A0D\u540E...")},success:function(m){if(m.code==a.variable.web_status.SUCCESS&&a.table.options.type==a.variable.table_type.bootstrapTable){if(!a.common.isEmpty(e)&&e){if(a.common.isNotEmpty(a.table.options.rememberSelected)&&a.table.options.rememberSelected){var t=a.common.getJsonValue(k,"ids").split(",");var r=a.common.isEmpty(a.table.options.uniqueId)?a.table.options.columns[1].field:a.table.options.uniqueId;var v=a.table.rememberSelecteds[a.table.options.id];var u=[];if(a.common.isNotEmpty(v)){for(var o=0;o<v.length;o++){for(var q=0;q<t.length;q++){if(a.common.getJsonValue(v[o],r)===t[q]){u[u.length]=v[o];v.splice(o,1);o=o-1}}}}var n=a.table.rememberSelectedIds[a.table.options.id];if(a.common.isNotEmpty(n)){for(var o=0;o<n.length;o++){for(var q=0;q<u.length;q++){if(a.common.getJsonValue(u[q],r)===n[o]){n.splice(o,1);o=o-1}}}}}}}if(typeof l=="function"){l(m)}a.operate.ajaxSuccess(m)}};if(a.common.equalsIgnoreCase(g.type,"POST")&&a.common.isNotEmpty(c('meta[name="csrf-token"]').attr("content"))){g=a.common.extend(g,{headers:{"X-CSRF-Token":c('meta[name="csrf-token"]').attr("content")}})}c.ajax(g)},delPost:function(e,f,g){if(a.common.isNotEmpty(a.table.options.rememberSelected)&&a.table.options.rememberSelected){a.table.rememberSelecteds={};a.table.rememberSelectedIds={}}a.operate.submit(e,"post","json",f,g)},post:function(e,f,g){a.operate.submit(e,"post","json",f,g)},get:function(e,f){a.operate.submit(e,"get","json","",f)},detail:function(m,l,k,f){a.table.set();var j=a.operate.detailUrl(m);var e=a.common.isEmpty(k)?"800":k;var h=a.common.isEmpty(f)?(c(b).height()-50):f;if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){e="auto";h="auto"}var g={title:a.common.isEmpty(l)?a.table.options.modalName+"\u8BE6\u7EC6":l,width:e,height:h,url:j,btn:["\u5173\u95ED"],yes:function(o,n){a.layer.close(o)||a.selfLayer.close(o)}};a.modal.openOptions(g)},detailUrl:function(f){var e="/404.html";if(a.common.isNotEmpty(f)){e=a.table.options.detailUrl.replace("{id}",f)}else{var f=a.common.isEmpty(a.table.options.uniqueId)?c.table.selectFirstColumns():c.table.selectColumns(a.table.options.uniqueId);if(f.length==0){a.modal.alertWarning("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u6761\u8BB0\u5F55");return}e=a.table.options.detailUrl.replace("{id}",f)}return e},del:function(e){a.table.set();a.modal.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u6761"+a.table.options.modalName+"\u4FE1\u606F\u5417\uFF1F",function(){var f=a.common.isEmpty(e)?a.table.options.delUrl:a.table.options.delUrl.replace("{id}",e);if(a.table.options.type==a.variable.table_type.bootstrapTreeTable){a.operate.get(f)}else{var g={ids:e};a.operate.submit(f,"POST","json",g,"",true)}})},exe:function(e){a.table.set();a.modal.confirm("\u786E\u5B9A\u5904\u7406\u8BE5\u6761"+table.options.modalName+"\u4FE1\u606F\u5417\uFF1F",function(){var f=a.common.isEmpty(e)?table.options.exeUrl:table.options.exeUrl.replace("{id}",e);if(a.table.options.type==a.variable.table_type.bootstrapTreeTable){a.operate.get(f)}else{var g={ids:e};a.operate.submit(f,"POST","json",g)}})},delAll:function(){a.table.set();var e=a.common.isEmpty(a.table.options.uniqueId)?c.table.selectFirstColumns():c.table.selectColumns(a.table.options.uniqueId);if(e.length==0){a.modal.error("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u6761\u8BB0\u5F55");return}a.modal.confirm("\u786E\u8BA4\u8981\u5220\u9664\u9009\u4E2D\u7684"+e.length+"\u6761\u6570\u636E\u5417?",function(){var f=a.table.options.delUrl;var g={ids:e.join()};a.operate.submit(f,"POST","json",g,"",true)})},clean:function(){a.table.set();a.modal.confirm("\u786E\u5B9A\u6E05\u7A7A\u6240\u6709"+a.table.options.modalName+"\u5417\uFF1F",function(){var e=a.table.options.cleanUrl;a.operate.submit(e,"post","json","")})},add:function(e){a.table.set();a.modal.open("\u6DFB\u52A0"+a.table.options.modalName,a.operate.addUrl(e))},exeDis:function(f,e){a.table.set();a.modal.open("\u5904\u7406["+e+"]",a.operate.exeUrl(f))},addTab:function(e){a.table.set();a.modal.openTab("\u6DFB\u52A0"+a.table.options.modalName,a.operate.addUrl(e))},addFull:function(f){a.table.set();var e=a.common.isEmpty(f)?a.table.options.addUrl:a.table.options.addUrl.replace("{id}",f);a.modal.openFull("\u6DFB\u52A0"+a.table.options.modalName,e)},addUrl:function(f){a.table.set();var e=a.common.isEmpty(f)?a.table.options.addUrl.replace("{id}",""):a.table.options.addUrl.replace("{id}",f);return e},exeUrl:function(f){a.table.set();var e=a.common.isEmpty(f)?a.table.options.exeUrl.replace("{id}",""):a.table.options.exeUrl.replace("{id}",f);return e},edit:function(g){a.table.set();if(a.common.isEmpty(a.table.options.editUrl)){a.modal.msgError("editUrl \u672A\u4F20!");return}if(a.common.isEmpty(g)&&a.table.options.type==a.variable.table_type.bootstrapTreeTable){var f=c("#"+a.table.options.id).bootstrapTreeTable("getSelections")[0];if(a.common.isEmpty(f)){a.modal.error("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u6761\u8BB0\u5F55");return}var e=a.table.options.editUrl.replace("{id}",f[a.table.options.uniqueId]);a.modal.open("\u4FEE\u6539"+a.table.options.modalName,e)}else{a.modal.open("\u4FEE\u6539"+a.table.options.modalName,a.operate.editUrl(g))}},view:function(j,h,f){var e=this;a.table.set();if(a.common.isEmpty(a.table.options.viewUrl)){a.modal.msgError("viewUrl \u672A\u4F20!");return}if(a.common.isEmpty(j)){a.modal.error("id\u5FC5\u987B\u4F20!");return}var g=a.table.options.viewUrl.replace("{id}",j);a.modal.popupRight(a.table.options.modalName+"\u4FE1\u606F\u8BE6\u60C5",g,(h==""),f,j)},editTab:function(g){a.table.set();if(a.common.isEmpty(a.table.options.editUrl)){a.modal.msgError("editUrl \u672A\u4F20!");return}if(a.common.isEmpty(g)&&a.table.options.type==a.variable.table_type.bootstrapTreeTable){var f=c("#"+a.table.options.id).bootstrapTreeTable("getSelections")[0];if(a.common.isEmpty(f)){a.modal.error("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u6761\u8BB0\u5F55");return}var e=a.table.options.editUrl.replace("{id}",f[a.table.options.uniqueId]);a.modal.openTab("\u4FEE\u6539"+a.table.options.modalName,a.operate.editUrl(g))}else{a.modal.openTab("\u4FEE\u6539"+a.table.options.modalName,a.operate.editUrl(g))}},editFull:function(g){a.table.set();var e="/404.html";if(a.common.isNotEmpty(g)){e=a.table.options.editUrl.replace("{id}",g)}else{var f=a.common.isEmpty(a.table.options.uniqueId)?c.table.selectFirstColumns():c.table.selectColumns(a.table.options.uniqueId);e=a.table.options.editUrl.replace("{id}",f)}a.modal.openFull("\u4FEE\u6539"+a.table.options.modalName,e)},editUrl:function(f){a.table.set();var e="/404.html";if(a.common.isNotEmpty(f)){e=a.table.options.editUrl.replace("{id}",f)}else{var f=a.common.isEmpty(a.table.options.uniqueId)?c.table.selectFirstColumns():c.table.selectColumns(a.table.options.uniqueId);if(f.length==0){a.modal.error("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u6761\u8BB0\u5F55");return}e=a.table.options.editUrl.replace("{id}",f)}return e},save:function(f,g,h){var e={url:f,type:"post",dataType:"json",data:g,beforeSend:function(){a.modal.disable();a.modal.loading(c.i18n.prop("\u6570\u636E\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u540E..."))},success:function(j){if(typeof h=="function"){a.modal.closeLoading();h(j)}else{a.operate.successCallback(j)}}};if(a.common.isNotEmpty(c('meta[name="csrf-token"]').attr("content"))){e=a.common.extend(e,{headers:{"X-CSRF-Token":c('meta[name="csrf-token"]').attr("content")}})}c.ajax(e)},saveModal:function(f,g,h){var e={url:f,type:"post",dataType:"json",data:g,beforeSend:function(){a.modal.loading(c.i18n.prop("\u6570\u636E\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u540E..."))},success:function(j){a.modal.closeLoading();if(typeof h=="function"){h(j);return}if(j.code==a.variable.web_status.SUCCESS){a.modal.success(c.i18n.prop("\u64CD\u4F5C\u6210\u529F!"))}else{if(j.code==a.variable.web_status.WARNING){a.modal.warning(j.msg)}else{a.modal.error(j.msg)}}}};if(a.common.equalsIgnoreCase(e.type,"POST")&&a.common.isNotEmpty(c('meta[name="csrf-token"]').attr("content"))){e=a.common.extend(e,{headers:{"X-CSRF-Token":c('meta[name="csrf-token"]').attr("content")}})}c.ajax(e)},saveTab:function(f,g,h){var e={url:f,type:"POST",dataType:"JSON",data:g,beforeSend:function(){a.modal.loading(c.i18n.prop("\u6570\u636E\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u540E..."))},success:function(j){if(typeof h=="function"){a.modal.closeLoading();h(j)}else{a.operate.successTabCallback(j)}}};if(a.common.equalsIgnoreCase(e.type,"POST")&&a.common.isNotEmpty(c('meta[name="csrf-token"]').attr("content"))){e=a.common.extend(e,{headers:{"X-CSRF-Token":c('meta[name="csrf-token"]').attr("content")}})}c.ajax(e)},ajaxSuccess:function(e){if(e.code==a.variable.web_status.SUCCESS&&a.table.options.type==a.variable.table_type.bootstrapTable){a.success(c.i18n.prop("\u64CD\u4F5C\u6210\u529F!"));c.table.refresh()}else{if(e.code==a.variable.web_status.SUCCESS&&a.table.options.type==a.variable.table_type.bootstrapTreeTable){a.success(c.i18n.prop("\u64CD\u4F5C\u6210\u529F!"));c.treeTable.refresh()}else{if(e.code==a.variable.web_status.SUCCESS){a.success(c.i18n.prop("\u64CD\u4F5C\u6210\u529F!"))}else{if(e.code==a.variable.web_status.WARNING){a.modal.warning(e.msg)}else{a.modal.error(e.msg)}}}}a.modal.closeLoading()},saveSuccess:function(e){if(e.code==a.variable.web_status.SUCCESS){a.modal.msgReload("\u4FDD\u5B58\u6210\u529F,\u6B63\u5728\u5237\u65B0\u6570\u636E\u8BF7\u7A0D\u540E\u2026\u2026",a.variable.modal_status.SUCCESS)}else{if(e.code==a.variable.web_status.WARNING){a.modal.alertWarning(e.msg)}else{a.modal.alertError(e.msg)}}a.modal.closeLoading()},successCallback:function(e){a.modal.closeLoading();if(e.code==a.variable.web_status.SUCCESS){var f=b.parent;if(f.opt.table.options.type==a.variable.table_type.bootstrapTable){f.$.table.refresh();f.opt.success("\u64CD\u4F5C\u6210\u529F",f.opt.modal.closeAll())}else{if(f.opt.table.options.type==a.variable.table_type.bootstrapTreeTable){f.$.treeTable.refresh();f.opt.success("\u64CD\u4F5C\u6210\u529F",f.opt.modal.closeAll())}else{if(b.opt.table.options.type==a.variable.table_type.bootstrapTable){b.$.table.refresh();b.opt.success("\u64CD\u4F5C\u6210\u529F",f.opt.modal.closeAll())}else{a.modal.msgReload("\u4FDD\u5B58\u6210\u529F,\u6B63\u5728\u5237\u65B0\u6570\u636E\u8BF7\u7A0D\u540E\u2026\u2026",a.variable.modal_status.SUCCESS)}}}}else{if(e.code==a.variable.web_status.WARNING){a.modal.warning(e.msg)}else{a.modal.error(e.msg)}}a.modal.enable()},successTabCallback:function(f){a.modal.closeLoading();if(top.location!=self.location){if(f.code==a.variable.web_status.SUCCESS){var g=c(b.parent.document);var e=c(".layui-tab-title",g).find(".layui-this").children("em").attr("panel-id");if(a.common.isNotEmpty(e)){var h=c('iframe[data-id="'+e+'"]',g)[0].contentWindow;h.opt.success(c.i18n.prop("\u64CD\u4F5C\u6210\u529F!"))}else{parent.opt.success(c.i18n.prop("\u64CD\u4F5C\u6210\u529F!"))}a.modal.closeTab()}else{if(f.code==a.variable.web_status.WARNING){a.modal.warning(f.msg)}else{a.modal.error(f.msg)}}}else{a.modal.closeTab()}},successTab:function(){if(top.location!=self.location){var f=c(b.parent.document);var e=c(".layui-tab-title",f).find(".layui-this").children("em").attr("panel-id");if(a.common.isNotEmpty(e)){var g=c('iframe[data-id="'+e+'"]',f)[0].contentWindow;g.opt.modal.msg(c.i18n.prop("\u64CD\u4F5C\u6210\u529F!"));if(g.opt.table.options.type==a.variable.table_type.bootstrapTable){g.$.table.refresh()}else{if(g.opt.table.options.type==a.variable.table_type.bootstrapTreeTable){g.$.treeTable.refresh()}}}a.modal.closeTab()}else{a.modal.closeTab()}}},validate:{unique:function(f){var e=c.parseJSON(f);if(e.code===a.variable.web_status.SUCCESS){return true}return"<i class='fa fa-times-circle'></i>  "+e.msg},form:function(f){var e;if(a.common.isEmpty(f)){if(a.common.isEmpty(a.table.options.formId)){e=c("form").attr("id")}else{e=a.table.options.formId}}else{e=f}return c("#"+e).validate().form()},reset:function(f){var e;if(a.common.isEmpty(f)){if(a.common.isEmpty(a.table.options.formId)){e=c("form").attr("id")}else{e=a.table.options.formId}}else{e=f}return c("#"+e).validate().resetForm()},fromData:function(f){var e;if(a.common.isEmpty(f)){if(a.common.isEmpty(a.table.options.formId)){e=c("form").attr("id")}else{e=a.table.options.formId}}else{e=f}return c("#"+e).serialize()}},form:{reset:function(h,k,g){var j=a.common.isEmpty(g)?[]:g.split(",");a.table.set(h);var e;if(a.common.isEmpty(k)){if(a.common.isEmpty(a.table.options.formId)){e=c("form").attr("id")}else{e=a.table.options.formId}}else{e=k}var f=c("#"+e).find("input, select");c.each(f,function(){if(this.tagName=="SELECT"){if(a.common.isEmpty(g)){c(this).val(null).trigger("change")}else{var l=false;for(var m=0;m<j.length;m++){if(c(this).attr("name")==j[m]){l=true}}if(!l){c(this).val(null).trigger("change")}}}else{if(this.tagName=="INPUT"){if(!(this.type=="hidden"&&a.common.isNotEmpty(c(this).data("refresh"))&&!c(this).data("refresh"))){this.value=""}}}});c("#"+e+" select").each(function(m){if(!a.common.isEmpty(c(this).attr("data-select2-id"))){if(a.common.isEmpty(g)){c(this).val(null).trigger("change")}else{var l=false;for(var m=0;m<j.length;m++){if(c(this).attr("name")==j[m]){l=true}}if(!l){c(this).val(null).trigger("change")}}}});if(a.table.options.type==a.variable.table_type.bootstrapTable){if(a.common.isNotEmpty(a.table.options.rememberSelected)&&a.table.options.rememberSelected){a.table.rememberSelecteds={};a.table.rememberSelectedIds={}}if(a.common.isEmpty(h)){c("#"+a.table.options.id).bootstrapTable("refresh")}else{c("#"+h).bootstrapTable("refresh")}}else{if(a.table.options.type==a.variable.table_type.bootstrapTreeTable){if(a.common.isEmpty(h)){c("#"+a.table.options.id).bootstrapTreeTable("refresh",{__refre:true})}else{c("#"+h).bootstrapTreeTable("refresh",{__refre:true})}}}},submit:function(){if(typeof submitHandler=="function"){a.modal.disable();submitHandler();a.modal.enable()}else{a.modal.error(c.i18n.prop("\u9875\u9762\u5FC5\u987B\u5B58\u5728[submitHandler]\u65B9\u6CD5"))}},selectCheckeds:function(f){var e="";c('input:checkbox[name="'+f+'"]:checked').each(function(g){if(0==g){e=c(this).val()}else{e+=(","+c(this).val())}});return e},selectSelects:function(e){var f="";c("#"+e+" option:selected").each(function(g){if(0==g){f=c(this).val()}else{f+=(","+c(this).val())}});return f.split(",")},getInputValue:function(e){return c('input[name="'+e+'"]').val()},dataUp:function(f){var j={id:"form-user-saveUpdate",del:[],conversion:[]};var f=c.extend(j,f);var h=c("#"+f.id).serializeArray();for(var g=0;g<h.length;g++){if(a.common.isEmpty(f.del)){break}for(var e=0;e<f.del.length;e++){if(h[g].name==f.del[e]){h.splice(g,1);if(g==0){g=0}else{g--}}}}for(var g=0;g<h.length;g++){if(a.common.isEmpty(f.conversion)){break}for(var e=0;e<f.conversion.length;e++){if(h[g].name==f.conversion[e].name){if(f.conversion[e].value=="arr"){h[g].value=h[g].value.split(",")}if(f.conversion[e].value=="num"){h[g].value=Number(h[g].value)}}}}return h}}};a.common.each(["String","Function","Array","Number","RegExp","Object","Date"],function(e){a.common["is"+e]=function(f){return Object.prototype.toString.apply(f)=="[object "+e+"]"}});c(function(){c('[data-toggle="tooltip"]').each(function(){c(this).tooltip()});setTimeout(function(){c('[data-index="_new"]').each(function(){c(this).addClass("jump5")})},2000);if(c.fn.select2!==d){c.fn.select2.defaults.set("theme","bootstrap");c("select.form-control:not(.noselect2)").each(function(){if(typeof(c(this).attr("multiple"))=="undefined"){c(this).select2()}else{c(this).select2({allowClear:true,placeholder:""})}})}if(c.fn.iCheck!==d){c(".check-box:not(.noicheck),.radio-box:not(.noicheck)").each(function(){c(this).iCheck({checkboxClass:(typeof(c(this).data("style"))=="undefined")?"icheckbox-blue":("icheckbox_"+(c(this).data("style")||"square-blue")),radioClass:(typeof(c(this).data("style"))=="undefined")?"iradio-blue":("iradio_"+(c(this).data("style")||"square-blue"))})})}c('[data-toggle="popover"]').each(function(){c(this).popover()});if(c(".select-time").length>0){layui.use("laydate",function(){var k=layui.laydate;var j=k.render({elem:"#startTime",max:c("#endTime").val(),theme:"default",type:c("#startTime").attr("data-type")||"date",trigger:"click",done:function(n,m){if(n!==""){l.config.min.year=m.year;l.config.min.month=m.month-1;l.config.min.date=m.date}else{l.config.min.year="";l.config.min.month="";l.config.min.date=""}}});var l=k.render({elem:"#endTime",min:c("#startTime").val(),theme:"default",type:c("#endTime").attr("data-type")||"date",trigger:"click",done:function(n,m){if(n!==""){j.config.max.year=m.year;j.config.max.month=m.month-1;j.config.max.date=m.date}else{j.config.max.year="2099";j.config.max.month="12";j.config.max.date="31"}}})})}if(c(".time-input").length>0){layui.use("laydate",function(){var j=layui.laydate;c(".time-input").each(function(m,t){var k=c(t);var o=k.attr("data-type")||"date";var q=k.attr("data-format")||"yyyy-MM-dd";var n=k.attr("data-btn")||"clear|now|confirm",u=[];var s=k.attr("data-callback")||{};if(n){if(n.indexOf("|")>0){var p=n.split("|"),r=p.length;for(var l=0;l<r;l++){if("clear"===p[l]||"now"===p[l]||"confirm"===p[l]){u.push(p[l])}}}else{if("clear"===n||"now"===n||"confirm"===n){u.push(n)}}}else{u=["clear","now","confirm"]}j.render({elem:t,theme:"molv",trigger:"click",type:o,format:q,btns:u,done:function(w,v){if(typeof b[s]!="undefined"&&b[s] instanceof Function){b[s](w,v)}}})})})}var h;c("#expandAllBtn").click(function(){var j=a.common.isEmpty(a.table.options.expandAll)?true:a.table.options.expandAll;h=a.common.isEmpty(h)?j:h;if(!h){c.bttTable.bootstrapTreeTable("expandAll")}else{c.bttTable.bootstrapTreeTable("collapseAll")}h=h?false:true});if(c("#keyword").length>0){c("#keyword").bind("focus",function g(j){if(c("#keyword").hasClass("empty")){c("#keyword").removeClass("empty")}}).bind("blur",function e(j){if(c("#keyword").val()===""){c("#keyword").addClass("empty")}c.tree.searchNode(j)}).bind("input propertychange",c.tree.searchNode)}c("body",document).on("keyup",this,function(j){if(j.which===27){a.modal.closeAll()}});if(c.fn.toTop!==d){if(c.fn.layout!==d&&c(".ui-layout-center")){var f={win:c(".ui-layout-center"),doc:c(".ui-layout-center")};c("#scroll-up").toTop(f)}else{c("#scroll-up").toTop()}}});b.opt=a})(window.jQuery,window);(function(a){a.fn.toTop=function(c){var d=this;var f=(c&&c.hasOwnProperty("win"))?c.win:a(window);var e=(c&&c.hasOwnProperty("doc"))?c.doc:a("html, body");var b=a.extend({autohide:true,offset:50,speed:500,position:true,right:15,bottom:5},c);d.css({cursor:"pointer"});if(b.autohide){d.css("display","none")}if(b.position){d.css({position:"fixed",right:b.right,bottom:b.bottom})}d.click(function(){e.animate({scrollTop:0},b.speed)});f.scroll(function(){var g=f.scrollTop();if(b.autohide){if(g>b.offset){d.fadeIn(b.speed)}else{d.fadeOut(b.speed)}}})}}(jQuery));(function(a){a.extend({table:{init:function(c){var g={formId:"",id:"bootstrap-table",type:0,height:undefined,sidePagination:"server",sortName:"",sortOrder:"asc",pagination:true,pageSize:50,pageList:[50,100,150],toolbar:"toolbar",striped:false,escape:false,outcheckbox:true,firstLoad:true,showFooter:false,undefinedText:"/",emptyText:"/",search:false,showSearch:true,showPageGo:true,showRefresh:true,showColumns:true,resizable:false,showToggle:true,showExport:false,clickToSelect:true,singleSelect:false,paginationLoop:true,onSelectData:undefined,showPage:true,mobileResponsive:true,rememberSelected:true,_total:false,showPaginationSwitch:false,fixedColumns:false,fixedNumber:0,rightFixedColumns:false,rightFixedNumber:0,queryParams:a.table.queryParams,totalData:undefined,_totalColumns:[],rowStyle:{}};if(c.resizable){try{if(0!==_ColResizable){opt.error("\u6A21\u677F\u5F15\u64CE\u7F3A\u5C11\u5F15\u5165\u8868\u683C\u62D6\u52A8Libs['resizable']");return}}catch(f){opt.error("\u6A21\u677F\u5F15\u64CE\u7F3A\u5C11\u5F15\u5165\u8868\u683C\u62D6\u52A8Libs['resizable']");return}}var c=a.extend(g,c);if(c.outcheckbox&&(!opt.common.isEmpty(a("#"+c.toolbar+"-"+c.id+" .multiple").html())||!opt.common.isEmpty(a("#"+c.toolbar+"-"+c.id+" .single").html()))){var h=false;if(!opt.common.isEmpty(c.columns.length)){for(var d=0;d<c.columns.length;d++){if(c.columns[0] instanceof Array){for(var b=0;b<c.columns[d].length;b++){if(!opt.common.isEmpty(opt.common.getJsonValue(c.columns[d][b],"checkbox"))){h=true;break}}if(h){break}}else{if(!opt.common.isEmpty(opt.common.getJsonValue(c.columns[d],"checkbox"))){h=true;break}}}}if(!h){if(c.columns[0] instanceof Array){c.columns[1].splice(0,0,{checkbox:true,field:"state"})}else{c.columns.splice(0,0,{checkbox:true,field:"state"})}}}if(!opt.common.isEmpty(c.columns.length)){for(var d=0;d<c.columns.length;d++){if(c.columns[0] instanceof Array){for(var b=0;b<c.columns[d].length;b++){if(opt.common.isEmpty(opt.common.getJsonValue(c.columns[d][b],"align"))){c.columns[d][b].align="center"}if(opt.common.isEmpty(opt.common.getJsonValue(c.columns[d][b],"halign"))){c.columns[d][b].halign="center"}if(!opt.common.isEmpty(opt.common.getJsonValue(c.columns[d][b],"checkbox"))){c.columns[d][b].field="state"}}}else{if(opt.common.isEmpty(opt.common.getJsonValue(c.columns[d],"align"))){c.columns[d].align="center"}if(opt.common.isEmpty(opt.common.getJsonValue(c.columns[d],"halign"))){c.columns[d].halign="center"}if(!opt.common.isEmpty(opt.common.getJsonValue(c.columns[d],"checkbox"))){c.columns[d].field="state"}}}}opt.table.options=c;opt.table.config[c.id]=c;a.table.initEvent();a("#"+c.id).bootstrapTable({id:c.id,url:c.url,contentType:"application/x-www-form-urlencoded",method:"post",cache:false,height:c.height,striped:c.striped,sortable:true,sortStable:true,sortName:c.sortName,sortOrder:c.sortOrder,pagination:c.pagination,paginationLoop:c.paginationLoop,undefinedText:c.undefinedText,emptyText:c.emptyText,showPaginationSwitch:c.showPaginationSwitch,pageNumber:1,pageSize:c.pageSize,pageList:c.pageList,firstLoad:c.firstLoad,escape:c.escape,showFooter:c.showFooter,iconSize:"outline",toolbar:"#"+c.toolbar+"-"+c.id,sidePagination:c.sidePagination,search:c.search,searchText:c.searchText,showSearch:c.showSearch,showPageGo:c.showPageGo,showPage:c.showPage,showRefresh:c.showRefresh,showColumns:c.showColumns,showToggle:c.showToggle,showExport:c.showExport,uniqueId:c.uniqueId,clickToSelect:c.clickToSelect,singleSelect:c.singleSelect,mobileResponsive:c.mobileResponsive,detailView:c.detailView,onClickRow:c.onClickRow,onDblClickRow:c.onDblClickRow,onClickCell:c.onClickCell,onDblClickCell:c.onDblClickCell,onEditableSave:c.onEditableSave,onExpandRow:c.onExpandRow,rememberSelected:c.rememberSelected,fixedColumns:c.fixedColumns,fixedNumber:c.fixedNumber,resizable:c.resizable,rightFixedColumns:c.rightFixedColumns,rightFixedNumber:c.rightFixedNumber,onReorderRow:c.onReorderRow,queryParams:c.queryParams,rowStyle:c.rowStyle,columns:c.columns,responseHandler:a.table.responseHandler,onLoadSuccess:a.table.onLoadSuccess,exportOptions:c.exportOptions,detailFormatter:c.detailFormatter})},getOptionsIds:function(c){var d=opt.common.isEmpty(c)?",":c;var b="";a.each(opt.table.config,function(e,f){b+="#"+e+d});return b.substring(0,b.length-1)},queryParams:function(d){var c={__limit:d.limit,__page:d.offset/d.limit+1,searchValue:d.search,__sidx:d.sort,__order:d.order};var b=opt.common.isEmpty(opt.table.options.formId)?a("form").attr("id"):opt.table.options.formId;return a.extend(c,opt.common.formToJSON(b))},tableTotalHtml:function(c){opt.table.set();var b="";if(!opt.common.isEmpty(opt.table.options.totalData)){return"<span>"+opt.common.getJsonValue(opt.table.options.totalData,c)+"</span>"}else{return""}},responseHandler:function(b){if(typeof opt.table.get(this.id).responseHandler=="function"){opt.table.get(this.id).responseHandler(b)}if(b.code==0){if(opt.common.isNotEmpty(opt.table.options.sidePagination)&&opt.table.options.sidePagination=="client"){return b.rows}else{if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var c=opt.common.isEmpty(opt.table.options.uniqueId)?opt.table.options.columns[1].field:opt.table.options.uniqueId;a.each(b.data.list,function(e,g){if(opt.table.rememberSelectedIds[opt.table.options.id]){var j=false;for(var e=0;e<opt.table.rememberSelectedIds[opt.table.options.id].length;e++){if(g[c]==opt.table.rememberSelectedIds[opt.table.options.id][e]){j=true}}if(j){if(opt.common.isEmpty(opt.table.rememberSelecteds[opt.table.options.id])){opt.table.rememberSelecteds[opt.table.options.id]=_.union([],g,c)}else{var h=true;for(var d=0;d<opt.table.rememberSelecteds[opt.table.options.id].length;d++){if(g[c]==opt.common.getJsonValue(opt.table.rememberSelecteds[opt.table.options.id][d],c)){h=false;break}}if(h){var f=opt.table.rememberSelecteds[opt.table.options.id];opt.table.rememberSelecteds[opt.table.options.id]=_.union(f,g,c)}}}g.state=j}else{g.state=false}})}if(opt.common.isNotEmpty(opt.table.options._total)&&opt.table.options._total){opt.table.options.totalData=b.pageTotal}return{rows:b.data.list,total:b.data.totalCount}}}else{opt.modal.error(b.msg,function(){try{opt.closeItem()}catch(d){}});return{rows:[],total:0}}},initEvent:function(){var b=a.table.getOptionsIds();a(b).on(TABLE_EVENTS,function(){opt.table.set(a(this).attr("id"))});a(b).on("check.bs.table check-all.bs.table uncheck.bs.table uncheck-all.bs.table",function(k,h){console.log("e.type:"+k.type);var c=a.table.affectedRowIds(h);if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var g=a.map(a("#"+opt.table.options.id).bootstrapTable("getAllSelections"),function(e){return e});var d=opt.table.rememberSelectedIds[opt.table.options.id];var j=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isEmpty(d)&&opt.common.isEmpty(j)&&g.length>=1){opt.table.rememberSelecteds[opt.table.options.id]=_.union([],g,opt.table.options.uniqueId);opt.table.rememberSelectedIds[opt.table.options.id]=_.union([],a.table.affectedRowIds(g),opt.table.options.uniqueId)}if(!opt.table.options.singleSelect){var f=opt.common.isEmpty(opt.table.options.uniqueId)?opt.table.options.columns[1].field:opt.table.options.uniqueId;func=a.inArray(k.type,["check","check-all"])>-1?"union":"difference";d=opt.table.rememberSelectedIds[opt.table.options.id];if(opt.common.isNotEmpty(d)){opt.table.rememberSelectedIds[opt.table.options.id]=_[func](d,c,f)}else{opt.table.rememberSelectedIds[opt.table.options.id]=_[func]([],c,f)}j=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isNotEmpty(j)){opt.table.rememberSelecteds[opt.table.options.id]=_[func](j,h,f)}else{opt.table.rememberSelecteds[opt.table.options.id]=_.union([],g,f)}}else{opt.table.rememberSelecteds[opt.table.options.id]=_.union([],g,opt.table.options.uniqueId);opt.table.rememberSelectedIds[opt.table.options.id]=_.union([],a.table.affectedRowIds(g),opt.table.options.uniqueId)}}if(typeof opt.table.get(opt.table.options.id).onSelectData=="function"){if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){opt.table.get(opt.table.options.id).onSelectData(opt.table.rememberSelecteds[opt.table.options.id])}else{opt.table.get(opt.table.options.id).onSelectData(h)}}});a(b).on("check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table load-success.bs.table",function(){var c=opt.table.options.toolbar+"-"+opt.table.options.id;var e=opt.table.options.uniqueId;var d=opt.common.isEmpty(e)?a.table.selectFirstColumns():a.table.selectColumns(e);a("#"+c+" .multiple").toggleClass("disabled",!d.length);a("#"+c+" .single").toggleClass("disabled",d.length!=1)});a(b).off("click").on("click",".img-circle",function(){var f=a(this).attr("src");var e=a(this).data("target");var c=a(this).data("height");var d=a(this).data("width");if(opt.common.equals("self",e)){layer.open({title:false,type:1,closeBtn:true,shadeClose:true,area:["auto","auto"],content:"<img src='"+f+"' height='"+c+"' width='"+d+"'/>"})}else{if(opt.common.equals("blank",e)){window.open(f)}}});a(b).on("click",".tooltip-show",function(){var d=a(this).data("target");var c=a(this).prev();if(opt.common.equals("open",d)){opt.selfLayer.alert(c.val(),{title:"\u4FE1\u606F\u5185\u5BB9",shadeClose:true,btn:["\u786E\u8BA4"],btnclass:["btn btn-primary"]})}})},onLoadSuccess:function(d){if(typeof opt.table.get(this.id).onLoadSuccess=="function"){opt.table.get(this.id).onLoadSuccess(d)}a(".table [data-toggle='tooltip']").tooltip();if(opt.common.isNotEmpty(opt.table.options._total)&&opt.table.options._total){var b="\u6C47\u603B:&nbsp;&nbsp;";for(var c=0;c<opt.table.options._totalColumns.length;c++){b+=opt.table.options._totalColumns[c].title;b+=":";b+=opt.common.isEmpty(opt.common.getJsonValue(opt.table.options.totalData,opt.table.options._totalColumns[c].field))?"0.00":opt.common.getJsonValue(opt.table.options.totalData,opt.table.options._totalColumns[c].field)+"&nbsp;&nbsp;"}a("#_pageTotal").html(b)}a('.table [data-toggle="popover"]').popover();if(a.fn.iCheck!==undefined){a(".check-box:not(.noicheck),.radio-box:not(.noicheck)").each(function(){a(this).iCheck({checkboxClass:(typeof(a(this).data("style"))=="undefined")?"icheckbox-blue":("icheckbox_"+(a(this).data("style")||"square-blue")),radioClass:(typeof(a(this).data("style"))=="undefined")?"iradio-blue":("iradio_"+(a(this).data("style")||"square-blue"))})})}if(a(".table .time-input").length>0){layui.use("laydate",function(){var e=layui.laydate;a(".time-input").each(function(h,q){var f=a(q);var l=f.attr("data-type")||"date";var n=f.attr("data-format")||"yyyy-MM-dd";var k=f.attr("data-btn")||"clear|now|confirm",r=[];var p=f.attr("data-callback")||{};if(k){if(k.indexOf("|")>0){var m=k.split("|"),o=m.length;for(var g=0;g<o;g++){if("clear"===m[g]||"now"===m[g]||"confirm"===m[g]){r.push(m[g])}}}else{if("clear"===k||"now"===k||"confirm"===k){r.push(k)}}}else{r=["clear","now","confirm"]}e.render({elem:q,theme:"molv",trigger:"click",type:l,format:n,btns:r,done:function(s,j){if(typeof window[p]!="undefined"&&window[p] instanceof Function){window[p](s,j)}}})})})}if(a.fn.select2!==undefined){a.fn.select2.defaults.set("theme","bootstrap");a("select.form-control:not(.noselect2)").each(function(){if(typeof(a(this).attr("multiple"))=="undefined"){a(this).select2()}else{a(this).select2({allowClear:true,placeholder:""})}})}a.contextMenu({selector:".table a[data-target='copy']",trigger:"right",autoHide:true,items:{copy:{name:a.i18n.prop("\u590D\u5236\u6587\u672C"),icon:"fa-copy",callback:function(g,f){var e=a(this).prev();e.select();if(document.execCommand("copy")){window.opt.modal.msg(a.i18n.prop("\u590D\u5236\u6210\u529F")+"!")}}}}})},destroy:function(c){var b=opt.common.isEmpty(c)?opt.table.options.id:c;a("#"+b).bootstrapTable("destroy")},serialNumber:function(f,g){var b=opt.common.isEmpty(g)?opt.table.options.id:g;var e=a("#"+b).bootstrapTable("getOptions");var d=e.pageSize;var c=e.pageNumber;return d*(c-1)+f+1},tooltip:function(k,c,e,f){var g=opt.common.isEmpty(c)?20:c;var j=opt.common.isEmpty(e)?false:e;var h="";var l=opt.common.nullToStr(k);var b=opt.common.isEmpty(f)?"copy":f;if(l.length>g){if(j){h="..."+l.substr(l.length-g,g)}else{h=l.substr(0,g)+"..."}l=l.replace(/\'/g,"&apos;");l=l.replace(/\"/g,"&quot;");var d=[];d.push(opt.common.sprintf('<input style="opacity: 0;position: absolute;z-index:-1" type="text" value="%s"/>',l));d.push(opt.common.sprintf('<a href="###" class="tooltip-show" data-toggle="tooltip" data-target="%s" title="%s">%s</a>',b,l,h));return d.join("")}else{h=l;return h}},dropdownToggle:function(b){var c=[];c.push('<div class="btn-group">');c.push('<button type="button" class="btn btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">');c.push('<i class="fa fa-cog"></i>&nbsp;<span class="fa fa-chevron-down"></span></button>');c.push('<ul class="dropdown-menu">');c.push(b.replace(/<a/g,"<li><a").replace(/<\/a>/g,"</a></li>"));c.push("</ul>");c.push("</div>");return c.join("")},imageView:function(e,b,d,f){if(opt.common.isEmpty(d)){d="auto"}if(opt.common.isEmpty(b)){b="auto"}var c=opt.common.isEmpty(f)?"self":f;if(opt.common.isNotEmpty(e)){return opt.common.sprintf("<img class='img-circle img-xs' data-height='%s' data-width='%s' data-target='%s' src='%s'/>",b,d,c,e)}else{return opt.common.nullToStr(e)}},search:function(c,f,d){opt.table.set(c);var b;if(opt.common.isEmpty(f)){if(opt.common.isEmpty(opt.table.options.formId)){b=a("form").attr("id")}else{b=opt.table.options.formId}}else{b=f}var e=opt.common.isEmpty(c)?a("#"+opt.table.options.id).bootstrapTable("getOptions"):a("#"+c).bootstrapTable("getOptions");e.queryParams=function(h){var g=opt.common.formToJSON(b);if(opt.common.isNotEmpty(d)){a.each(d,function(j){g[j]=d[j]})}g.__limit=h.limit;g.__page=h.offset/h.limit+1;g.searchValue=h.search;g.__sidx=h.sort;g.__order=h.order;return g};if(opt.common.isNotEmpty(c)){a("#"+c).bootstrapTable("refresh",e)}else{a("#"+opt.table.options.id).bootstrapTable("refresh",e)}},exportExcel:function(b){opt.table.set();opt.modal.confirm("\u786E\u5B9A\u5BFC\u51FA\u6240\u6709"+opt.table.options.modalName+"\u5417\uFF1F",function(){var c=opt.common.isEmpty(b)?a("form").attr("id"):b;opt.modal.loading("\u6B63\u5728\u5BFC\u51FA\u6570\u636E\uFF0C\u8BF7\u7A0D\u540E...");a.post(opt.table.options.exportUrl,a("#"+c).serializeArray(),function(d){if(d.code==opt.variable.web_status.SUCCESS){window.location.href=baseURL+"excel/download?fileName="+encodeURI(d.msg)}else{if(d.code==opt.variable.web_status.WARNING){opt.modal.alertWarning(d.msg)}else{opt.modal.alertError(d.msg)}}opt.modal.closeLoading()})})},importTemplate:function(){table.set();a.get(table.options.importTemplateUrl,function(b){if(b.code==web_status.SUCCESS){window.location.href=ctx+"common/download?fileName="+encodeURI(b.msg)+"&delete="+true}else{if(b.code==web_status.WARNING){opt.modal.alertWarning(b.msg)}else{opt.modal.alertError(b.msg)}}})},importExcel:function(c){table.set();var b=opt.common.isEmpty(c)?"importTpl":c;layer.open({type:1,area:["400px","230px"],fix:false,maxmin:true,shade:0.3,title:"\u5BFC\u5165"+table.options.modalName+"\u6570\u636E",content:a("#"+b).html(),btn:['<i class="fa fa-check"></i> \u5BFC\u5165','<i class="fa fa-remove"></i> \u53D6\u6D88'],shadeClose:true,btn1:function(e,d){var f=d.find("#file").val();if(f==""||(!opt.common.endWith(f,".xls")&&!opt.common.endWith(f,".xlsx"))){opt.modal.msgWarning("\u8BF7\u9009\u62E9\u540E\u7F00\u4E3A \u201Cxls\u201D\u6216\u201Cxlsx\u201D\u7684\u6587\u4EF6\u3002");return false}var e=layer.load(2,{shade:false});opt.modal.disable();var g=new FormData();g.append("file",a("#file")[0].files[0]);g.append("updateSupport",a("input[name='updateSupport']").is(":checked"));a.ajax({url:table.options.importUrl,data:g,cache:false,contentType:false,processData:false,type:"POST",success:function(h){if(h.code==web_status.SUCCESS){opt.modal.closeAll();opt.modal.alertSuccess(h.msg);a.table.refresh()}else{if(h.code==web_status.WARNING){layer.close(e);opt.modal.enable();opt.modal.alertWarning(h.msg)}else{layer.close(e);opt.modal.enable();opt.modal.alertError(h.msg)}}}})}})},refresh:function(c){var b=opt.common.isEmpty(c)?opt.table.options.id:c;a("#"+b).bootstrapTable("refresh",{silent:true})},selectColumns:function(b){var c=a.map(a("#"+opt.table.options.id).bootstrapTable("getSelections"),function(e){return e[b]});if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var d=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isNotEmpty(d)){c=a.map(opt.table.rememberSelecteds[opt.table.options.id],function(e){return e[b]})}}return opt.common.uniqueFn(c)},affectedRowIds:function(d){var c=opt.common.isEmpty(opt.table.options.uniqueId)?opt.table.options.columns[1].field:opt.table.options.uniqueId;var b;if(a.isArray(d)){b=a.map(d,function(e){return e[c]})}else{b=[d[c]]}return b},selectFirstColumns:function(){var b=a.map(a("#"+opt.table.options.id).bootstrapTable("getSelections"),function(d){return d[opt.table.options.columns[1].field]});if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var c=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isNotEmpty(c)){b=a.map(c,function(d){return d[opt.table.options.columns[1].field]})}}return opt.common.uniqueFn(b)},selectAllColumns:function(){var b;if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var c=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isNotEmpty(c)){b=a.map(c,function(d){return d[opt.table.options.uniqueId]})}else{b=[]}}if(opt.common.isEmpty(b)||b.length==0){b=a.map(a("#"+opt.table.options.id).bootstrapTable("getAllSelections"),function(d){return d});b=a.table.affectedRowIds(b)}return opt.common.uniqueFn(b)},selectAllColumnRows:function(){var b;if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var c=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isNotEmpty(c)){return c}else{b=[]}}if(opt.common.isEmpty(b)||b.length==0){b=a.map(a("#"+opt.table.options.id).bootstrapTable("getAllSelections"),function(d){return d});return b}},selectDictLabel:function(b,c){var d=[];a.each(b,function(f,g){if(g.dictValue==(""+c)){var e=opt.common.equals("default",g.listClass)||opt.common.isEmpty(g.listClass)?"":"badge badge-"+g.listClass;if(!opt.common.isEmpty(g.cssClass)){e=opt.common.isEmpty(g.cssClass)?"":g.cssClass}if(!opt.common.isEmpty(g.cssStyle)){e=g.cssStyle}if(!opt.common.isEmpty(g.cssStyle)){d.push(opt.common.sprintf("<span style='%s'>%s</span>",e,a.i18n.prop(g.dictLabel)))}else{d.push(opt.common.sprintf("<span class='%s'>%s</span>",e,a.i18n.prop(g.dictLabel)))}return false}if(opt.common.isEmpty(c)&&g.isDefault==="Y"){var e=opt.common.equals("default",g.listClass)||opt.common.isEmpty(g.listClass)?"":"badge badge-"+g.listClass;if(!opt.common.isEmpty(g.cssClass)){e=opt.common.isEmpty(g.cssClass)?"":g.cssClass}d.push(opt.common.sprintf("<span class='%s'>%s</span>",e,a.i18n.prop(g.dictLabel)));return false}});return d.join("")},selectDictLabels:function(c,b){var e=[];b=b+"";b=b||"";var d=b.split(",");a.each(d,function(f,g){a.each(c,function(j,k){if(k.dictValue==(""+g)){var h=opt.common.equals("default",k.listClass)||opt.common.isEmpty(k.listClass)?"":"badge badge-"+k.listClass;if(!opt.common.isEmpty(k.cssClass)){h=opt.common.isEmpty(k.cssClass)?"":k.cssClass}if(!opt.common.isEmpty(k.cssStyle)){h=k.cssStyle}if(!opt.common.isEmpty(k.cssStyle)){e.push(opt.common.sprintf("<span style='%s'>%s</span>",h,a.i18n.prop(k.dictLabel)))}else{e.push(opt.common.sprintf("<span class='%s'>%s</span>",h,a.i18n.prop(k.dictLabel)))}return false}if(opt.common.isEmpty(g)&&k.isDefault==="Y"){var h=opt.common.equals("default",k.listClass)||opt.common.isEmpty(k.listClass)?"":"badge badge-"+k.listClass;if(!opt.common.isEmpty(k.cssClass)){h=opt.common.isEmpty(k.cssClass)?"":k.cssClass}e.push(opt.common.sprintf("<span class='%s'>%s</span>",h,a.i18n.prop(k.dictLabel)));return false}})});return e.join(",")},showColumn:function(c,d){opt.table.set(d);var b=opt.common.isEmpty(d)?opt.table.options.id:d;a("#"+b).bootstrapTable("showColumn",c)},hideColumn:function(c,d){opt.table.set(d);var b=opt.common.isEmpty(d)?opt.table.options.id:d;a("#"+b).bootstrapTable("hideColumn",c)},uncheck:function(c,d){opt.table.set(d);var b=opt.common.isEmpty(d)?opt.table.options.id:d;a("#"+b).bootstrapTable("uncheck",c)},updataData:function(j,c){opt.table.set(c);var m=opt.common.isEmpty(c)?opt.table.options.id:c;var e=[];for(var n=0;n<=j;n++){var d=a("#"+m+' tr[data-index="'+n+'"] td');var g={};for(var h=0;h<d.length;h++){var b=a(d[h]).find("input");if(b.length==1){var r=a(d[h]).find("select");var p=opt.table.options.columns[h].field;if(opt.common.isNotEmpty(b.val())){g[p]=b.val()}else{if(opt.common.isNotEmpty(r.val())){g[p]=r.val()}else{g[p]=""}}}else{var r=a(d[h]).find("select");var p=opt.table.options.columns[h].field;if(opt.common.isNotEmpty(a(b[0]).val())){var l=a(b[1]).attr("name").split(".");if(l.length>1){g[p]=a(b[0]).val();var k=l;var f={},o=k.length-1;while(o>-1){var q={};q[k[o]]=f;f=q;if(o==(k.length-1)){f[k[o]]=a(b[1]).val()}o--}g=opt.common.extend(f,g)}else{g[p]=a(b[0]).val();g[a(b[1]).attr("name")]=a(b[1]).val()}}else{if(opt.common.isNotEmpty(r.val())){g[p]=r.val()}else{g[p]=""}}}}e.push({index:n,row:g})}a("#"+m).bootstrapTable("updateRow",e)},removeData:function(c,g){var f=this;opt.table.set();c=opt.common.isEmpty(c)?"index":c;var b=opt.common.isEmpty(g)?opt.table.options.id:g;var h=a("#"+b).bootstrapTable("getSelections");if(h.length==0){opt.modal.error(a.i18n.prop("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E"));return}var e=a("#"+b).bootstrapTable("getData").length;f.updataData(e);var j=[];for(var d=0;d<h.length;d++){j[d]=h[d][c]}a("#"+opt.table.options.id).bootstrapTable("remove",{field:c,values:j})},addColumn:function(f,e){var d=this;opt.table.set(e);var b=opt.common.isEmpty(e)?opt.table.options.id:e;var c=a("#"+b).bootstrapTable("getData").length;d.updataData(c);a("#"+b).bootstrapTable("insertRow",{index:c+1,row:f});if(a(".time-input").length>0){layui.use("laydate",function(){var g=layui.laydate;a(".time-input").each(function(l,s){var h=a(s);var n=h.attr("data-type")||"date";var p=h.attr("data-format")||"yyyy-MM-dd";var m=h.attr("data-btn")||"clear|now|confirm",t=[];var r=h.attr("data-callback")||{};if(m){if(m.indexOf("|")>0){var o=m.split("|"),q=o.length;for(var k=0;k<q;k++){if("clear"===o[k]||"now"===o[k]||"confirm"===o[k]){t.push(o[k])}}}else{if("clear"===m||"now"===m||"confirm"===m){t.push(m)}}}else{t=["clear","now","confirm"]}g.render({elem:s,theme:"molv",trigger:"click",type:n,format:p,btns:t,done:function(u,j){if(typeof window[r]!="undefined"&&window[r] instanceof Function){window[r](u,j)}}})})})}}}})})(jQuery);(function(a){a.extend({bttTable:{},treeTable:{init:function(c){var e={id:"bootstrap-tree-table",type:1,height:0,rootIdValue:"0",ajaxParams:{},sortName:"",sortOrder:"asc",async:false,toolbar:"toolbar",striped:false,pageSize:12,pageList:[12,24,32],expandColumn:1,showSearch:true,showRefresh:true,showColumns:true,expandAll:true,expandFirst:true,bordered:false,asynUrl:null};var c=a.extend(e,c);var b=false;if(!opt.common.isEmpty(c.columns.length)){for(var d=0;d<c.columns.length;d++){if(opt.common.isEmpty(opt.common.getJsonValue(c.columns[d],"align"))){c.columns[d].align="center"}if(opt.common.isEmpty(opt.common.getJsonValue(c.columns[d],"halign"))){c.columns[d].halign="center"}if(opt.common.getJsonValue(c.columns[d],"field")==="selectItem"){b=true}}}if(!b){c.expandColumn=0}opt.table.options=c;opt.table.config[c.id]=c;a.bttTable=a("#"+c.id).bootstrapTreeTable({id:c.id,code:c.code,parentCode:c.parentCode,type:"post",url:c.url,async:c.async,asynUrl:c.asynUrl,data:c.data,ajaxParams:c.ajaxParams,sortName:c.sortName,sortOrder:c.sortOrder,rootIdValue:c.rootIdValue,height:c.height,pageSize:c.pageSize,pageList:c.pageList,expandColumn:c.expandColumn,striped:c.striped,bordered:c.bordered,toolbar:"#"+c.toolbar+"-"+c.id,showSearch:c.showSearch,showRefresh:c.showRefresh,showColumns:c.showColumns,expandAll:c.expandAll,expandFirst:c.expandFirst,columns:c.columns,onClickRow:a.treeTable.onClickRow,responseHandler:a.treeTable.responseHandler})},search:function(d){var b=opt.common.isEmpty(d)?a("form").attr("id"):d;var c=opt.common.formToJSON(b);c.__refre=true;a.bttTable.bootstrapTreeTable("refresh",c)},refresh:function(){a.bttTable.bootstrapTreeTable("refresh")},selectColumns:function(b){var c=a.map(a.bttTable.bootstrapTreeTable("getSelections"),function(d){return d[b]});return opt.common.uniqueFn(c)},onClickRow:function(c){var b="toolbar-"+opt.table.get(this.id).id;a("#"+b+" .multiple").toggleClass("disabled",false);a("#"+b+" .single").toggleClass("disabled",false);if(typeof opt.table.get(this.id).onClickRow=="function"){opt.table.get(this.id).onClickRow(c)}},responseHandler:function(b){if(b.code!=undefined&&b.code!=0){opt.modal.error(b.msg);return[]}else{if(typeof opt.table.get(this.id).responseHandler=="function"){opt.table.get(this.id).responseHandler(b)}return b}}}})})(jQuery);(function(a){a.extend({_tree:{},tree:{_option:{},_lastValue:{},init:function(c){var e={ajxType:"GET",ajaxParams:{},id:"tree",expandLevel:0,view:{selectedMulti:false,nameIsHTML:true},check:{enable:true,chkStyle:"radio",nocheckInherit:true},data:{key:{title:"name",name:"title"},simpleData:{enable:true}},displayLen:0};var c=a.extend(e,c);a.tree._option=c;var d={callback:{onClick:c.onClick,onCheck:c.onCheck,onDblClick:c.onDblClick,onCollapse:c.OnCollapse,onExpand:c.OnExpand,beforeClick:c.beforeClick},check:c.check,view:c.view,data:c.data};var b={url:c.url,type:c.ajxType,dataType:"JSON",data:c.ajaxParams,success:function(m){var l;if(m.__proto__.constructor==Array){l=m}else{if(m.code==opt.variable.web_status.SUCCESS){for(var h in m){if(Array.prototype==m[h].__proto__){l=m[h]}}for(var g=0;g<l.length;g++){for(var h in l[g]){if(h=="url"){delete l[g][h]}}}}else{opt.modal.error(m.msg);return}}if(c.displayLen!=0){for(var g=0;g<l.length;g++){for(var h in l[g]){if(h=="title"){l[g][h]=opt.common.subString(l[g][h],c.displayLen,true)}}}}var k=a("#treeId").val();tree=a.fn.zTree.init(a("#"+c.id),d,l);a._tree=tree;if(c.expandLevel==1){var j=tree.getNodesByFilter(function(n){return n.level==0},true);tree.expandNode(j,true,null,null)}if(c.expandLevel==2){tree.expandAll(true)}if(c.check.enable){if(!opt.common.isEmpty(c._list)){var f=c._list.split(",");for(var g=0;g<f.length;g++){var j=tree.getNodeByParam(opt.common.isEmpty(c.data.simpleData.idKey)?"id":c.data.simpleData.idKey,f[g]);if(j!=null){tree.checkNode(j,true);tree.selectNode(j)}}}if(!opt.common.isEmpty(k)){var f=k.split(",");for(var g=0;g<f.length;g++){var j=tree.getNodeByParam(opt.common.isEmpty(c.data.simpleData.idKey)?"id":c.data.simpleData.idKey,f[g]);if(j!=null){tree.checkNode(j,true);tree.selectNode(j)}}}}if(typeof(c.callBack)==="function"){c.callBack(a._tree)}}};if(opt.common.equalsIgnoreCase(b.type,"POST")&&opt.common.isNotEmpty(a('meta[name="csrf-token"]').attr("content"))){b=opt.common.extend(b,{headers:{"X-CSRF-Token":a('meta[name="csrf-token"]').attr("content")}})}a.ajax(b)},expandAll:function(){a._tree.expandAll(true)},searchNode:function(){var c=opt.common.trim(a("#keyword").val());if(a.tree._lastValue==c){return}a.tree._lastValue=c;var b=a._tree.getNodes();if(c==""){a.tree.showAllNode(b);return}a.tree.hideAllNode(b);a.tree.updateNodes(a._tree.getNodesByParamFuzzy("name",c))},selectByIdName:function(c,b){if(opt.common.isNotEmpty(c)&&c==opt.common.getJsonValue(b,a.tree._option.data.simpleData.idKey)){a._tree.selectNode(b,true)}},showAllNode:function(b){b=a._tree.transformToArray(b);for(var c=b.length-1;c>=0;c--){if(b[c].getParentNode()!=null){a._tree.expandNode(b[c],true,false,false,false)}else{a._tree.expandNode(b[c],true,true,false,false)}a._tree.showNode(b[c]);a.tree.showAllNode(b[c].children)}},hideAllNode:function(c){var b=a.fn.zTree.getZTreeObj("tree");var c=a._tree.transformToArray(c);for(var d=c.length-1;d>=0;d--){a._tree.hideNode(c[d])}},showParent:function(c){var b;while((b=c.getParentNode())!=null){a._tree.showNode(b);a._tree.expandNode(b,true,false,false);c=b}},getParentIds:function(d){if(opt.common.isEmpty(d)){return""}var b=d.id;var c=d.getParentNode();if(c!=null){b=b+","+a.tree.getParentIds(c)}return b},showChildren:function(d){if(d.isParent){for(var b in d.children){var c=d.children[b];a._tree.showNode(c);a.tree.showChildren(c)}}},updateNodes:function(c){a._tree.showNodes(c);for(var d=0,b=c.length;d<b;d++){var e=c[d];a.tree.showChildren(e);a.tree.showParent(e)}},refreshNode:function(){a._tree.reAsyncChildNodes(null,"refresh")},getCheckedNodes:function(c){var e=opt.common.isEmpty(c)?(opt.common.isEmpty(a.tree._option.data.simpleData.idKey)?"id":a.tree._option.data.simpleData.idKey):c;var b=a._tree.getCheckedNodes(true);var d=a.map(b,function(f){return f[e]}).join();return d.split(",")},notAllowParents:function(b){return true},notAllowLastLevel:function(d){var b=d.getSelectedNodes();for(var c=0;c<b.length;c++){if(!b[c].isParent){a.modal.msgError("\u4E0D\u80FD\u9009\u62E9\u6700\u540E\u5C42\u7EA7\u8282\u70B9\uFF08"+b[c].name+"\uFF09");return false}}return true},toggleSearch:function(){a("#search").slideToggle(200);a("#btnShow").toggle();a("#btnHide").toggle();a("#keyword").focus()},checkAllNodes:function(b){a._tree.checkAllNodes(b)},collapse:function(){a._tree.expandAll(false)},expand:function(){a._tree.expandAll(true)},callBackTree:function(b,d){var n=b.find("iframe")[0].contentWindow.$._tree;if(a.tree.notAllowParents(n)){var j=layer.getChildFrame("body",d);var h=j.find("#treeId").val();var k=j.find("#treeName").val();var m=j.find("#parentIds").val();var l=j.find("#type").val();if(opt.common.isEmpty(k)){if(n.setting.check.enable){var f=h.split(",");for(var g=0;g<f.length;g++){var e=n.getNodeByParam(n.setting.data.simpleData.idKey,f[g]);if(e!=null){k+=e.name+","}}if(opt.common.isEmpty(k)){k=k.substr(0,k.length-1)}}else{k=n.getNodesByParam(n.setting.data.simpleData.idKey,h,null)[0].name}}var c='{"id":"'+h+'","name":"'+k+'","parentIds":"'+m+'","type":"'+l+'"}';return a.parseJSON(c)}else{return false}}}})})(jQuery);+function(){var b=opt.getCookie("_lang");$.i18n.properties({path:baseURL+"i18n/",name:"i18n",language:b,cache:true,mode:"map"});var a=opt.storage.get("skin");if(a&&($.inArray(a,opt.variable.skins)>=0)){opt.changeSkin(a)}if(window.layer!==undefined){layer.config({extend:"moon/style.css",skin:"layer-ext-moon"})}}();!function(){var b={open:"{{",close:"}}"};var a={exp:function(f){return new RegExp(f,"g")},query:function(h,f,j){var g=["#([\\s\\S])+?","([^{#}])*?"][h||0];return d((f||"")+b.open+g+b.close+(j||""))},escape:function(f){return String(f||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},error:function(h,f){var g="Laytpl Error\uFF1A";typeof console==="object"&&console.error(g+h+"\n"+(f||""));return g+h}};var d=a.exp,e=function(f){this.tpl=f};e.pt=e.prototype;window.errors=0;e.pt.parse=function(g,j){var h=this,f=g;var l=d("^"+b.open+"#",""),m=d(b.close+"$","");g=g.replace(/\s+|\r|\t|\n/g," ").replace(d(b.open+"#"),b.open+"# ").replace(d(b.close+"}"),"} "+b.close).replace(/\\/g,"\\\\").replace(d(b.open+"!(.+?)!"+b.close),function(n){n=n.replace(d("^"+b.open+"!"),"").replace(d("!"+b.close),"").replace(d(b.open+"|"+b.close),function(o){return o.replace(/(.)/g,"\\$1")});return n}).replace(/(?="|')/g,"\\").replace(a.query(),function(n){n=n.replace(l,"").replace(m,"");return'";'+n.replace(/\\/g,"")+';view+="'}).replace(a.query(1),function(n){var o='"+(';if(n.replace(/\s/g,"")===b.open+b.close){return""}n=n.replace(d(b.open+"|"+b.close),"");if(/^=/.test(n)){n=n.replace(/^=/,"");o='"+_escape_('}return o+n.replace(/\\/g,"")+')+"'});g='"use strict";var view = "'+g+'";return view;';try{h.cache=g=new Function("d, _escape_",g);return g(j,a.escape)}catch(k){delete h.cache;return a.error(k,f)}};e.pt.render=function(h,j){var g=this,f;if(!h){return a.error("no data")}f=g.cache?g.cache(h,a.escape):g.parse(g.tpl,h);if(!j){return f}j(f)};var c=function(f){if(typeof f!=="string"){return a.error("Template not found")}return new e(f)};c.config=function(f){f=f||{};for(var g in f){b[g]=f[g]}};c.v="1.2.0";"function"==typeof define?define(function(){return c}):"undefined"!=typeof exports?module.exports=c:window.laytpl=c}();+function(d){var b="lte.boxwidget";var f={animationSpeed:500,collapseTrigger:'[data-widget="collapse"]',removeTrigger:'[data-widget="remove"]',collapseIcon:"fa-minus",expandIcon:"fa-plus",removeIcon:"fa-times"};var a={data:".box",collapsed:".collapsed-box",header:".box-header",body:".box-body",footer:".box-footer",tools:".box-tools"};var h={collapsed:"collapsed-box"};var j={collapsing:"collapsing.boxwidget",collapsed:"collapsed.boxwidget",expanding:"expanding.boxwidget",expanded:"expanded.boxwidget",removing:"removing.boxwidget",removed:"removed.boxwidget"};var e=function(l,k){this.element=l;this.options=k;this._setUpListeners()};e.prototype.toggle=function(){var k=!d(this.element).is(a.collapsed);if(k){this.collapse()}else{this.expand()}};e.prototype.expand=function(){var m=d.Event(j.expanded);var n=d.Event(j.expanding);var l=this.options.collapseIcon;var k=this.options.expandIcon;d(this.element).removeClass(h.collapsed);d(this.element).children(a.header+", "+a.body+", "+a.footer).children(a.tools).find("."+k).removeClass(k).addClass(l);d(this.element).children(a.body+", "+a.footer).slideDown(this.options.animationSpeed,function(){d(this.element).trigger(m)}.bind(this)).trigger(n)};e.prototype.collapse=function(){var l=d.Event(j.collapsed);var n=d.Event(j.collapsing);var m=this.options.collapseIcon;var k=this.options.expandIcon;d(this.element).children(a.header+", "+a.body+", "+a.footer).children(a.tools).find("."+m).removeClass(m).addClass(k);d(this.element).children(a.body+", "+a.footer).slideUp(this.options.animationSpeed,function(){d(this.element).addClass(h.collapsed);d(this.element).trigger(l)}.bind(this)).trigger(expandingEvent)};e.prototype.remove=function(){var k=d.Event(j.removed);var l=d.Event(j.removing);d(this.element).slideUp(this.options.animationSpeed,function(){d(this.element).trigger(k);d(this.element).remove()}.bind(this)).trigger(l)};e.prototype._setUpListeners=function(){var k=this;d(this.element).on("click",this.options.collapseTrigger,function(l){if(l){l.preventDefault()}k.toggle(d(this));return false});d(this.element).on("click",this.options.removeTrigger,function(l){if(l){l.preventDefault()}k.remove(d(this));return false})};function g(k){return this.each(function(){var n=d(this);var m=n.data(b);if(!m){var l=d.extend({},f,n.data(),typeof k=="object"&&k);n.data(b,(m=new e(n,l)))}if(typeof k=="string"){if(typeof m[k]=="undefined"){throw new Error("No method named "+k)}m[k]()}})}var c=d.fn.boxWidget;d.fn.boxWidget=g;d.fn.boxWidget.Constructor=e;d.fn.boxWidget.noConflict=function(){d.fn.boxWidget=c;return this};d(window).on("load",function(){d(a.data).each(function(){g.call(d(this))})})}(jQuery);(function(a,b){b.fn.serializeJson=function(){var c={};var d=this.serializeArray();b(d).each(function(){if(c[this.name]){if(b.isArray(c[this.name])){c[this.name].push(this.value)}else{c[this.name]=[c[this.name],this.value]}}else{c[this.name]=this.value}});return c}})(window,jQuery);
