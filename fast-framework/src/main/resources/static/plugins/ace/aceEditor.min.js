/*!
 * 在线代码编辑器 基于1.4.12
 * Copyright (c) 2020-Now http://www.j2eefast.com All rights reserved.
 * No deletion without permission
 * @author ZhouHZhou
 * @date 2021年07月11日21:11:55
 * @version v1.0
 */
if(typeof jQuery==="undefined"){throw new Error("fastJS JavaScript requires jQuery")}(function(d){var e=function(j){var g=arguments,f=true,h=1;j=j.replace(/%s/g,function(){var i=g[h++];if(typeof i==="undefined"){f=false;return""}return i});return f?j:""};var c=function(g,i,h,f){var j=i;if(typeof i==="string"){var k=i.split(".");if(k.length>1){j=window;d.each(k,function(l,m){j=j[m]})}else{j=window[i]}}if(typeof j==="object"){return j}if(typeof j==="function"){return j.apply(g,h)}if(!j&&typeof i==="string"&&e.apply(this,[i].concat(h))){return e.apply(this,[i].concat(h))}return f};var b=function(g,f){this.options=f;this.$el=d(g);this.$el_=this.$el.clone();this.data=[];this.init()};b.prototype.init=function(){this.initLocale();this.initAce()};b.prototype.initAce=function(){var g=this;var f=d("#"+g.options.id).html();this.editor=ace.edit(g.options.id);var h="eclipse";var i="ftl";this.editor.setTheme("ace/theme/"+g.options.theme);this.editor.session.setMode("ace/mode/"+g.options.lang);this.editor.setFontSize(g.options.fontSize);this.editor.setReadOnly(g.options.readOnly);this.editor.setOption("wrap","free");this.langTools=ace.require("ace/ext/language_tools");this.editor.setOptions({enableBasicAutocompletion:true,enableSnippets:true,enableLiveAutocompletion:true});this.editor.commands.addCommand({name:"myCommand",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(j){if(typeof g.options.saveAceCallback=="function"){g.options.saveAceCallback(g.options.id,j)}},readOnly:true});if(g.options.hiddenId!=""){d("#"+g.options.hiddenId).val(g.options.base46?Base64.toBase64(f):f);this.editor.session.on("change",function(){var j=g.editor.getValue();d("#"+g.options.hiddenId).val(g.options.base46?Base64.toBase64(j):j)})}this.langTools.addCompleter({getCompletions:function(j,l,n,k,m){if(k.length===0){return m(null,[])}else{return m(null,g.data)}}});this.setHeight(this.options.height);this.setTop(this.options.top);console.log(this.$el.offset().top);if(d("#"+this.options.id+"_toolBar")){this.$el.append(d("#"+this.options.id+"_toolBar"))}};b.prototype.initLocale=function(){var h=this;if(typeof ace==="undefined"){throw new Error("ace 对象为空,请检查是否引入!")}d.extend(this.options,d.fn.aceEditor.locales["data"]);if(h.options.lang=="ftl"||h.options.lang=="freeMarker"){h.data=h.options.sysFtlKeydata();if(h.options.keywordsData&&h.options.keywordsData.length>0){for(var g=0;g<h.options.keywordsData.length;g++){var f={};f.meta=h.options.keywordsData[g].meta;f.caption=h.options.keywordsData[g].caption;f.value=h.options.keywordsData[g].value;h.data.push(f)}}}};b.prototype.setLang=function(f){return f&&(f=="java"||f=="ftl"||f=="html")&&this.editor.session.setMode("ace/mode/"+f)};b.prototype.setTheme=function(f){f=f||(f=="eclipse");this.editor.setTheme("ace/theme/"+f)};b.prototype.setFontSize=function(f){f=(typeof f=="number")?f:14;this.editor.setFontSize(f)};b.prototype.setReadOnly=function(g){this.editor.setReadOnly(g)};b.prototype.insert=function(f,g){this.editor.insert(f,g);this.editor.focus()};b.prototype.getValue=function(){return this.editor.getValue()};b.prototype.setHeight=function(f){if(typeof f!="undefined"&&f){d("#"+this.options.id).height(f);this.editor.resize()}};b.prototype.setTop=function(f){if(typeof f!="undefined"&&f){d("#"+this.options.id).css("top",f+"px");this.editor.resize()}};b.prototype.resize=function(){this.editor.resize()};b.LOCALES={};b.LOCALES["data"]=b.LOCALES.data={sysFtlKeydata:function(){var f=[];f.push({meta:"javascript",caption:"script(脚本)",value:"script"});f.push({meta:"javascript",caption:"var",value:"var"});f.push({meta:"javascript",caption:"return",value:"return"});f.push({meta:"javascript",caption:"opt(fast.JS对象)",value:"opt"});f.push({meta:"javascript",caption:"opt.operate(操作处理)",value:"opt.operate"});f.push({meta:"javascript",caption:"opt.validate(校验封装)",value:"opt.validate"});f.push({meta:"javascript",caption:"opt.form(表单)",value:"opt.form"});f.push({meta:"javascript",caption:"opt.modal(弹出层)",value:"opt.modal"});f.push({meta:"javascript",caption:"opt.common(常用方法)",value:"opt.common"});f.push({meta:"javascript",caption:"opt.storage(本地浏览器缓存)",value:"opt.storage"});f.push({meta:"javascript",caption:"opt.storage(本地浏览器缓存)",value:"opt.storage"});return f}};d.extend(b.DEFAULTS,b.LOCALES["data"]);b.DEFAULTS={id:"aceEdit",theme:"eclipse",lang:"ftl",keywordsData:[],fontSize:12,readOnly:true,height:undefined,top:undefined,hiddenId:"",base46:true};var a=["setLang","setTheme","setFontSize","setReadOnly","getValue","setHeight","insert","setTop","resize"];d.fn.aceEditor=function(g){var h,f=Array.prototype.slice.call(arguments,1);this.each(function(){var k=d(this),j=k.data("aceEditor.data"),i=d.extend({},b.DEFAULTS,k.data(),typeof g==="object"&&g);if(typeof g==="string"){if(d.inArray(g,a)<0){throw new Error("Unknown method: "+g)
}if(!j){return}h=j[g].apply(j,f);if(g==="destroy"){k.removeData("aceEditor.data")}}if(!j){k.data("aceEditor.data",(j=new b(this,i)))}});return typeof h==="undefined"?this:h};d.fn.aceEditor.Constructor=b;d.fn.aceEditor.defaults=b.DEFAULTS;d.fn.aceEditor.locales=b.LOCALES;d.fn.aceEditor.utils={sprintf:e};d(function(){d('[data-toggle="aceEditor"]').aceEditor()})})(jQuery);