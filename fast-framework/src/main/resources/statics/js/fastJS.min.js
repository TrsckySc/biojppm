/*!
 * Copyright (c) 2020-Now http://www.j2eefast.com All rights reserved.
 * fastJS 封装常用方法
 * @author ZhouHuan 二次封装 新增若干方法优化部分BUG
 * @date 2020-02-20
 * @version v1.0.10
 */
if(typeof jQuery==="undefined"){throw new Error("fastJS JavaScript requires jQuery")}(function(c,b,d){var a={variable:{navtab:null,_tabIndex:-999,tindex:0,pushMenu:null,version:"1.0.1",debug:true,table_type:{bootstrapTable:0,bootstrapTreeTable:1},modal_status:{SUCCESS:"success",FAIL:"error",WARNING:"warning"},web_status:{SUCCESS:"00000",FAIL:500,WARNING:"50001"},skins:["skin-blue","skin-black","skin-red","skin-yellow","skin-purple","skin-green","skin-blue-light","skin-black-light","skin-red-light","skin-yellow-light","skin-purple-light","skin-green-light"]},sidebarCollapse:function(){a.variable.pushMenu.expandOnHover();if(!c("body").hasClass("sidebar-collapse")){c('[data-layout="sidebar-collapse"]').click()}c('[data-toggle="push-menu"]').click()},pushMenuInit:function(){c(".main-sidebar").unbind("mouseenter").unbind("mouseleave")},wclearInterval:function(){b.clearInterval(a.variable.tindex)},getMessage:function(){c.getJSON("sys/user/info?_"+c.now(),function(e){})},outLogin:function(f,e){a.layer.open({type:1,title:false,closeBtn:false,area:"300px;",shade:0.8,id:"LAY_layuipro",btn:[c.i18n.prop("确定")],btnAlign:"c",moveType:1,content:'<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: red; font-weight: bold;"><span style="color:Yellow">'+f+"</span></br>"+e+"</div>",btn1:function(g){a.layer.close(g);b.location.href="logout"}})},debug:function(e){if(b.console&&a.variable.debug){console.log(e)}},toast:function(){if(c.toast){return c.toast}try{if(parent.$.toast){return parent.$.toast}if(parent.parent.$.toast){return parent.parent.$.toast}if(top.$.toast){return top.$.toast}}catch(f){}return null}(),error:function(e,f){a.modal.enable();if(a.toast){a.toast({heading:c.i18n.prop("警告"),text:e,hideAfter:4000,position:{right:7,bottom:36},showHideTransition:"slide",afterHidden:function(){if(typeof(f)==="function"){f("ok")}},icon:"error"})}else{a.modal.alertError(e)}},success:function(e,f){if(a.toast){a.toast({heading:c.i18n.prop("成功"),text:e,hideAfter:4000,position:{right:7,bottom:36},showHideTransition:"slide",afterHidden:function(){if(typeof(f)==="function"){f("ok")}},icon:"success"})}else{layui.use("layer",function(){var g=layui.layer;g.msg(e)});if(typeof(f)==="function"){f("ok")}}},warning:function(e,f){if(a.toast){a.toast({heading:c.i18n.prop("警告"),text:e,hideAfter:4000,position:{right:7,bottom:36},showHideTransition:"slide",afterHidden:function(){if(typeof(f)==="function"){f("ok")}},icon:"warning"})}else{a.modal.alertWarning(e)}},changeSkin:function(e){c.each(a.variable.skins,function(f){c("body").removeClass(a.variable.skins[f])});c("body").addClass(e);a.storage.set("skin",e);return false},createMenuItem:function(l,f){if(top.location!==self.location){var j=a.common.randomString(16);var h,g;if(l==d||c.trim(l).length==0){return false}if(a.common.isEmpty(parent.opt.variable.navtab)){parent.opt.createMenuItem(l,f);return}var e=c(b.parent.document);if(c(".layui-tab-title li",e).length>0){c(".layui-tab-title li",e).each(function(){if(c(this).hasClass("layui-this")){h=c(this).attr("lay-id");g=c(this).children("em").data("module")}})}var k={href:l,icon:"fa fa-plus-square",panel:h,title:f,module:g,id:j};parent.opt.navTabAdd(k);return}else{a.selfLayer.open({type:2,maxmin:true,shadeClose:true,title:f,area:[(c(b).width()-100)+"px",(c(b).height()-100)+"px"],content:l})}},closeItem:function(g){if(top.location!=self.location){var f=c(b.parent.document);if(c(".layui-tab-title li",f).length>0){if(a.common.isNotEmpty(g)){c('.layui-tab-title li[lay-id="'+g+'"]',f).children('i.layui-tab-close[data-id="'+data.id+'"]').trigger("click")}else{c(".layui-tab-title li",f).each(function(){if(c(this).hasClass("layui-this")){c(this).children('i.layui-tab-close[data-id="'+c(this).attr("lay-id")+'"]').trigger("click")}})}}else{try{if(parent.opt.table.options.type==a.variable.table_type.bootstrapTable){parent.$.table.refresh()}else{if(parent.opt.table.options.type==a.variable.table_type.bootstrapTreeTable){parent.$.treeTable.refresh()}}}catch(h){}parent.opt.selfLayer.closeAll()}}else{b.opener=null;b.open("","_self");b.close()}},block:function(f,e){if(a.common.isNotEmpty(e)){c(e).block({message:'<div class="loaderbox"><div class="loading-activity"></div> '+c.i18n.prop(f)+"</div>"})}else{c.blockUI({message:'<div class="loaderbox"><div class="loading-activity"></div> '+c.i18n.prop(f)+"</div>"})}},unblock:function(e){if(a.common.isNotEmpty(e)){c(e).unblock()}else{c.unblockUI()}},template:function(h,f,g){var e=String(c("#"+h).html()).replace(/(\/\/\<!\-\-)|(\/\/\-\->)/g,""),f=f||[];if(typeof g=="function"){laytpl(e).render(f||[],function(j){g(j)});return null}return laytpl(e).render(f||[])},getCookie:function(f){if(document.cookie.length>0){var g=document.cookie.indexOf(f+"=");if(g!=-1){g=g+f.length+1;var e=document.cookie.indexOf(";",g);if(e==-1){e=document.cookie.length
    }return unescape(document.cookie.substring(g,e))}}return""},layer:function(){try{if(top.layer){return top.layer}if(parent.parent.layer){return parent.parent.layer}if(parent.layer){return parent.layer}}catch(f){}if(b.layer){return layer}return null}(),selfLayer:function(){if(b.layer){return layer}try{if(top.layer&&top.layer.window){return top.layer}if(parent.parent.layer&&parent.parent.layer.window){return parent.parent.layer}if(parent.layer&&parent.layer.window){return parent.layer}}catch(f){}return null}(),navDelTab:function(e){layui.element.tabDelete("main-tab",e).init()},navTabAdd:function(e){a.variable.navtab.tabAdd(e)},navToTab:function(e){layui.element.tabChange("main-tab",e)},navDelTabNow:function(){if(c(".layui-tab-title li").length>1){c(".layui-tab-title li").each(function(){if(c(this).attr("lay-id")!=0){a.navDelTab(c(this).attr("lay-id"))}})}},calSumWidth:function(f){var e=0;c(f).each(function(){e+=c(this).outerWidth(true)});return e},scrollToTab:function(j){var f=c("#larry-tab .layui-tab-title"),h=Math.abs(parseInt(f.css("margin-left"))),l=a.calSumWidth(c(j).prevAll()),n=Math.abs(parseInt(a.calSumWidth(c(j).nextAll())));var g=Math.abs(parseInt(f.children(".layui-tab-bar").outerWidth(true)));n=n-g;var k=f.outerWidth(true)-70;var o=0;var m=0;var e=210;f.children("li").each(function(){o+=c(this).outerWidth(true)});if(o<k){f.css("margin-left","0px");return false}if(n==0){m=o-k}if(l>k){m=parseInt((l/e))*e;if((m+k)>o){m=o-k}}f.css("margin-left",0-m+"px");return},scrollTabLeft:function(){var f=c("#larry-tab .layui-tab-title");var h=Math.abs(parseInt(f.css("margin-left")));var e=f.outerWidth(true)-70;var g=0;f.children("li").each(function(){g+=c(this).outerWidth(true)});var k=0;var j=210;if(g<e||h==0){f.css("margin-left","0px");return false}else{if(h>j){k=h-j}else{k=0}}f.css("margin-left",0-k+"px")},scrollTabRight:function(){var f=c("#larry-tab .layui-tab-title");var h=Math.abs(parseInt(f.css("margin-left")));var e=f.outerWidth(true)-70;var g=0;f.children("li").each(function(){g+=c(this).outerWidth(true)});var k=0;var j=210;if(g<e){f.css("margin-left","0px");return false}else{if((g-h-j)>e){k=h+j}else{k=g-e}f.css("margin-left",0-k+"px")}},storage:{set:function(e,f){b.localStorage.setItem(_username+e,f)},get:function(e){return b.localStorage.getItem(_username+e)},remove:function(e){b.localStorage.removeItem(_username+e)},clear:function(){b.localStorage.clear()}},table:{config:{},options:{},set:function(f){if(a.common.getLength(a.table.config)>1){var e=a.common.isEmpty(f)?c(event.currentTarget).parents(".bootstrap-table").find(".table").attr("id"):f;if(a.common.isNotEmpty(e)){a.table.options=a.table.get(e)}}},get:function(e){return a.table.config[e]},rememberSelecteds:{},rememberSelectedIds:{},},common:{isEmpty:function(e){if(e===null||this.trim(e)===""||typeof(e)=="undefined"){return true}return false},isPrimitive:function(e){return(typeof e==="string"||typeof e==="number"||typeof e==="symbol"||typeof e==="boolean")},isNotEmpty:function(e){return !a.common.isEmpty(e)},nullToStr:function(f,e){if(a.common.isEmpty(f)){return(a.common.isEmpty(e))?"":e}return f},visible:function(e){if(a.common.isEmpty(e)||e==true){return true}return false},trim:function(e){if(e==null){return""}return e.toString().replace(/(^\s*)|(\s*$)|\r|\n/g,"")},hideStr:function(f,e){if(a.common.isEmpty(f)){return"-"}else{return"..."+f.substr(f.length-e,e)}},equals:function(f,e){return f==e},equalsIgnoreCase:function(f,e){return String(f).toUpperCase()===String(e).toUpperCase()},split:function(h,f,e){if(a.common.isEmpty(h)){return null}var g=String(h).split(f);return e?g.slice(0,e-1):g},sprintf:function(h){var f=arguments,e=true,g=1;h=h.replace(/%s/g,function(){var j=f[g++];if(typeof j==="undefined"){e=false;return""}return j});return e?h:""},random:function(f,e){return Math.floor((Math.random()*e)+f)},randomString:function(f){f=f||32;var g="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678";var e=g.length;var h="";for(i=0;i<f;i++){h+=g.charAt(Math.floor(Math.random()*e))}return h},startWith:function(f,g){var e=new RegExp("^"+g);return e.test(f)},endWith:function(g,e){var f=new RegExp(e+"$");return f.test(g)},uniqueFn:function(h){var e=[];var g={};for(var f=0;f<h.length;f++){if(!g[h[f]]){g[h[f]]=true;e.push(h[f])}}return e},join:function(f,e){if(a.common.isEmpty(f)){return null}return f.join(e)},formToJSON:function(f){var e={};c.each(c("#"+f).serializeArray(),function(g,h){if(e[h.name]){e[h.name]+=(","+h.value)}else{e[h.name]=h.value}});return e},getJsonValue:function(g,e){var h;for(var f in g){if(f==e){h=g[f];break}}return h},objToEmpty:function(f){for(var e in f){if(Array.prototype==f[e].__proto__){f[e]=[]}else{if(typeof f[e]=="string"){f[e]=""}else{if(typeof f[e]=="number"){f[e]=0}}}}return f},getLength:function(g){var f=0;for(var e in g){if(g.hasOwnProperty(e)){f++}}return f},copy:function(f){var e=document.createElement("input");e.value=f;c(e).css({opacity:"0"});c(e).attr({name:"__copy_secukey"});document.body.appendChild(e);e.select();document.execCommand("Copy");
            e.className="oInput";c("input[name='__copy_secukey']").remove()},getCheckboxValue:function(f){var e="";c('input[name="'+f+'"]').each(function(){if(c(this).is(":checked")){e+=c(this).val()+","}});if(e.length>0){e=e.substring(0,e.length-1)}return e},toNumber:function(e){var f=parseFloat(e);return isNaN(f)?e:f},remove:function(e,g){if(e.length){var f=e.indexOf(g);if(f>-1){return e.splice(f,1)}}},toArray:function(g,h){h=h||0;var f=g.length-h;var e=new Array(f);while(f--){e[f]=g[f+h]}return e},extend:function(g,f){for(var e in f){g[e]=f[e]}return g},toObject:function(e){var h=this;var g={};for(var f=0;f<e.length;f++){if(e[f]){h.extend(g,e[f])}}return g},formatMoney:function(l,h,m,n,e){l=l||0;h=!isNaN(h=Math.abs(h))?h:2;m=m!==d?m:"$";n=n||",";e=e||".";var g=l<0?"-":"",k=parseInt(l=Math.abs(+l||0).toFixed(h),10)+"",f=(f=k.length)>3?f%3:0;return m+g+(f?k.substr(0,f)+n:"")+k.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+n)+(h?e+Math.abs(l-k).toFixed(h).slice(2):"")}},modal:{icon:function(f){var e="";if(f==a.variable.modal_status.WARNING){e=0}else{if(f==a.variable.modal_status.SUCCESS){e=1}else{if(f==a.variable.modal_status.FAIL){e=2}else{e=3}}}return e},msg:function(f,e){if(e!=d){layui.use("layer",function(){var g=layui.layer;g.msg(f,{icon:a.modal.icon(e),time:1000,shift:5})})}else{layui.use("layer",function(){var g=layui.layer;g.msg(f)})}},msgError:function(e){a.modal.msg(e,a.variable.modal_status.FAIL)},msgSuccess:function(e){a.modal.msg(e,a.variable.modal_status.SUCCESS)},msgWarning:function(e){a.modal.msg(e,a.variable.modal_status.WARNING)},alert:function(f,e,g){a.selfLayer.alert(f,{icon:a.modal.icon(e),title:c.i18n.prop("系统提示"),shadeClose:a.common.isEmpty(g)?true:g,btn:['<i class="fa fa-check"></i> '+c.i18n.prop("确定")],btnclass:["btn btn-primary"],})},msgReload:function(f,e){a.selfLayer.msg(f,{icon:a.modal.icon(e),time:500,shade:[0.1,"#8F8F8F"]},function(){a.modal.reload()})},alertError:function(e){a.modal.alert(e,a.variable.modal_status.FAIL)},alertSuccess:function(e){a.modal.alert(e,a.variable.modal_status.SUCCESS)},alertInfo:function(e){a.modal.alert(e,"3")},success:function(e,f){a.selfLayer.alert(e,{icon:1,closeBtn:0,title:c.i18n.prop("系统提示"),anim:1,skin:"layui-layer-molv",yes:function(g){if(typeof(f)==="function"){f("ok")}a.selfLayer.close(g)}})},error:function(e,f){a.error(e,f)},warning:function(e,f){a.warning(e,f)},alertWarning:function(e){a.modal.alert(e,a.variable.modal_status.WARNING,true)},close:function(){var e=a.selfLayer.getFrameIndex(b.name);if(a.common.isNotEmpty(e)){a.selfLayer.close(e)}else{a.layer.closeAll()}},closeAll:function(){a.selfLayer.closeAll();a.layer.closeAll()},confirm:function(e,g,f){a.selfLayer.confirm(e,{icon:3,shadeClose:a.common.isEmpty(f)?true:f,title:c.i18n.prop("系统提示"),btn:['<i class="fa fa-check"></i> '+c.i18n.prop("确定"),'<i class="fa fa-close"></i> '+c.i18n.prop("取消")]},function(h){if(typeof(g)==="function"){g("ok")}a.selfLayer.close(h)})},open:function(l,e,f,n,m,g){if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){f="auto";n="auto"}if(a.common.isEmpty(l)){l=false}if(a.common.isEmpty(e)){e="/404.html"}if(a.common.isEmpty(f)){f=800}if(a.common.isEmpty(n)){n=(c(b).height()-50)}var j=false;if(f!=="auto"||n!=="auto"){if(f>c(b).width()||n>c(b).height()){j=true}}var k;if(!a.common.isEmpty(g)&&g&&!a.common.isEmpty(m)){k=function(p,o){var q=o.find("iframe")[0];if(typeof q.contentWindow.submitHandler=="function"){if(q.contentWindow.submitHandler(p,o)){m(p,o,a.selfLayer)}}}}else{if(a.common.isEmpty(m)){k=function(p,o){var q=o.find("iframe")[0];q.contentWindow.submitHandler(p,o)}}else{k=function(p,o){m(p,o)}}}a.modal.loading(c.i18n.prop("数据加载中，请稍后..."));var h=a.selfLayer.open({type:2,area:[f+"px",n+"px"],fix:false,maxmin:true,shade:0.3,title:c.i18n.prop(l),content:e,btn:['<i class="fa fa-check"></i> '+c.i18n.prop("确定"),'<i class="fa fa-close"></i> '+c.i18n.prop("取消")],shadeClose:true,yes:k,success:function(o,p){var q=o.find("iframe")[0];if(!a.common.isEmpty(q.contentWindow.onLoadSuccess)){q.contentWindow.onLoadSuccess(p,o,a.selfLayer)}a.modal.closeLoading()},cancel:function(o){return true}});if(j){a.selfLayer.full(h)}},openOptions:function(f){var j=a.common.isEmpty(f.url)?"/404.html":f.url;var h=a.common.isEmpty(f.title)?c.i18n.prop("系统窗口"):c.i18n.prop(f.title);var e=a.common.isEmpty(f.width)?"800":f.width;var g=a.common.isEmpty(f.height)?(c(b).height()-50):f.height;var k=['<i class="fa fa-check"></i> '+c.i18n.prop("确定"),'<i class="fa fa-close"></i> '+c.i18n.prop("取消")];if(a.common.isEmpty(f.yes)){f.yes=function(m,l){f.callBack(m,l,a.selfLayer)}}a.selfLayer.open({type:2,maxmin:true,shade:0.3,title:h,fix:false,area:[e+"px",g+"px"],content:j,shadeClose:a.common.isEmpty(f.shadeClose)?true:f.shadeClose,skin:f.skin,btn:a.common.isEmpty(f.btn)?k:f.btn,yes:f.yes,success:function(l,m){if(!a.common.isEmpty(f.obj)){var n=l.find("iframe")[0];if(typeof(n.contentWindow.onLoadSuccess)==="function"){n.contentWindow.onLoadSuccess(f.obj,l,m,a.selfLayer)}else{a.modal.error("页面传参错误!")}}},cancel:function(){return true
            }})},openMainWin:function(f){var j=a.common.isEmpty(f.url)?"/404.html":f.url;var h=a.common.isEmpty(f.title)?c.i18n.prop("系统窗口"):c.i18n.prop(f.title);var e=a.common.isEmpty(f.width)?c(top.window).width()-100:f.width;var g=a.common.isEmpty(f.height)?c(top.window).height()-100:f.height;if(a.common.isEmpty(f.but)){f.but=true}if(f.but){var k=['<i class="fa fa-check"></i> '+c.i18n.prop("确定"),'<i class="fa fa-close"></i> '+c.i18n.prop("取消")];if(!a.common.isEmpty(f.callBack)){f.yes=function(m,l){f.callBack(m,l,a.layer)}}else{f.yes=function(m,l){a.layer.close(m)}}a.layer.open({type:2,maxmin:true,shadeClose:true,title:h,area:[e+"px",g+"px"],content:j,success:function(l,m){var n=l.find("iframe")[0];if(typeof(n.contentWindow.onLoadSuccess)==="function"){n.contentWindow.onLoadSuccess(m,l,a.layer)}},btn:a.common.isEmpty(f.btn)?k:f.btn,yes:f.yes,cancel:function(){return true}})}else{a.layer.open({type:2,maxmin:true,shadeClose:true,title:h,area:[e+"px",g+"px"],content:j,success:function(l,m){a.selfLayer=a.layer;var n=l.find("iframe")[0];if(typeof(n.contentWindow.onLoadSuccess)==="function"){n.contentWindow.onLoadSuccess(m,l,a.layer)}}})}},openFull:function(j,g,h,e){if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){h="auto";e="auto"}if(a.common.isEmpty(j)){j=false}if(a.common.isEmpty(g)){g="/404.html"}if(a.common.isEmpty(h)){h=800}if(a.common.isEmpty(e)){e=(c(b).height()-50)}var f=a.selfLayer.open({type:2,area:[h+"px",e+"px"],fix:false,maxmin:true,shade:0.3,title:j,content:g,btn:['<i class="fa fa-check"></i> '+c.i18n.prop("确定"),'<i class="fa fa-close"></i> '+c.i18n.prop("取消")],shadeClose:true,yes:function(l,k){var m=k.find("iframe")[0];m.contentWindow.submitHandler(l,k)},cancel:function(k){return true}});a.selfLayer.full(f)},openTab:function(f,e){a.createMenuItem(e,f)},parentTab:function(g,f){var e=b.frameElement.getAttribute("data-id");a.createMenuItem(f,g);a.closeItem(e)},closeTab:function(e){a.closeItem(e)},disable:function(){var g=b.top==b.parent?b.document:b.parent.document;try{c("a[class*=layui-layer-btn]",g).addClass("layer-disabled");c('button[class="btn btn-sm btn-primary"]',g).attr("disabled",true)}catch(f){}},enable:function(){var g=b.top==b.parent?b.document:b.parent.document;try{c("a[class*=layui-layer-btn]",g).removeClass("layer-disabled");c('button[class="btn btn-sm btn-primary"]',g).attr("disabled",false)}catch(f){}},loading:function(e){c.blockUI({message:'<div class="loaderbox"><div class="loading-activity"></div> '+e+"</div>"})},closeLoading:function(){setTimeout(function(){c.unblockUI()},50)},closeNowLoading:function(){if(top.location!=self.location){c(".content-wrapper",b.parent.document).unblock()}else{c.unblockUI()}},reload:function(){parent.location.reload()}},operate:{submit:function(h,j,f,k,l,e){var g={url:h,type:j,dataType:f,data:k,beforeSend:function(){a.modal.loading("正在处理中，请稍后...")},success:function(m){if(m.code==a.variable.web_status.SUCCESS&&a.table.options.type==a.variable.table_type.bootstrapTable){if(!a.common.isEmpty(e)&&e){if(a.common.isNotEmpty(a.table.options.rememberSelected)&&a.table.options.rememberSelected){var t=a.common.getJsonValue(k,"ids").split(",");var r=a.common.isEmpty(a.table.options.uniqueId)?a.table.options.columns[1].field:a.table.options.uniqueId;var v=a.table.rememberSelecteds[a.table.options.id];var u=[];if(a.common.isNotEmpty(v)){for(var o=0;o<v.length;o++){for(var q=0;q<t.length;q++){if(a.common.getJsonValue(v[o],r)===t[q]){u[u.length]=v[o];v.splice(o,1);o=o-1}}}}var n=a.table.rememberSelectedIds[a.table.options.id];if(a.common.isNotEmpty(n)){for(var o=0;o<n.length;o++){for(var q=0;q<u.length;q++){if(a.common.getJsonValue(u[q],r)===n[o]){n.splice(o,1);o=o-1}}}}}}}if(typeof l=="function"){l(m)}a.operate.ajaxSuccess(m)}};c.ajax(g)},delPost:function(e,f,g){if(a.common.isNotEmpty(a.table.options.rememberSelected)&&a.table.options.rememberSelected){a.table.rememberSelecteds={};a.table.rememberSelectedIds={}}a.operate.submit(e,"post","json",f,g)},post:function(e,f,g){a.operate.submit(e,"post","json",f,g)},get:function(e,f){a.operate.submit(e,"get","json","",f)},detail:function(m,l,k,f){a.table.set();var j=a.operate.detailUrl(m);var e=a.common.isEmpty(k)?"800":k;var h=a.common.isEmpty(f)?(c(b).height()-50):f;if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){e="auto";h="auto"}var g={title:a.common.isEmpty(l)?a.table.options.modalName+"详细":l,width:e,height:h,url:j,skin:"layui-layer-gray",btn:["关闭"],yes:function(o,n){layer.close(o)}};a.modal.openOptions(g)},detailUrl:function(f){var e="/404.html";if(a.common.isNotEmpty(f)){e=a.table.options.detailUrl.replace("{id}",f)}else{var f=a.common.isEmpty(a.table.options.uniqueId)?c.table.selectFirstColumns():c.table.selectColumns(a.table.options.uniqueId);if(f.length==0){a.modal.alertWarning("请至少选择一条记录");return}e=a.table.options.detailUrl.replace("{id}",f)}return e},del:function(e){a.table.set();a.modal.confirm("确定删除该条"+a.table.options.modalName+"信息吗？",function(){var f=a.common.isEmpty(e)?a.table.options.delUrl:a.table.options.delUrl.replace("{id}",e);
            if(a.table.options.type==a.variable.table_type.bootstrapTreeTable){a.operate.get(f)}else{var g={"ids":e};a.operate.submit(f,"POST","json",g,"",true)}})},exe:function(e){a.table.set();a.modal.confirm("确定处理该条"+table.options.modalName+"信息吗？",function(){var f=a.common.isEmpty(e)?table.options.exeUrl:table.options.exeUrl.replace("{id}",e);if(a.table.options.type==a.variable.table_type.bootstrapTreeTable){a.operate.get(f)}else{var g={"ids":e};a.operate.submit(f,"POST","json",g)}})},delAll:function(){a.table.set();var e=a.common.isEmpty(a.table.options.uniqueId)?c.table.selectFirstColumns():c.table.selectColumns(a.table.options.uniqueId);if(e.length==0){a.modal.error("请至少选择一条记录");return}a.modal.confirm("确认要删除选中的"+e.length+"条数据吗?",function(){var f=a.table.options.delUrl;var g={"ids":e.join()};a.operate.submit(f,"POST","json",g,"",true)})},clean:function(){a.table.set();a.modal.confirm("确定清空所有"+a.table.options.modalName+"吗？",function(){var e=a.table.options.cleanUrl;a.operate.submit(e,"post","json","")})},add:function(e){a.table.set();a.modal.open("添加"+a.table.options.modalName,a.operate.addUrl(e))},exeDis:function(f,e){a.table.set();a.modal.open("处理["+e+"]",a.operate.exeUrl(f))},addTab:function(e){a.table.set();a.modal.openTab("添加"+a.table.options.modalName,a.operate.addUrl(e))},addFull:function(f){a.table.set();var e=a.common.isEmpty(f)?a.table.options.addUrl:a.table.options.addUrl.replace("{id}",f);a.modal.openFull("添加"+a.table.options.modalName,e)},addUrl:function(f){a.table.set();var e=a.common.isEmpty(f)?a.table.options.addUrl.replace("{id}",""):a.table.options.addUrl.replace("{id}",f);return e},exeUrl:function(f){a.table.set();var e=a.common.isEmpty(f)?a.table.options.exeUrl.replace("{id}",""):a.table.options.exeUrl.replace("{id}",f);return e},edit:function(g){a.table.set();if(a.common.isEmpty(a.table.options.editUrl)){a.modal.msgError("editUrl 未传!");return}if(a.common.isEmpty(g)&&a.table.options.type==a.variable.table_type.bootstrapTreeTable){var f=c("#"+a.table.options.id).bootstrapTreeTable("getSelections")[0];if(a.common.isEmpty(f)){a.modal.error("请至少选择一条记录");return}var e=a.table.options.editUrl.replace("{id}",f[a.table.options.uniqueId]);a.modal.open("修改"+a.table.options.modalName,e)}else{a.modal.open("修改"+a.table.options.modalName,a.operate.editUrl(g))}},editTab:function(g){a.table.set();if(a.common.isEmpty(a.table.options.editUrl)){a.modal.msgError("editUrl 未传!");return}if(a.common.isEmpty(g)&&a.table.options.type==a.variable.table_type.bootstrapTreeTable){var f=c("#"+a.table.options.id).bootstrapTreeTable("getSelections")[0];if(a.common.isEmpty(f)){a.modal.error("请至少选择一条记录");return}var e=a.table.options.editUrl.replace("{id}",f[a.table.options.uniqueId]);a.modal.openTab("修改"+a.table.options.modalName,a.operate.editUrl(g))}else{a.modal.openTab("修改"+a.table.options.modalName,a.operate.editUrl(g))}},editFull:function(g){a.table.set();var e="/404.html";if(a.common.isNotEmpty(g)){e=a.table.options.editUrl.replace("{id}",g)}else{var f=a.common.isEmpty(a.table.options.uniqueId)?c.table.selectFirstColumns():c.table.selectColumns(a.table.options.uniqueId);e=a.table.options.editUrl.replace("{id}",f)}a.modal.openFull("修改"+a.table.options.modalName,e)},editUrl:function(f){a.table.set();var e="/404.html";if(a.common.isNotEmpty(f)){e=a.table.options.editUrl.replace("{id}",f)}else{var f=a.common.isEmpty(a.table.options.uniqueId)?c.table.selectFirstColumns():c.table.selectColumns(a.table.options.uniqueId);if(f.length==0){a.modal.error("请至少选择一条记录");return}e=a.table.options.editUrl.replace("{id}",f)}return e},save:function(f,g,h){var e={url:f,type:"post",dataType:"json",data:g,beforeSend:function(){a.modal.disable();a.modal.loading(c.i18n.prop("数据加载中，请稍后..."))},success:function(j){if(typeof h=="function"){a.modal.closeLoading();h(j)}else{a.operate.successCallback(j)}}};c.ajax(e)},saveModal:function(f,g,h){var e={url:f,type:"post",dataType:"json",data:g,beforeSend:function(){a.modal.loading(c.i18n.prop("数据加载中，请稍后..."))},success:function(j){a.modal.closeLoading();if(typeof h=="function"){h(j);return}if(j.code==a.variable.web_status.SUCCESS){a.modal.success(c.i18n.prop("操作成功!"))}else{if(j.code==a.variable.web_status.WARNING){a.modal.warning(j.msg)}else{a.modal.error(j.msg)}}}};c.ajax(e)},saveTab:function(f,g,h){var e={url:f,type:"POST",dataType:"JSON",data:g,beforeSend:function(){a.modal.loading(c.i18n.prop("数据加载中，请稍后..."))},success:function(j){if(typeof h=="function"){a.modal.closeLoading();h(j)}else{a.operate.successTabCallback(j)}}};c.ajax(e)},ajaxSuccess:function(e){if(e.code==a.variable.web_status.SUCCESS&&a.table.options.type==a.variable.table_type.bootstrapTable){a.success(c.i18n.prop("操作成功!"));c.table.refresh()}else{if(e.code==a.variable.web_status.SUCCESS&&a.table.options.type==a.variable.table_type.bootstrapTreeTable){a.success(c.i18n.prop("操作成功!"));c.treeTable.refresh()}else{if(e.code==a.variable.web_status.WARNING){a.modal.warning(e.msg)}else{a.modal.error(e.msg)}}}a.modal.closeLoading()},saveSuccess:function(e){if(e.code==a.variable.web_status.SUCCESS){a.modal.msgReload("保存成功,正在刷新数据请稍后……",a.variable.modal_status.SUCCESS)
        }else{if(e.code==a.variable.web_status.WARNING){a.modal.alertWarning(e.msg)}else{a.modal.alertError(e.msg)}}a.modal.closeLoading()},successCallback:function(e){a.modal.closeLoading();if(e.code==a.variable.web_status.SUCCESS){var f=b.parent;if(f.opt.table.options.type==a.variable.table_type.bootstrapTable){f.$.table.refresh();f.opt.success("操作成功",f.opt.modal.closeAll())}else{if(f.opt.table.options.type==a.variable.table_type.bootstrapTreeTable){f.$.treeTable.refresh();f.opt.success("操作成功",f.opt.modal.closeAll())}else{if(b.opt.table.options.type==a.variable.table_type.bootstrapTable){b.$.table.refresh();b.opt.success("操作成功",f.opt.modal.closeAll())}else{a.modal.msgReload("保存成功,正在刷新数据请稍后……",a.variable.modal_status.SUCCESS)}}}}else{if(e.code==a.variable.web_status.WARNING){a.modal.warning(e.msg)}else{a.modal.error(e.msg)}}},successTabCallback:function(f){a.modal.closeLoading();if(top.location!=self.location){if(f.code==a.variable.web_status.SUCCESS){var g=c(b.parent.document);var e=c(".layui-tab-title",g).find(".layui-this").children("em").attr("panel-id");if(a.common.isNotEmpty(e)){var h=c('iframe[data-id="'+e+'"]',g)[0].contentWindow;h.opt.success(c.i18n.prop("操作成功!"))}else{parent.opt.success(c.i18n.prop("操作成功!"))}a.modal.closeTab()}else{if(f.code==a.variable.web_status.WARNING){a.modal.warning(f.msg)}else{a.modal.error(f.msg)}}}else{a.modal.closeTab()}},successTab:function(){if(top.location!=self.location){var f=c(b.parent.document);var e=c(".layui-tab-title",f).find(".layui-this").children("em").attr("panel-id");if(a.common.isNotEmpty(e)){var g=c('iframe[data-id="'+e+'"]',f)[0].contentWindow;g.opt.modal.msg(c.i18n.prop("操作成功!"));if(g.opt.table.options.type==a.variable.table_type.bootstrapTable){g.$.table.refresh()}else{if(g.opt.table.options.type==a.variable.table_type.bootstrapTreeTable){g.$.treeTable.refresh()}}}a.modal.closeTab()}else{a.modal.closeTab()}}},validate:{unique:function(f){var e=c.parseJSON(f);if(e.code===a.variable.web_status.SUCCESS){return true}return false},form:function(f){var e;if(a.common.isEmpty(f)){if(a.common.isEmpty(a.table.options.formId)){e=c("form").attr("id")}else{e=a.table.options.formId}}else{e=f}return c("#"+e).validate().form()},reset:function(f){var e;if(a.common.isEmpty(f)){if(a.common.isEmpty(a.table.options.formId)){e=c("form").attr("id")}else{e=a.table.options.formId}}else{e=f}return c("#"+e).validate().resetForm()},fromData:function(f){var e;if(a.common.isEmpty(f)){if(a.common.isEmpty(a.table.options.formId)){e=c("form").attr("id")}else{e=a.table.options.formId}}else{e=f}return c("#"+e).serialize()}},form:{reset:function(h,g,f){a.table.set(g);var e;if(a.common.isEmpty(h)){if(a.common.isEmpty(a.table.options.formId)){e=c("form").attr("id")}else{e=a.table.options.formId}}else{e=h}c("#"+e)[0].reset();c("#"+e+" select").each(function(j){if(!a.common.isEmpty(c(this).attr("data-select2-id"))){if(a.common.isEmpty(f)){c(this).val(null).trigger("change")}else{if(f!=c(this).attr("name")){c(this).val(null).trigger("change")}}}});if(a.table.options.type==a.variable.table_type.bootstrapTable){if(a.common.isNotEmpty(a.table.options.rememberSelected)&&a.table.options.rememberSelected){a.table.rememberSelecteds={};a.table.rememberSelectedIds={}}if(a.common.isEmpty(g)){c("#"+a.table.options.id).bootstrapTable("refresh")}else{c("#"+g).bootstrapTable("refresh")}}else{if(a.table.options.type==a.variable.table_type.bootstrapTreeTable){if(a.common.isEmpty(g)){c("#"+a.table.options.id).bootstrapTreeTable("refresh",[])}else{c("#"+g).bootstrapTreeTable("refresh",[])}}}},submit:function(){if(typeof submitHandler=="function"){a.modal.disable();submitHandler();a.modal.enable()}else{a.modal.error(c.i18n.prop("页面方法错误[submitHandler]"))}},selectCheckeds:function(f){var e="";c('input:checkbox[name="'+f+'"]:checked').each(function(g){if(0==g){e=c(this).val()}else{e+=(","+c(this).val())}});return e},selectSelects:function(e){var f="";c("#"+e+" option:selected").each(function(g){if(0==g){f=c(this).val()}else{f+=(","+c(this).val())}});return f.split(",")},getInputValue:function(e){return c('input[name="'+e+'"]').val()},dataUp:function(f){var j={id:"form-user-saveUpdate",del:[],conversion:[]};var f=c.extend(j,f);var h=c("#"+f.id).serializeArray();for(var g=0;g<h.length;g++){if(a.common.isEmpty(f.del)){break}for(var e=0;e<f.del.length;e++){if(h[g].name==f.del[e]){h.splice(g,1);if(g==0){g=0}else{g--}}}}for(var g=0;g<h.length;g++){if(a.common.isEmpty(f.conversion)){break}for(var e=0;e<f.conversion.length;e++){if(h[g].name==f.conversion[e].name){if(f.conversion[e].value=="arr"){h[g].value=h[g].value.split(",")}if(f.conversion[e].value=="num"){h[g].value=Number(h[g].value)}}}}return h}},};c(function(){c('[data-toggle="tooltip"]').each(function(){c(this).tooltip()});setTimeout(function(){c('[data-index="_new"]').each(function(){c(this).addClass("jump5")})},2000);if(c.fn.select2!==d){c.fn.select2.defaults.set("theme","bootstrap");c("select.form-control:not(.noselect2)").each(function(){c(this).select2().on("change",function(){c(this).valid()
})})}if(c.fn.iCheck!==d){c(".check-box:not(.noicheck),.radio-box:not(.noicheck)").each(function(){c(this).iCheck({checkboxClass:(typeof(c(this).data("style"))=="undefined")?"icheckbox-blue":("icheckbox_"+(c(this).data("style")||"square-blue")),radioClass:(typeof(c(this).data("style"))=="undefined")?"iradio-blue":("iradio_"+(c(this).data("style")||"square-blue"))})})}c('[data-toggle="popover"]').each(function(){c(this).popover()});if(c(".select-time").length>0){layui.use("laydate",function(){var k=layui.laydate;var j=k.render({elem:"#startTime",max:c("#endTime").val(),theme:"default",type:c("#startTime").attr("data-type")||"date",trigger:"click",done:function(n,m){if(n!==""){l.config.min.year=m.year;l.config.min.month=m.month-1;l.config.min.date=m.date}else{l.config.min.year="";l.config.min.month="";l.config.min.date=""}}});var l=k.render({elem:"#endTime",min:c("#startTime").val(),theme:"default",type:c("#endTime").attr("data-type")||"date",trigger:"click",done:function(n,m){if(n!==""){j.config.max.year=m.year;j.config.max.month=m.month-1;j.config.max.date=m.date}else{j.config.max.year="2099";j.config.max.month="12";j.config.max.date="31"}}})})}if(c(".time-input").length>0){layui.use("laydate",function(){var j=layui.laydate;c(".time-input").each(function(m,t){var k=c(t);var o=k.attr("data-type")||"date";var q=k.attr("data-format")||"yyyy-MM-dd";var n=k.attr("data-btn")||"clear|now|confirm",u=[];var s=k.attr("data-callback")||{};if(n){if(n.indexOf("|")>0){var p=n.split("|"),r=p.length;for(var l=0;l<r;l++){if("clear"===p[l]||"now"===p[l]||"confirm"===p[l]){u.push(p[l])}}}else{if("clear"===n||"now"===n||"confirm"===n){u.push(n)}}}else{u=["clear","now","confirm"]}j.render({elem:t,theme:"molv",trigger:"click",type:o,format:q,btns:u,done:function(w,v){if(typeof b[s]!="undefined"&&b[s] instanceof Function){b[s](w,v)}}})})})}var h;c("#expandAllBtn").click(function(){var j=a.common.isEmpty(a.table.options.expandAll)?true:a.table.options.expandAll;h=a.common.isEmpty(h)?j:h;if(!h){c.bttTable.bootstrapTreeTable("expandAll")}else{c.bttTable.bootstrapTreeTable("collapseAll")}h=h?false:true});if(c("#keyword").length>0){c("#keyword").bind("focus",function g(j){if(c("#keyword").hasClass("empty")){c("#keyword").removeClass("empty")}}).bind("blur",function e(j){if(c("#keyword").val()===""){c("#keyword").addClass("empty")}c.tree.searchNode(j)}).bind("input propertychange",c.tree.searchNode)}var f="<i class='fa fa-times-circle'></i>  ";if(a.common.isNotEmpty(c.validator.messages)){a.common.extend(c.validator.messages,{required:f+c.i18n.prop("必填"),remote:f+c.i18n.prop("sys.msg.remote"),email:f+c.i18n.prop("sys.msg.email"),url:f+c.i18n.prop("sys.msg.url"),date:f+c.i18n.prop("sys.msg.date"),dateISO:f+c.i18n.prop("sys.msg.dateISO"),number:f+c.i18n.prop("sys.msg.number"),digits:f+c.i18n.prop("sys.msg.digits"),creditcard:f+c.i18n.prop("sys.msg.creditcard"),equalTo:f+c.i18n.prop("sys.msg.equalTo"),extension:f+c.i18n.prop("sys.msg.extension"),maxlength:c.validator.format(f+c.i18n.prop("sys.msg.maxlength")),minlength:c.validator.format(f+c.i18n.prop("sys.msg.minlength")),rangelength:c.validator.format(f+c.i18n.prop("sys.msg.rangelength")),range:c.validator.format(f+c.i18n.prop("sys.msg.range")),max:c.validator.format(f+c.i18n.prop("sys.msg.max")),min:c.validator.format(f+c.i18n.prop("sys.msg.min"))})}c("body",document).on("keyup",this,function(j){if(j.which===27){a.modal.closeAll()}});c("#scroll-up").toTop()});b.opt=a})(window.jQuery,window);(function(a){a.fn.toTop=function(c){var d=this;var f=a(window);var e=a("html, body");var b=a.extend({autohide:true,offset:50,speed:500,position:true,right:15,bottom:5},c);d.css({"cursor":"pointer"});if(b.autohide){d.css("display","none")}if(b.position){d.css({"position":"fixed","right":b.right,"bottom":b.bottom,})}d.click(function(){e.animate({scrollTop:0},b.speed)});f.scroll(function(){var g=f.scrollTop();if(b.autohide){if(g>b.offset){d.fadeIn(b.speed)}else{d.fadeOut(b.speed)}}})}}(jQuery));(function(a){a.extend({table:{init:function(b){var d={formId:"",id:"bootstrap-table",type:0,height:undefined,sidePagination:"server",sortName:"",sortOrder:"asc",pagination:true,pageSize:50,pageList:[50,100,150],toolbar:"toolbar",striped:false,escape:false,outcheckbox:true,firstLoad:true,showFooter:false,undefinedText:"/",emptyText:"/",search:false,showSearch:true,showPageGo:true,showRefresh:true,showColumns:true,showToggle:true,showExport:false,clickToSelect:true,singleSelect:false,paginationLoop:true,mobileResponsive:true,rememberSelected:true,_total:false,showPaginationSwitch:false,fixedColumns:false,fixedNumber:0,rightFixedColumns:false,rightFixedNumber:0,queryParams:a.table.queryParams,totalData:undefined,_totalColumns:[],rowStyle:{},};var b=a.extend(d,b);if(b.outcheckbox&&(!opt.common.isEmpty(a("#"+b.toolbar+" .multiple").html())||!opt.common.isEmpty(a("#"+b.toolbar+" .single").html()))){var e=false;if(!opt.common.isEmpty(b.columns.length)){for(var c=0;c<b.columns.length;c++){if(!opt.common.isEmpty(opt.common.getJsonValue(b.columns[c],"checkbox"))){e=true;
            break}}}if(!e){b.columns.splice(0,0,{checkbox:true,field:"state"})}}if(!opt.common.isEmpty(b.columns.length)){for(var c=0;c<b.columns.length;c++){if(opt.common.isEmpty(opt.common.getJsonValue(b.columns[c],"align"))){b.columns[c].align="center"}if(opt.common.isEmpty(opt.common.getJsonValue(b.columns[c],"halign"))){b.columns[c].halign="center"}}}opt.table.options=b;opt.table.config[b.id]=b;a.table.initEvent();a("#"+b.id).bootstrapTable({url:b.url,contentType:"application/x-www-form-urlencoded",method:"post",cache:false,height:b.height,striped:b.striped,sortable:true,sortStable:true,sortName:b.sortName,sortOrder:b.sortOrder,pagination:b.pagination,paginationLoop:b.paginationLoop,undefinedText:b.undefinedText,emptyText:b.emptyText,showPaginationSwitch:b.showPaginationSwitch,pageNumber:1,pageSize:b.pageSize,pageList:b.pageList,firstLoad:b.firstLoad,escape:b.escape,showFooter:b.showFooter,iconSize:"outline",toolbar:"#"+b.toolbar,sidePagination:b.sidePagination,search:b.search,searchText:b.searchText,showSearch:b.showSearch,showPageGo:b.showPageGo,showRefresh:b.showRefresh,showColumns:b.showColumns,showToggle:b.showToggle,showExport:b.showExport,uniqueId:b.uniqueId,clickToSelect:b.clickToSelect,singleSelect:b.singleSelect,mobileResponsive:b.mobileResponsive,detailView:b.detailView,onClickRow:b.onClickRow,onDblClickRow:b.onDblClickRow,onClickCell:b.onClickCell,onDblClickCell:b.onDblClickCell,onEditableSave:b.onEditableSave,onExpandRow:b.onExpandRow,rememberSelected:b.rememberSelected,fixedColumns:b.fixedColumns,fixedNumber:b.fixedNumber,rightFixedColumns:b.rightFixedColumns,rightFixedNumber:b.rightFixedNumber,onReorderRow:b.onReorderRow,queryParams:b.queryParams,rowStyle:b.rowStyle,columns:b.columns,responseHandler:a.table.responseHandler,onLoadSuccess:a.table.onLoadSuccess,exportOptions:b.exportOptions,detailFormatter:b.detailFormatter,})},getOptionsIds:function(c){var d=opt.common.isEmpty(c)?",":c;var b="";a.each(opt.table.config,function(e,f){b+="#"+e+d});return b.substring(0,b.length-1)},queryParams:function(d){var c={limit:d.limit,page:d.offset/d.limit+1,searchValue:d.search,sidx:d.sort,order:d.order};var b=opt.common.isEmpty(opt.table.options.formId)?a("form").attr("id"):opt.table.options.formId;return a.extend(c,opt.common.formToJSON(b))},tableTotalHtml:function(c){opt.table.set();var b="";if(!opt.common.isEmpty(opt.table.options.totalData)){return"<span>"+opt.common.getJsonValue(opt.table.options.totalData,c)+"</span>"}else{return""}},responseHandler:function(b){if(typeof opt.table.options.responseHandler=="function"){opt.table.options.responseHandler(b)}if(b.code==0){if(opt.common.isNotEmpty(opt.table.options.sidePagination)&&opt.table.options.sidePagination=="client"){return b.rows}else{if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var c=opt.common.isEmpty(opt.table.options.uniqueId)?opt.table.options.columns[1].field:opt.table.options.uniqueId;a.each(b.data.list,function(d,e){if(opt.table.rememberSelectedIds[opt.table.options.id]){var f=false;for(var d=0;d<opt.table.rememberSelectedIds[opt.table.options.id].length;d++){if(e[c]==opt.table.rememberSelectedIds[opt.table.options.id][d]){f=true}}e.state=f}else{e.state=false}})}if(opt.common.isNotEmpty(opt.table.options._total)&&opt.table.options._total){opt.table.options.totalData=b.pageTotal}return{rows:b.data.list,total:b.data.totalCount}}}else{opt.modal.error(b.msg,function(){try{opt.closeItem()}catch(d){}});return{rows:[],total:0}}},initEvent:function(){var b=a.table.getOptionsIds();a(b).on(TABLE_EVENTS,function(){opt.table.set(a(this).attr("id"))});a(b).on("check.bs.table check-all.bs.table uncheck.bs.table uncheck-all.bs.table",function(k,h){var c=a.table.affectedRowIds(h);if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var g=a.map(a("#"+opt.table.options.id).bootstrapTable("getAllSelections"),function(e){return e});var d=opt.table.rememberSelectedIds[opt.table.options.id];var j=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isEmpty(d)&&opt.common.isEmpty(d)&&g.length>1){opt.table.rememberSelecteds[opt.table.options.id]=_["union"]([],g,opt.table.options.uniqueId);opt.table.rememberSelectedIds[opt.table.options.id]=_["union"]([],a.table.affectedRowIds(g),opt.table.options.uniqueId)}var f=opt.common.isEmpty(opt.table.options.uniqueId)?opt.table.options.columns[1].field:opt.table.options.uniqueId;func=a.inArray(k.type,["check","check-all"])>-1?"union":"difference";d=opt.table.rememberSelectedIds[opt.table.options.id];if(opt.common.isNotEmpty(d)){opt.table.rememberSelectedIds[opt.table.options.id]=_[func](d,c,f)}else{opt.table.rememberSelectedIds[opt.table.options.id]=_[func]([],c,f)}j=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isNotEmpty(j)){opt.table.rememberSelecteds[opt.table.options.id]=_[func](j,h,f)}else{opt.table.rememberSelecteds[opt.table.options.id]=_[func]([],h,f)}}});a(b).on("check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table load-success.bs.table",function(){var c=opt.table.options.toolbar;
            var e=opt.table.options.uniqueId;var d=opt.common.isEmpty(e)?a.table.selectFirstColumns():a.table.selectColumns(e);a("#"+c+" .multiple").toggleClass("disabled",!d.length);a("#"+c+" .single").toggleClass("disabled",d.length!=1)});a(b).off("click").on("click",".img-circle",function(){var f=a(this).attr("src");var e=a(this).data("target");var c=a(this).data("height");var d=a(this).data("width");if(opt.common.equals("self",e)){layer.open({title:false,type:1,closeBtn:true,shadeClose:true,area:["auto","auto"],content:"<img src='"+f+"' height='"+c+"' width='"+d+"'/>"})}else{if(opt.common.equals("blank",e)){window.open(f)}}});a(b).on("click",".tooltip-show",function(){var d=a(this).data("target");var c=a(this).prev();if(opt.common.equals("copy",d)){c.select();document.execCommand("copy")}else{if(opt.common.equals("open",d)){opt.selfLayer.alert(c.val(),{title:"信息内容",shadeClose:true,btn:["确认"],btnclass:["btn btn-primary"],})}}})},onLoadSuccess:function(d){if(typeof opt.table.options.onLoadSuccess=="function"){opt.table.options.onLoadSuccess(d)}a("[data-toggle='tooltip']").tooltip();if(opt.common.isNotEmpty(opt.table.options._total)&&opt.table.options._total){var b="汇总:&nbsp;&nbsp;";for(var c=0;c<opt.table.options._totalColumns.length;c++){b+=opt.table.options._totalColumns[c].title;b+=":";b+=opt.common.isEmpty(opt.common.getJsonValue(opt.table.options.totalData,opt.table.options._totalColumns[c].field))?"0.00":opt.common.getJsonValue(opt.table.options.totalData,opt.table.options._totalColumns[c].field)+"&nbsp;&nbsp;"}a("#_pageTotal").html(b)}a('[data-toggle="popover"]').popover();if(a.fn.iCheck!==undefined){a(".check-box:not(.noicheck),.radio-box:not(.noicheck)").each(function(){a(this).iCheck({checkboxClass:(typeof(a(this).data("style"))=="undefined")?"icheckbox-blue":("icheckbox_"+(a(this).data("style")||"square-blue")),radioClass:(typeof(a(this).data("style"))=="undefined")?"iradio-blue":("iradio_"+(a(this).data("style")||"square-blue"))})})}if(a.fn.select2!==undefined){a.fn.select2.defaults.set("theme","bootstrap");a("select.form-control:not(.noselect2)").each(function(){a(this).select2().on("change",function(){a(this).valid()})})}a(window).on("resize",function(){a("[data-toggle='tooltip']").tooltip();a('[data-toggle="popover"]').popover();if(a.fn.iCheck!==undefined){a(".check-box:not(.noicheck),.radio-box:not(.noicheck)").each(function(){a(this).iCheck({checkboxClass:(typeof(a(this).data("style"))=="undefined")?"icheckbox-blue":("icheckbox_"+(a(this).data("style")||"square-blue")),radioClass:(typeof(a(this).data("style"))=="undefined")?"iradio-blue":("iradio_"+(a(this).data("style")||"square-blue"))})})}if(a.fn.select2!==undefined){a.fn.select2.defaults.set("theme","bootstrap");a("select.form-control:not(.noselect2)").each(function(){a(this).select2().on("change",function(){a(this).valid()})})}}).resize()},destroy:function(c){var b=opt.common.isEmpty(c)?opt.table.options.id:c;a("#"+b).bootstrapTable("destroy")},serialNumber:function(f,g){var b=opt.common.isEmpty(g)?opt.table.options.id:g;var e=a("#"+b).bootstrapTable("getOptions");var d=e.pageSize;var c=e.pageNumber;return d*(c-1)+f+1},tooltip:function(k,c,e,f){var g=opt.common.isEmpty(c)?20:c;var j=opt.common.isEmpty(e)?false:e;var h="";var l=opt.common.nullToStr(k);var b=opt.common.isEmpty(f)?"copy":f;if(l.length>g){if(j){h="..."+l.substr(l.length-g,g)}else{h=l.substr(0,g)+"..."}l=l.replace(/\'/g,"&apos;");l=l.replace(/\"/g,"&quot;");var d=[];d.push(opt.common.sprintf('<input id="tooltip-show" style="opacity: 0;position: absolute;z-index:-1" type="text" value="%s"/>',l));d.push(opt.common.sprintf('<a href="###" class="tooltip-show" data-toggle="tooltip" data-target="%s" title="%s">%s</a>',b,l,h));return d.join("")}else{h=l;return h}},dropdownToggle:function(b){var c=[];c.push('<div class="btn-group">');c.push('<button type="button" class="btn btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">');c.push('<i class="fa fa-cog"></i>&nbsp;<span class="fa fa-chevron-down"></span></button>');c.push('<ul class="dropdown-menu">');c.push(b.replace(/<a/g,"<li><a").replace(/<\/a>/g,"</a></li>"));c.push("</ul>");c.push("</div>");return c.join("")},imageView:function(e,b,d,f){if(opt.common.isEmpty(d)){d="auto"}if(opt.common.isEmpty(b)){b="auto"}var c=opt.common.isEmpty(f)?"self":f;if(opt.common.isNotEmpty(e)){return opt.common.sprintf("<img class='img-circle img-xs' data-height='%s' data-width='%s' data-target='%s' src='%s'/>",b,d,c,e)}else{return opt.common.nullToStr(e)}},search:function(f,c,d){opt.table.set(c);opt.debug(f);var b;if(opt.common.isEmpty(f)){if(opt.common.isEmpty(opt.table.options.formId)){b=a("form").attr("id")}else{b=opt.table.options.formId}}else{b=f}var e=opt.common.isEmpty(c)?a("#"+opt.table.options.id).bootstrapTable("getOptions"):a("#"+c).bootstrapTable("getOptions");e.queryParams=function(h){var g=opt.common.formToJSON(b);if(opt.common.isNotEmpty(d)){a.each(d,function(j){g[j]=d[j]})}g.limit=h.limit;g.page=h.offset/h.limit+1;g.searchValue=h.search;
            g.sidx=h.sort;g.order=h.order;return g};if(opt.common.isNotEmpty(c)){a("#"+c).bootstrapTable("refresh",e)}else{a("#"+opt.table.options.id).bootstrapTable("refresh",e)}},exportExcel:function(b){opt.table.set();opt.modal.confirm("确定导出所有"+opt.table.options.modalName+"吗？",function(){var c=opt.common.isEmpty(b)?a("form").attr("id"):b;opt.modal.loading("正在导出数据，请稍后...");a.post(table.options.exportUrl,a("#"+c).serializeArray(),function(d){if(d.code==web_status.SUCCESS){window.location.href=ctx+"common/download?fileName="+encodeURI(d.msg)+"&delete="+true}else{if(d.code==web_status.WARNING){opt.modal.alertWarning(d.msg)}else{opt.modal.alertError(d.msg)}}opt.modal.closeLoading()})})},importTemplate:function(){table.set();a.get(table.options.importTemplateUrl,function(b){if(b.code==web_status.SUCCESS){window.location.href=ctx+"common/download?fileName="+encodeURI(b.msg)+"&delete="+true}else{if(b.code==web_status.WARNING){opt.modal.alertWarning(b.msg)}else{opt.modal.alertError(b.msg)}}})},importExcel:function(c){table.set();var b=opt.common.isEmpty(c)?"importTpl":c;layer.open({type:1,area:["400px","230px"],fix:false,maxmin:true,shade:0.3,title:"导入"+table.options.modalName+"数据",content:a("#"+b).html(),btn:['<i class="fa fa-check"></i> 导入','<i class="fa fa-remove"></i> 取消'],shadeClose:true,btn1:function(e,d){var f=d.find("#file").val();if(f==""||(!opt.common.endWith(f,".xls")&&!opt.common.endWith(f,".xlsx"))){opt.modal.msgWarning("请选择后缀为 “xls”或“xlsx”的文件。");return false}var e=layer.load(2,{shade:false});opt.modal.disable();var g=new FormData();g.append("file",a("#file")[0].files[0]);g.append("updateSupport",a("input[name='updateSupport']").is(":checked"));a.ajax({url:table.options.importUrl,data:g,cache:false,contentType:false,processData:false,type:"POST",success:function(h){if(h.code==web_status.SUCCESS){opt.modal.closeAll();opt.modal.alertSuccess(h.msg);a.table.refresh()}else{if(h.code==web_status.WARNING){layer.close(e);opt.modal.enable();opt.modal.alertWarning(h.msg)}else{layer.close(e);opt.modal.enable();opt.modal.alertError(h.msg)}}}})}})},refresh:function(c){var b=opt.common.isEmpty(c)?opt.table.options.id:c;a("#"+b).bootstrapTable("refresh",{silent:true})},selectColumns:function(b){var c=a.map(a("#"+opt.table.options.id).bootstrapTable("getSelections"),function(e){return e[b]});if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var d=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isNotEmpty(d)){c=a.map(opt.table.rememberSelecteds[opt.table.options.id],function(e){return e[b]})}}return opt.common.uniqueFn(c)},affectedRowIds:function(d){var c=opt.common.isEmpty(opt.table.options.uniqueId)?opt.table.options.columns[1].field:opt.table.options.uniqueId;var b;if(a.isArray(d)){b=a.map(d,function(e){return e[c]})}else{b=[d[c]]}return b},selectFirstColumns:function(){var b=a.map(a("#"+opt.table.options.id).bootstrapTable("getSelections"),function(d){return d[opt.table.options.columns[1].field]});if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var c=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isNotEmpty(c)){b=a.map(c,function(d){return d[opt.table.options.columns[1].field]})}}return opt.common.uniqueFn(b)},selectAllColumns:function(){var b;if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){var c=opt.table.rememberSelecteds[opt.table.options.id];if(opt.common.isNotEmpty(c)){b=a.map(c,function(d){return d[opt.table.options.uniqueId]})}else{b=[]}}if(opt.common.isEmpty(b)||b.length==0){b=a.map(a("#"+opt.table.options.id).bootstrapTable("getAllSelections"),function(d){return d});if(opt.common.isNotEmpty(opt.table.options.rememberSelected)&&opt.table.options.rememberSelected){opt.table.rememberSelecteds[opt.table.options.id]=_["union"]([],b,opt.table.options.uniqueId);opt.table.rememberSelectedIds[opt.table.options.id]=_["union"]([],a.table.affectedRowIds(b),opt.table.options.uniqueId)}b=a.table.affectedRowIds(b)}opt.debug(b);return opt.common.uniqueFn(b)},selectDictLabel:function(b,c){var d=[];a.each(b,function(f,g){if(g.dictValue==(""+c)){var e=opt.common.equals("default",g.listClass)||opt.common.isEmpty(g.listClass)?"":"badge badge-"+g.listClass;if(!opt.common.isEmpty(g.cssClass)){e=opt.common.isEmpty(g.cssClass)?"":g.cssClass}d.push(opt.common.sprintf("<span class='%s'>%s</span>",e,a.i18n.prop(g.dictLabel)));return false}if(opt.common.isEmpty(c)&&g.isDefault==="Y"){var e=opt.common.equals("default",g.listClass)||opt.common.isEmpty(g.listClass)?"":"badge badge-"+g.listClass;if(!opt.common.isEmpty(g.cssClass)){e=opt.common.isEmpty(g.cssClass)?"":g.cssClass}d.push(opt.common.sprintf("<span class='%s'>%s</span>",e,a.i18n.prop(g.dictLabel)));return false}});return d.join("")},showColumn:function(c,d){var b=opt.common.isEmpty(d)?table.options.id:d;a("#"+b).bootstrapTable("showColumn",c)},hideColumn:function(c,d){var b=opt.common.isEmpty(d)?table.options.id:d;
            a("#"+b).bootstrapTable("hideColumn",c)}}})})(jQuery);(function(a){a.extend({bttTable:{},treeTable:{init:function(b){var d={id:"bootstrap-tree-table",type:1,height:0,rootIdValue:null,ajaxParams:{},toolbar:"toolbar",striped:false,expandColumn:1,showSearch:true,showRefresh:true,showColumns:true,expandAll:true,expandFirst:true};var b=a.extend(d,b);if(!opt.common.isEmpty(b.columns.length)){for(var c=0;c<b.columns.length;c++){if(opt.common.isEmpty(opt.common.getJsonValue(b.columns[c],"align"))){b.columns[c].align="center"}if(opt.common.isEmpty(opt.common.getJsonValue(b.columns[c],"halign"))){b.columns[c].halign="center"}}}opt.table.options=b;opt.table.config[b.id]=b;a.bttTable=a("#"+b.id).bootstrapTreeTable({code:b.code,parentCode:b.parentCode,type:"post",url:b.url,data:b.data,ajaxParams:b.ajaxParams,rootIdValue:b.rootIdValue,height:b.height,expandColumn:b.expandColumn,striped:b.striped,bordered:true,toolbar:"#"+b.toolbar,showSearch:b.showSearch,showRefresh:b.showRefresh,showColumns:b.showColumns,expandAll:b.expandAll,expandFirst:b.expandFirst,columns:b.columns,responseHandler:a.treeTable.responseHandler})},search:function(d){var b=opt.common.isEmpty(d)?a("form").attr("id"):d;var c=opt.common.formToJSON(b);a.bttTable.bootstrapTreeTable("refresh",c)},refresh:function(){a.bttTable.bootstrapTreeTable("refresh")},selectColumns:function(b){var c=a.map(a.bttTable.bootstrapTreeTable("getSelections"),function(d){return d[b]});return opt.common.uniqueFn(c)},responseHandler:function(b){if(b.code!=undefined&&b.code!=0){opt.modal.error(b.msg);return[]}else{return b}},}})})(jQuery);(function(a){a.extend({_tree:{},tree:{_option:{},_lastValue:{},init:function(b){var d={id:"tree",expandLevel:0,view:{selectedMulti:false,nameIsHTML:true},check:{enable:false,nocheckInherit:true,},data:{key:{title:"name"},simpleData:{enable:true}},};var b=a.extend(d,b);a.tree._option=b;var c={callback:{onClick:b.onClick,onCheck:b.onCheck,onDblClick:b.onDblClick,onCollapse:b.OnCollapse,onExpand:b.OnExpand,beforeClick:b.beforeClick},check:b.check,view:b.view,data:b.data};a.get(b.url,function(m){var l;if(m.__proto__.constructor==Array){l=m}else{if(m.code==opt.variable.web_status.SUCCESS){for(var h in m){if(Array.prototype==m[h].__proto__){l=m[h]}}for(var g=0;g<l.length;g++){for(var h in l[g]){if(h=="url"){delete l[g][h]}}}}else{opt.modal.error(m.msg);return}}var k=a("#treeId").val();tree=a.fn.zTree.init(a("#"+b.id),c,l);a._tree=tree;var e=tree.getNodesByParam("level",b.expandLevel-1);for(var g=0;g<e.length;g++){tree.expandNode(e[g],true,false,false)}if(b.check.enable){if(!opt.common.isEmpty(b._list)){var f=b._list.split(",");for(var g=0;g<f.length;g++){var j=tree.getNodeByParam(b.data.simpleData.idKey,f[g]);if(j!=null){tree.checkNode(j,true)}}}if(!opt.common.isEmpty(k)){var j=tree.getNodeByParam(opt.common.isEmpty(b.data.simpleData.idKey)?"id":b.data.simpleData.idKey,k);if(!opt.common.isEmpty(j)){tree.checkNode(j,true);if(a.tree._option.check.chkStyle=="radio"){tree.selectNode(j)}}}}if(!opt.common.isEmpty(k)&&!b.check.enable){var j=tree.getNodeByParam(opt.common.isEmpty(b.data.simpleData.idKey)?"id":b.data.simpleData.idKey,k);if(!opt.common.isEmpty(j)){tree.selectNode(j)}}if(typeof(b.callBack)==="function"){callBack(a._tree)}})},expandAll:function(){a._tree.expandAll(true)},searchNode:function(){var c=opt.common.trim(a("#keyword").val());if(a.tree._lastValue==c){return}a.tree._lastValue=c;var b=a._tree.getNodes();if(c==""){a.tree.showAllNode(b);return}a.tree.hideAllNode(b);a.tree.updateNodes(a._tree.getNodesByParamFuzzy("name",c))},selectByIdName:function(c,b){if(opt.common.isNotEmpty(c)&&c==opt.common.getJsonValue(b,a.tree._option.data.simpleData.idKey)){a._tree.selectNode(b,true)}},showAllNode:function(b){b=a._tree.transformToArray(b);for(var c=b.length-1;c>=0;c--){if(b[c].getParentNode()!=null){a._tree.expandNode(b[c],true,false,false,false)}else{a._tree.expandNode(b[c],true,true,false,false)}a._tree.showNode(b[c]);a.tree.showAllNode(b[c].children)}},hideAllNode:function(c){var b=a.fn.zTree.getZTreeObj("tree");var c=a._tree.transformToArray(c);for(var d=c.length-1;d>=0;d--){a._tree.hideNode(c[d])}},showParent:function(c){var b;while((b=c.getParentNode())!=null){a._tree.showNode(b);a._tree.expandNode(b,true,false,false);c=b}},showChildren:function(d){if(d.isParent){for(var b in d.children){var c=d.children[b];a._tree.showNode(c);a.tree.showChildren(c)}}},updateNodes:function(c){a._tree.showNodes(c);for(var d=0,b=c.length;d<b;d++){var e=c[d];a.tree.showChildren(e);a.tree.showParent(e)}},refreshNode:function(){a._tree.reAsyncChildNodes(null,"refresh")},getCheckedNodes:function(c){var e=opt.common.isEmpty(c)?(opt.common.isEmpty(a.tree._option.data.simpleData.idKey)?"id":a.tree._option.data.simpleData.idKey):c;var b=a._tree.getCheckedNodes(true);var d=a.map(b,function(f){return f[e]}).join();return d.split(",")},notAllowParents:function(b){return true},notAllowLastLevel:function(d){var b=d.getSelectedNodes();for(var c=0;c<b.length;c++){if(!b[c].isParent){a.modal.msgError("不能选择最后层级节点（"+b[c].name+"）");
            return false}}return true},toggleSearch:function(){a("#search").slideToggle(200);a("#btnShow").toggle();a("#btnHide").toggle();a("#keyword").focus()},collapse:function(){a._tree.expandAll(false)},expand:function(){a._tree.expandAll(true)},callBackTree:function(b,d){var l=b.find("iframe")[0].contentWindow.$._tree;if(a.tree.notAllowParents(l)){var j=layer.getChildFrame("body",d);var h=j.find("#treeId").val();var k=j.find("#treeName").val();if(opt.common.isEmpty(k)){if(l.setting.check.enable){var f=h.split(",");for(var g=0;g<f.length;g++){var e=l.getNodeByParam(l.setting.data.simpleData.idKey,f[g]);if(e!=null){k+=e.name+","}}if(opt.common.isEmpty(k)){k=k.substr(0,k.length-1)}}else{k=l.getNodesByParam(l.setting.data.simpleData.idKey,h,null)[0].name}}var c='{"id":"'+h+'","name":"'+k+'"}';return a.parseJSON(c)}else{return false}}}})})(jQuery);+function(){var b=opt.getCookie("_lang");$.i18n.properties({path:baseURL+"/i18n/",name:"i18n",language:b,cache:true,mode:"map"});var a=opt.storage.get("skin");if(a&&($.inArray(a,opt.variable.skins)>=0)){opt.changeSkin(a)}if(window.layer!==undefined){layer.config({extend:"moon/style.css",skin:"layer-ext-moon"})}$.ajaxSetup({complete:function(c,d){if(d=="timeout"){opt.outLogin("",$.i18n.prop("sys.login.out.error"));return}else{if(d=="parsererror"||d=="error"){opt.outLogin("",$.i18n.prop("sys.login.out.error"));return}}}})}();!function(){var b={open:"{{",close:"}}"};var a={exp:function(f){return new RegExp(f,"g")},query:function(h,f,j){var g=["#([\\s\\S])+?","([^{#}])*?"][h||0];return d((f||"")+b.open+g+b.close+(j||""))},escape:function(f){return String(f||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},error:function(h,f){var g="Laytpl Error：";typeof console==="object"&&console.error(g+h+"\n"+(f||""));return g+h}};var d=a.exp,e=function(f){this.tpl=f};e.pt=e.prototype;window.errors=0;e.pt.parse=function(g,j){var h=this,f=g;var l=d("^"+b.open+"#",""),m=d(b.close+"$","");g=g.replace(/\s+|\r|\t|\n/g," ").replace(d(b.open+"#"),b.open+"# ").replace(d(b.close+"}"),"} "+b.close).replace(/\\/g,"\\\\").replace(d(b.open+"!(.+?)!"+b.close),function(n){n=n.replace(d("^"+b.open+"!"),"").replace(d("!"+b.close),"").replace(d(b.open+"|"+b.close),function(o){return o.replace(/(.)/g,"\\$1")});return n}).replace(/(?="|')/g,"\\").replace(a.query(),function(n){n=n.replace(l,"").replace(m,"");return'";'+n.replace(/\\/g,"")+';view+="'}).replace(a.query(1),function(n){var o='"+(';if(n.replace(/\s/g,"")===b.open+b.close){return""}n=n.replace(d(b.open+"|"+b.close),"");if(/^=/.test(n)){n=n.replace(/^=/,"");o='"+_escape_('}return o+n.replace(/\\/g,"")+')+"'});g='"use strict";var view = "'+g+'";return view;';try{h.cache=g=new Function("d, _escape_",g);return g(j,a.escape)}catch(k){delete h.cache;return a.error(k,f)}};e.pt.render=function(h,j){var g=this,f;if(!h){return a.error("no data")}f=g.cache?g.cache(h,a.escape):g.parse(g.tpl,h);if(!j){return f}j(f)};var c=function(f){if(typeof f!=="string"){return a.error("Template not found")}return new e(f)};c.config=function(f){f=f||{};for(var g in f){b[g]=f[g]}};c.v="1.2.0";"function"==typeof define?define(function(){return c}):"undefined"!=typeof exports?module.exports=c:window.laytpl=c}();+function(d){var b="lte.boxwidget";var f={animationSpeed:500,collapseTrigger:'[data-widget="collapse"]',removeTrigger:'[data-widget="remove"]',collapseIcon:"fa-minus",expandIcon:"fa-plus",removeIcon:"fa-times"};var a={data:".box",collapsed:".collapsed-box",header:".box-header",body:".box-body",footer:".box-footer",tools:".box-tools"};var h={collapsed:"collapsed-box"};var j={collapsing:"collapsing.boxwidget",collapsed:"collapsed.boxwidget",expanding:"expanding.boxwidget",expanded:"expanded.boxwidget",removing:"removing.boxwidget",removed:"removed.boxwidget"};var e=function(l,k){this.element=l;this.options=k;this._setUpListeners()};e.prototype.toggle=function(){var k=!d(this.element).is(a.collapsed);if(k){this.collapse()}else{this.expand()}};e.prototype.expand=function(){var m=d.Event(j.expanded);var n=d.Event(j.expanding);var l=this.options.collapseIcon;var k=this.options.expandIcon;d(this.element).removeClass(h.collapsed);d(this.element).children(a.header+", "+a.body+", "+a.footer).children(a.tools).find("."+k).removeClass(k).addClass(l);d(this.element).children(a.body+", "+a.footer).slideDown(this.options.animationSpeed,function(){d(this.element).trigger(m)}.bind(this)).trigger(n)};e.prototype.collapse=function(){var l=d.Event(j.collapsed);var n=d.Event(j.collapsing);var m=this.options.collapseIcon;var k=this.options.expandIcon;d(this.element).children(a.header+", "+a.body+", "+a.footer).children(a.tools).find("."+m).removeClass(m).addClass(k);d(this.element).children(a.body+", "+a.footer).slideUp(this.options.animationSpeed,function(){d(this.element).addClass(h.collapsed);d(this.element).trigger(l)}.bind(this)).trigger(expandingEvent)};e.prototype.remove=function(){var k=d.Event(j.removed);var l=d.Event(j.removing);
    d(this.element).slideUp(this.options.animationSpeed,function(){d(this.element).trigger(k);d(this.element).remove()}.bind(this)).trigger(l)};e.prototype._setUpListeners=function(){var k=this;d(this.element).on("click",this.options.collapseTrigger,function(l){if(l){l.preventDefault()}k.toggle(d(this));return false});d(this.element).on("click",this.options.removeTrigger,function(l){if(l){l.preventDefault()}k.remove(d(this));return false})};function g(k){return this.each(function(){var n=d(this);var m=n.data(b);if(!m){var l=d.extend({},f,n.data(),typeof k=="object"&&k);n.data(b,(m=new e(n,l)))}if(typeof k=="string"){if(typeof m[k]=="undefined"){throw new Error("No method named "+k)}m[k]()}})}var c=d.fn.boxWidget;d.fn.boxWidget=g;d.fn.boxWidget.Constructor=e;d.fn.boxWidget.noConflict=function(){d.fn.boxWidget=c;return this};d(window).on("load",function(){d(a.data).each(function(){g.call(d(this))})})}(jQuery);